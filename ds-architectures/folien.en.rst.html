<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta content="Michael Eichberg" name="author" />
<meta content="&quot;Distributed Applications&quot;, &quot;Models&quot;, &quot;Architectures&quot;, &quot;Architectural Styles&quot;" name="keywords" />
<meta content="Architecture of distributed Applications" lang="de" name="description" xml:lang="de" />
<meta content="lecture-ds-architectures" name="id" />
<meta content="last-viewed" name="first-slide" />
<meta name="version" content="LD2 RENAISSANCE" />
<meta name="exercises-passwords" content="MTAwMDAw:73vvRwP68G4r4bSmsYzkjsCCYFSfkqAwHbLGXTwhUNs=:GwA7jKDAJ19k3L4l:ugxcf/R5XsZC+ZWTXYEmZreq0w==" />
<title>Architectures of Distributed Applications</title>

    <script src="../LectureDoc2/renaissance/ld.js" type="module"></script>

    <link rel="stylesheet" href="../LectureDoc2/renaissance/ld.css" />

    
    <!-- As of 2024 it is not yet possible to use "layer" with linked stylesheets 
         <link rel="stylesheet" href="../LectureDoc2/renaissance/css/themes/dhbw.css" layer="theme" />
 -->
         <style>@import url("../LectureDoc2/renaissance/css/themes/dhbw.css") layer(theme)</style>
    
</head>
<body>
<template>
<ld-topic id="architectures-of-distributed-applications">
<h1 class="title">Architectures of Distributed Applications</h1>

<!-- This file is intended to be included in rst files and contains
substitution definitions as wells as role definitions frequently
used in LectureDoc documents.

Created 2025 - Michael Eichberg -->
<!-- SUBSTITUTIONS -->
<!-- ANIMATION RELATED -->
<!-- LANGUAGE RELATED -->
<!-- TEXT RELATED -->
<!-- The following definitions enable "lightweight" definitions of mathematical
expressions that resemble MathJax definitions without causing the overhead
incurred by MathJax.
Both (are intended to) change the font to the font used by MathJax.
"math-r" uses the normal style which is used by MathJax for numbers.
"math-i" uses (the italic) font which is used by MathJax for other characters. -->
<p>A first overview.</p>
<hr class="docutils" />
<dl class="field-list simple">
<dt>Lecturer<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/cv/folien.de.rst.html">Prof. Dr. Michael Eichberg</a></p>
</dd>
<dt>Contact<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="mailto:michael.eichberg&#64;dhbw.de">michael.eichberg&#64;dhbw.de</a>, Raum 149B</p>
</dd>
<dt>Version<span class="colon">:</span></dt>
<dd><p>1.0</p>
</dd>
</dl>
<div class="supplemental">
<dl class="field-list">
<dt>Slides<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/ds-architectures/folien.en.rst.html">https://delors.github.io/ds-architectures/folien.en.rst.html</a></p>
<p><a class="reference external" href="https://delors.github.io/ds-architectures/folien.en.rst.html.pdf">https://delors.github.io/ds-architectures/folien.en.rst.html.pdf</a></p>
</dd>
<dt>Reporting issues<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://github.com/Delors/delors.github.io/issues">https://github.com/Delors/delors.github.io/issues</a></p>
</dd>
</dl>
</div><div class="footer-left docutils container">
<p>Selected slides are based on slides by Maarten van Steen ( <em>Distributed Systems</em>)</p>
<p>All errors are my own.</p>
</div>
</ld-topic>
<ld-topic class="transition-fade new-section" id="basic-architectures">
<h2>Basic architectures</h2>
</ld-topic><ld-topic id="architectural-styles">
<h2>Architectural Styles</h2>
<p>An architectural style is formulated in the form of</p>
<ul class="incremental-list simple">
<li><p>(interchangeable) components with clearly defined interfaces</p></li>
<li><p>the way in which the components are connected to each other</p></li>
<li><p>the data exchanged between the components</p></li>
<li><p>the way in which these components and connections are configured together to form a system System.</p></li>
</ul>
<div class="supplemental">
<p class="rubric">Connector</p>
<p>A mechanism that mediates communication, coordination or co-operation between components. Example: Facilities for (remote) procedure calls (RPC), message transmission or streaming.</p>
</div></ld-topic><ld-topic id="layered-architectures">
<h2>Layered Architectures</h2>
<ul class="columns incremental-list">
<li><p></p>
<object data="images/common_application_architectures/n-layered_architectures.svg" role="img" type="image/svg+xml">
</object></li>
<li><p></p>
<object data="images/common_application_architectures/n-layered_architectures-jump_over_layers.svg" role="img" type="image/svg+xml">
</object></li>
<li><p></p>
<object data="images/common_application_architectures/n-layered_architectures-and-callbacks.svg" role="img" type="image/svg+xml">
</object></li>
</ul>
</ld-topic><ld-topic id="example-of-a-3-tier-architecture">
<h2>Example of a 3-tier Architecture</h2>
<object class="align-center" data="images/common_application_architectures/3-layered-example.svg" role="img" type="image/svg+xml">
</object></ld-topic><ld-topic id="traditional-architectures">
<h2>Traditional Architectures</h2>
<object class="align-center" data="images/common_application_architectures/common_architectures.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p class="rubric">Traditional 3-tier Architecture</p>
<p>This architecture can be found in many distributed information systems with traditional database technology and associated applications.</p>
<ul class="simple">
<li><p>The presentation layer represents the interface to users or external applications.</p></li>
<li><p>The processing layer implements the business logic.</p></li>
<li><p>The persistence/data layer is responsible for data storage.</p></li>
</ul>
</div></ld-topic><ld-topic id="publish-and-subscribe-architectures">
<h2><em>Publish and Subscribe</em> Architectures</h2>
<p>Dependencies between the components are realised using the <em>Publish and Subscribe</em> paradigm with the aim of loose coupling.</p>
<ld-deck class="incremental">
<ld-card>
<p><strong>Taxonomy of coordination approaches with regard to communication and coordination:</strong></p>
<table class="highlight-row-on-hover">
<colgroup>
<col style="width: 13.0%" />
<col style="width: 43.5%" />
<col style="width: 43.5%" />
</colgroup>
<thead>
<tr><th class="head stub"></th>
<th class="head"><p>Coupled in time</p></th>
<th class="head"><p>Decoupled in time</p></th>
</tr>
</thead>
<tbody>
<tr><th class="stub"><p>Referentially coupled</p></th>
<td><p>Direct Coordination</p></td>
<td><p>Mailbox Coordination</p></td>
</tr>
<tr><th class="stub"><p>Referentially decoupled</p></th>
<td><p>Event-based Coordination</p></td>
<td><p>Shared Data Space</p></td>
</tr>
</tbody>
</table>
</ld-card><ld-card class="incremental">
<p class="rubric">Event-based Coordination</p>
<object class="align-center" data="images/pubsub/event-based.svg" role="img" type="image/svg+xml">
</object></ld-card><ld-card class="incremental">
<p class="rubric"><em>Shared Data Space</em></p>
<object class="align-center" data="images/pubsub/shared-data-space.svg" role="img" type="image/svg+xml">
</object></ld-card></ld-deck><div class="incremental docutils container">
<p><em>Event-based coordination</em> in combination with <em>shared data space</em> is often used to realise publish and subscribe architectures.</p>
</div>
<div class="supplemental">
<p class="rubric">Direct coordination</p>
<p>A process interacts directly (⇒ temporal coupling) with exactly one other well-defined process (⇒ referential coupling).</p>
<p class="rubric">Mailbox coordination</p>
<p>The processes communicating with each other do not interact directly with each other, but via a unique mailbox (⇒ referential coupling). This means that the processes do not have to be available at the same time.</p>
<p class="rubric">Event-based coordination</p>
<p>A process triggers events to which <em>any</em> other process reacts directly. A process that is not available at the time the event occurs does not see the event.</p>
<p class="rubric">Shared data storage</p>
<p>Processes communicate via tuples that are stored in a shared data space. A process that is not available at the time of writing can read the tuple later. Processes define patterns with regard to the tuples they want to read.</p>
</div><!-- TODO Expand the discussion of PubSub architectures. -->
</ld-topic><ld-topic id="structure-of-cloud-computing-applications">
<h2>Structure of cloud computing applications</h2>
<object class="align-center" data="images/cloud.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>A distinction can be made between four layers:</p>
<ul class="list-with-explanations">
<li><p>Hardware: processors, routers, power supply and cooling systems.</p>
<p>Normally completely transparent for customers.</p>
</li>
<li><p>Infrastructure: Use of virtualization techniques for the purpose of allocating and managing virtual storage and virtual servers.</p></li>
<li><p>Platforms: Provides higher level abstractions for storage and the like.</p>
<p>Example: The Amazon S3 storage system provides an API for (locally created) files that can be organized and stored in so-called buckets.</p>
</li>
<li><p>Application: Actual applications, such as office suites (word processing programmes, spreadsheet programmes, presentation applications).</p>
<p>Comparable to the suite of applications that are delivered with operating systems.</p>
</li>
</ul>
</div></ld-topic><ld-topic class="new-section transition-fade" id="microservices-newman2021">
<h2>Microservices <a class="citation-reference" href="#newman2021" id="citation-reference-1" role="doc-biblioref">[Newman2021]</a></h2>
</ld-topic><ld-topic class="no-title" id="microservice-with-rest-interface">
<h2>Microservice with REST Interface</h2>
<ul class="columns">
<li><p class="rubric">Microservices</p>
<p>A simple microservice that offers a REST interface and emits events.</p>
<div class="incremental question docutils container">
<p>Where are the challenges?</p>
</div>
</li>
<li><object data="images/microservices/base_example.svg" role="img" type="image/svg+xml">
</object></li>
</ul>
<div class="supplemental">
<p>A major challenge is the design of the interfaces. To achieve true independence, the interfaces must be very well defined. If the interfaces are not clearly defined or inadequate, this can lead to a lot of work and coordination between the teams, which is actually undesirable!</p>
</div></ld-topic><ld-topic id="key-concepts-of-microservices">
<h2>Key Concepts of Microservices</h2>
<ul class="incremental-list list-with-explanations">
<li><p>can be deployed independently/are independently deployable</p>
<p>(... and are developed independently.)</p>
</li>
<li><p>model a business domain</p>
<p>(Often along a bounded context or an aggregate determined using DDDs.)</p>
</li>
<li><p>manage their own state</p>
<p>(I.e. they have no shared database.)</p>
</li>
<li><p>are small</p>
<p>(Small enough to be developed by (max.) one team.)</p>
</li>
<li><p>flexible in terms of scalability, robustness and the used technologies</p></li>
<li><p>allow the architecture to be aligned with the organization (see Conway's Law)</p></li>
</ul>
</ld-topic><ld-topic id="microservices-and-conway-s-law">
<h2>Microservices and Conway's Law</h2>
<ul class="columns incremental-list">
<li><p class="rubric">Traditional Layered Architectures</p>
<object data="images/microservices/traditional-architecture-scope-of-change.svg" role="img" type="image/svg+xml">
</object></li>
<li><p class="rubric">Microservices Architectures</p>
<object data="images/microservices/microservices-architecture-scope-of-change.svg" role="img" type="image/svg+xml">
</object></li>
</ul>
</ld-topic><ld-topic id="microservices-and-usage-of-technologies">
<h2>Microservices and Usage of Technologies</h2>
<p>Microservices are flexible with regard to the use of technology and enable the use of “the most suitable” technology.</p>
<object class="align-center" data="images/microservices/technological-flexibility.svg" role="img" type="image/svg+xml">
</object></ld-topic><ld-topic class="vertical-title" id="aktuelle-standardtechnologien">
<h2>Aktuelle Standardtechnologien</h2>
<ld-deck>
<ld-card>
<img alt="screenshots/tiobe_2012-04.png" class="align-center" src="screenshots/tiobe_2012-04.png" />
<p>Quelle: TIOBE Programming Community Index - April 2012</p>
</ld-card><ld-card class="incremental">
<img alt="screenshots/tiobe_2024-02.png" class="align-center" src="screenshots/tiobe_2024-02.png" />
<p>Quelle: <a class="reference external" href="https://www.tiobe.com/tiobe-index/">TIOBE Programming Community Index - Feb. 2024</a></p>
</ld-card></ld-deck></ld-topic><ld-topic id="microservices-and-scalability">
<h2>Microservices and Scalability</h2>
<p>Well designed microservices can also be scaled very well.</p>
<object class="align-center" data="images/microservices/scalability.svg" role="img" type="image/svg+xml">
</object></ld-topic><ld-topic id="implementation-of-a-long-lived-transactions">
<h2>Implementation of a long-lived transactions?</h2>
<object data="images/sagas/transaction.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>The implementation of transactions is one of the biggest challenges in the development of microservices.</p>
</div></ld-topic><ld-topic id="using-sagas-for-long-lived-transactions">
<h2>Using SAGAs for long-lived transactions</h2>
<object data="images/sagas/transaction-using-saga.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>A <em>saga</em> is a sequence of actions that are executed to implement a long-lived transaction.</p>
<p>Sagas cannot guarantee atomicity. However, each system can guarantee atomicity (e.g. by using traditional database transactions).</p>
<p>If the transaction needs to be aborted, a traditional <em>rollback</em> cannot be performed. The saga must then carry out the corresponding compensating transactions, which undo all previously successful actions.</p>
</div></ld-topic><ld-topic id="minimize-the-probability-of-possible-rollbacks">
<h2>Minimize the probability of possible <em>rollbacks</em></h2>
<object data="images/sagas/transaction-using-saga-with-less-rollbacks.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>The processing sequence of the actions can be optimized to minimize the probability of <em>rollbacks</em>. In this case, the probability of a <em>rollback</em> occurring during the &quot;package and send order” step is significantly higher than for the “award customer bonus” step.</p>
</div></ld-topic><ld-topic id="long-lived-transactions-with-orchestrated-sagas">
<h2>Long-lived transactions with orchestrated sagas</h2>
<object data="images/sagas/orchestrated-saga.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>The orchestrated saga is one way of implementing long-lived transactions.</p>
<ul class="positive-list simple">
<li><p>Conceptually simple</p></li>
</ul>
<ul class="negative-list list-with-explanations">
<li><p>High degree of <em>domain coupling</em></p>
<p>As this is essentially domain-driven coupling, this coupling is often acceptable. The coupling does not generate any technical debt.</p>
</li>
<li><p>High degree of <em>request-response</em> interactions</p></li>
<li><p>Risk that functionality that would be better accommodated in the individual services (or possibly new services) is moved to the ordering service.</p></li>
</ul>
</div></ld-topic><ld-topic id="long-lived-transactions-with-choreographed-sagas">
<h2>Long-lived transactions with choreographed sagas</h2>
<object class="align-center" data="images/sagas/choreographed-saga.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p>A major problem with choreographed sagas is keeping track of the current status. This problem can be alleviated by using a “correlation ID”.</p>
</div></ld-topic><ld-topic id="dual-write-problem">
<h2><em>Dual-write Problem</em></h2>
<ld-deck>
<ld-card>
<ld-grid class="default-layout">
<ld-cell style="align-self:auto;">
<object data="images/dual-write/no-crash-no-problem.svg" role="img" type="image/svg+xml">
</object></ld-cell><ld-cell style="align-self:auto;">
<p>Where could there be a problem?</p>
<aside class="admonition incremental warning">
<p class="admonition-title">Warning</p>
<p>Writing to two different systems (here: database and event-processing middleware) always requires a transactional context.</p>
<p>If this cannot be established, inconsistencies can occur (<em>dual-write problem</em>).</p>
</aside>
</ld-cell></ld-grid></ld-card><ld-card class="incremental">
<ld-grid class="default-layout">
<ld-cell style="align-self:auto;">
<object class="align-center" data="images/dual-write/crash.svg" role="img" type="image/svg+xml">
</object></ld-cell><ld-cell style="align-self:auto;">
<p class="rubric">Solution Ideas</p>
<ul class="incremental-list negative-list simple">
<li><p>2PC is not an option in the context of microservices (too slow, too complex)</p></li>
<li><p>Changing the order of actions (1st <em>publish</em> then 2nd <em>update</em>) still leads to inconsistencies</p></li>
<li><p>notifying the event processing middleware (synchronously) - i. e. as part of the database update - is also not an option:</p>
<ul class="negative-list">
<li><p>What happens if the middleware cannot be reached?</p></li>
<li><p>What happens if the event cannot be processed?</p></li>
</ul>
</li>
</ul>
<div class="incremental assessment docutils container">
<p>Strict consistency cannot be achieved.</p>
</div>
</ld-cell></ld-grid></ld-card></ld-deck></ld-topic><ld-topic id="dual-write-problem-outbox-pattern">
<h2><em>Dual-write Problem</em> - Outbox Pattern</h2>
<object data="images/dual-write/outbox-pattern.svg" role="img" type="image/svg+xml">
</object><div class="supplemental">
<p class="rubric"><em>(a) Solution: Outbox Pattern</em></p>
<ul class="simple">
<li><p>The actions are (additionally) saved in an outbox table and then processed <strong>asynchronously</strong>.</p></li>
<li><p>This enables <em>eventual consistency</em> to be achieved.</p></li>
</ul>
</div></ld-topic><ld-topic class="no-title center-content transition-fade" id="choosing-the-right-architecture-is-a-trade-off">
<h2>Choosing the right architecture is a trade-off!</h2>
<div class="accentuate docutils container">
<p>The choice of software architecture is always a consideration of many trade-offs!</p>
</div>
<div class="supplemental">
<p>Other aspects that can/must be considered:</p>
<ul class="simple">
<li><p>Cloud (and possibly serverless)</p></li>
<li><p>Mechanical Sympathy</p></li>
<li><p>Testing and deployment of microservices (keyword: <em>Canary Releases</em>)</p></li>
<li><p>Monitoring and logging</p></li>
<li><p>Service meshes</p></li>
<li><p>...</p></li>
</ul>
</div></ld-topic><ld-topic id="literature">
<h2>Literature</h2>
<div role="list" class="citation-list">
<div class="citation" id="newman2021" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#citation-reference-1">Newman2021</a><span class="fn-bracket">]</span></span>
<p>Sam Newman, <strong>Building Microservices: Designing Fine-Grained Systems</strong>, O'Reilly, 2021.</p>
</div>
</div>
</ld-topic>
</template>
</body>
</html>
