<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="LD2 0.1" />
<meta content="Michael Eichberg" name="author" />
<meta content="&quot;HTTP&quot;, &quot;Sockets&quot;" name="keywords" />
<meta content="HTTP und Socketprogrammierung" lang="de" name="description" xml:lang="de" />
<meta content="HTTP amd Sockets" lang="en" name="description" xml:lang="en" />
<meta content="lecture-ds-http-and-sockets" name="id" />
<meta content="last-viewed" name="first-slide" />
<title>HTTP und Sockets (in Java)</title>
<link rel="stylesheet" href="../LectureDoc2/normalize.css" type="text/css" />
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 9079 2022-06-19 14:00:56Z milde $                                                               */
/* :Copyright: © 2015, 2021 Günter Milde.                                  */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS3 stylesheet defines rules for Docutils elements without        */
/* HTML equivalent. It is required to make the document semantics visible. */
/*                                                                         */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link        */

/* titles */
p.topic-title,
p.admonition-title,
p.system-message-title {
  font-weight: bold;
}
p.sidebar-title,
p.rubric {
  font-weight: bold;
  font-size: larger;
}
p.rubric {
  color: maroon;
}
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
h1 + p.subtitle {
  font-size: 1.6em;
}
a.toc-backref {
  color: inherit;
  text-decoration: none;
}

/* Warnings, Errors */
.system-messages h2,
.system-message-title,
span.problematic {
  color: red;
}

/* Inline Literals */
.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wrap at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .simple  ul, .simple  ol,
.compact li, .compact ul, .compact ol,
.simple  > li p, dl.simple  > dd,
.compact > li p, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}
/* Nested Paragraphs */
p:first-child { margin-top: 0; }
p:last-child { margin-bottom: 0; }
details > p:last-child { margin-bottom: 1em; }

/* Table of Contents */
.contents ul.auto-toc { /* section numbers present */
  list-style-type: none;
}

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

/* Definition Lists and Derivatives */
dt .classifier { font-style: italic }
dt .classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}
/* Field Lists and similar */
/* bold field name, content starts on the same line */
dl.field-list,
dl.option-list,
dl.docinfo {
  display: flow-root;
}
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.2em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples, fit all Docinfo fields */
}
/* start nested lists on new line */
dd > dl:first-child,
dd > ul:first-child,
dd > ol:first-child {
  clear: left;
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}

/* Bibliographic Fields (docinfo) */
dl.docinfo pre.address {
  font: inherit;
  margin: 0.5em 0;
}
dl.docinfo > dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */

.footnote, .citation { margin: 1em 0; } /* default paragraph skip (Firefox) */
/* hanging indent */
.citation { padding-left: 2em; }
.footnote { padding-left: 1.7em; }
.footnote.superscript { padding-left: 1.0em; }
.citation > .label { margin-left: -2em; }
.footnote > .label { margin-left: -1.7em; }
.footnote.superscript > .label { margin-left: -1.0em; }

.footnote > .label + *,
.citation > .label + * {
  display: inline-block;
  margin-top: 0;
  vertical-align: top;
}
.footnote > .backrefs + *,
.citation > .backrefs + * {
  margin-top: 0;
}
.footnote > .label + p, .footnote > .backrefs + p,
.citation > .label + p, .citation > .backrefs + p {
  display: inline;
  vertical-align: inherit;
}

.backrefs { user-select: none; }
.backrefs > a { font-style: italic; }

/* superscript footnotes */
a[role="doc-noteref"].superscript,
.footnote.superscript > .label,
.footnote.superscript > .backrefs {
  vertical-align: super;
  font-size: smaller;
  line-height: 1;
}
a[role="doc-noteref"].superscript > .fn-bracket,
.footnote.superscript > .label > .fn-bracket {
  /* hide brackets in display but leave for copy/paste */
  display: inline-block;
  width: 0;
  overflow: hidden;
}
[role="doc-noteref"].superscript + [role="doc-noteref"].superscript {
  padding-left: 0.15em; /* separate consecutive footnote references */
  /* TODO: unfortunately, "+" also selects with text between the references. */
}

/* Alignment */
.align-left   {
  text-align: left;
  margin-right: auto;
}
.align-center {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.align-right  {
  text-align: right;
  margin-left: auto;
}
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* reset inner alignment in figures and tables */
figure.align-left, figure.align-right,
table.align-left, table.align-center, table.align-right {
  text-align: inherit;
}

/* Text Blocks */
.topic { margin: 1em 2em; }
.sidebar,
.admonition,
.system-message {
  margin: 1em 2em;
  border: thin solid;
  padding: 0.5em 1em;
}
div.line-block { display: block; }
div.line-block div.line-block, pre { margin-left: 2em; }

/* Code line numbers: dropped when copying text from the page */
pre.code .ln { display: none; }
pre.code code:before {
  content: attr(data-lineno); /* …, none) fallback not supported by any browser */
  color: gray;
}

/* Tables */
table {
  border-collapse: collapse;
}
td, th {
  border: thin solid silver;
  padding: 0 1ex;
}
.borderless td, .borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

table > caption {
  text-align: left;
  margin-top: 0.2em;
  margin-bottom: 0.2em;
}
table.captionbelow {
  caption-side: bottom;
}

/* Document Header and Footer */
header { border-bottom: 1px solid black; }
footer { border-top: 1px solid black; }

/* Images are block-level by default in Docutils */
/* New HTML5 block elements: set display for older browsers */
img, header, footer, main, aside, nav, section, figure, video, details {
  display: block;
}
/* inline images */
p img, p video, figure img, figure video {
  display: inline;
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.                  */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 9338 2023-04-08 21:08:47Z milde $                                                               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: https://www.w3.org/Style/CSS/                                 */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  margin: 0;
  background-color: #dbdbdb;
  --field-indent: 9em; /* default indent of fields in field lists */
}
main, footer, header {
  line-height:1.6;
  /* avoid long lines --> better reading */
  /* optimum is 45…75 characters/line <http://webtypography.net/2.1.2> */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50rem;
  padding: 1px 2%; /* 1px on top avoids grey bar above title (mozilla) */
  margin: auto;
}
main {
  counter-reset: table figure;
  background-color: white;
}
footer, header {
  font-size: smaller;
  padding: 0.5em 2%;
  border: none;
}

/* Table of Contents */
ul.auto-toc > li > p {
  padding-left: 1em;
  text-indent: -1em;
}
nav.contents ul {
  padding-left: 1em;
}
main > nav.contents ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B29\ ';
}
main > nav.contents ul ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B1D\ ';
}

/* Transitions */
hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs */

/* vertical space (parskip) */
p, ol, ul, dl, li,
div.line-block,
.footnote, .citation,
div > math,
table {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

h1, h2, h3, h4, h5, h6,
dd, details > p:last-child {
  margin-bottom: 0.5em;
}

/* Lists */
/* ===== */

/* Definition Lists */
/* Indent lists nested in definition lists */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description {
  display: flow-root;
}
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.3em;
}
dl.description > dd:after {
  display: table;
  content: "";
  clear: left; /* clearfix for empty descriptions */
}

/* Field Lists */

dl.field-list > dd,
dl.docinfo > dd {
  margin-left: var(--field-indent); /* adapted in media queries or HTML */
}

/* example for custom field-name width */
dl.field-list.narrow > dd {
  --field-indent: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use dl.docinfo */
/* but dedication and abstract are placed into divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* disclosures */
details { padding-left: 1em; }
summary { margin-left: -1em; }

/* Text Blocks */
/* =========== */

/* Literal Blocks */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  font-family: monospace;
}

/* Block Quotes and Topics */
bockquote { margin: 1em 2em; }
blockquote p.attribution,
.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables */
/* ====== */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks */
/* ====================== */

/* Footnotes and Citations */
/* ----------------------- */

/* line on the left */
.footnote-list {
  border-left: solid thin;
  padding-left: 0.25em;
}

/* Directives */
/* ---------- */

/* Body Elements */
/* ~~~~~~~~~~~~~ */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
figure.align-left,
img.align-left,
video.align-left,
object.align-left {
  clear: left;
  float: left;
  margin-right: 1em;
}
figure.align-right,
img.align-right,
video.align-right,
object.align-right {
  clear: right;
  float: right;
  margin-left: 1em;
}
/* Stop floating sidebars, images and figures */
h1, h2, h3, h4, footer, header { clear: both; }

/* Numbered figures */
figure.numbered > figcaption > p:before {
  counter-increment: figure;
  content: "Figure " counter(figure) ": ";
  font-weight: bold;
}

/* Admonitions and System Messages */
.caution p.admonition-title,
.attention p.admonition-title,
.danger p.admonition-title,
.error p.admonition-title,
.warning p.admonition-title,
div.error {
  color: red;
}

/* Sidebar */
/* Move right. In a layout with fixed margins, */
/* it can be moved into the margin.            */
aside.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
  margin-left: 1em;
  margin-right: -1%;
  background-color: #fffffa;
}


/* Code */
pre.code { padding: 0.7ex }
pre.code, code { background-color: #eeeeee }
/* basic highlighting: for a complete scheme, see */
/* https://docutils.sourceforge.io/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math */
/* for math-output=MathML (for math-output=HTML, see math.css) */
math .boldsymbol {
  font-weight: bold;
}
mstyle.mathscr, mi.mathscr {
  font-family: STIX, XITSMathJax_Script, rsfs10,
               "Asana Math", Garamond, cursive;
}

/* Epigraph           */
/* Highlights         */
/* Pull-Quote         */
/* Compound Paragraph */
/* Container          */

/* Inline Markup */
/* ============= */

sup, sub { line-height: 0.8; } /* do not add leading for lines with sup/sub */

/* Inline Literals                                          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; }       */

/* Hyperlink References */
a { text-decoration: none; }

/* External Targets       */
/*   span.target.external */
/* Internal Targets       */
/*   span.target.internal */
/* Footnote References    */
/*   a[role="doc-noteref"] */
/* Citation References    */
/*   a.citation-reference */

</style>
    <script src="../LectureDoc2/ld-animations.js" type="text/javascript"></script>
    <script src="../LectureDoc2/ld-help.js" type="text/javascript"></script>
    <script src="../LectureDoc2/ld-core.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../LectureDoc2/ld.css" type="text/css" />
    <link rel="stylesheet" href="../LectureDoc2/themes/DHBW/theme.css" type="text/css" />
</head>
<body>
<div class="ld-slide" id="slide0">
<h1 class="title">HTTP und Sockets (in Java)</h1>

<div class="line-above padding-bottom-1em docutils container">
<dl class="field-list simple">
<dt>Dozent<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/cv/folien.rst.html">Prof. Dr. Michael Eichberg</a></p>
</dd>
<dt>Kontakt<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="mailto:michael.eichberg&#64;dhbw-mannheim.de">michael.eichberg&#64;dhbw-mannheim.de</a></p>
</dd>
<dt>Version<span class="colon">:</span></dt>
<dd><p>2024-02-26</p>
</dd>
<dt>Folien<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/ds-http-and-sockets/folien.rst.html">https://delors.github.io/ds-http-and-sockets/folien.rst.html</a> <span class="raw-html"><br></span>
<a class="reference external" href="https://delors.github.io/ds-http-and-sockets/folien.rst.html.pdf">https://delors.github.io/ds-http-and-sockets/folien.rst.html.pdf</a></p>
</dd>
<dt>Fehler auf Folien melden<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://github.com/Delors/delors.github.io">https://github.com/Delors/delors.github.io</a> bzw. <a class="reference external" href="https://github.com/Delors/delors.github.io/issues">https://github.com/Delors/delors.github.io/issues</a></p>
</dd>
</dl>
</div>
<div class="footer-left tiny docutils container">
<p>Dieser Foliensatz basiert auf Folien von Prof. Dr. Henning Pagnia.</p>
<p>Alle Fehler sind meine eigenen.</p>
</div>
</div>
<div class="smaller ld-slide" id="ip-wiederholung">
<h2>IP - Wiederholung</h2>
<p>Die Vermittlungsschicht (Internet Layer)</p>
<ul class="simple">
<li><p>übernimmt das Routing</p></li>
<li><p>realisiert Ende-zu-Ende-Kommunikation</p></li>
<li><p>überträgt Pakete</p></li>
<li><p>ist im Internet durch IP realisiert</p></li>
<li><p>löst folgende Probleme:</p>
<ul>
<li><p>Sender und Empfänger erhalten netzweit eindeutige Bezeichner (⇒ IP-Adressen)</p></li>
<li><p>die Pakete werden durch spezielle Geräte (⇒ Router) weitergeleitet</p></li>
</ul>
</li>
</ul>
</div><div class="smaller ld-slide" id="tcp-und-udp-wiederholung">
<h2>TCP und UDP - Wiederholung</h2>
<div class="two-columns docutils container">
<div class="column docutils container">
<p class="rubric">Transmission Control Protocol (TCP), RFC 793</p>
<ul class="simple">
<li><p>verbindungsorientierte Kommunikation</p></li>
<li><p>ebenfalls Konzept der Ports</p></li>
<li><p>Verbindungsaufbau zwischen zwei Prozessen (Dreifacher Handshake, Full-Duplex-Kommunikation)</p>
<ul>
<li><p>geordnete Kommunikation</p></li>
<li><p>zuverlässige Kommunikation</p></li>
<li><p>Flusskontrolle</p></li>
<li><p>hoher Overhead ⇒ eher langsam</p></li>
<li><p>nur Unicasts</p></li>
</ul>
</li>
</ul>
</div>
<div class="column docutils container">
<p class="rubric">User Datagram Protocol (UDP), RFC 768</p>
<ul class="simple">
<li><p>verbindungslose Kommunikation via Datagramme</p>
<ul>
<li><p>unzuverlässig (⇒ keine Fehlerkontrolle)</p></li>
<li><p>ungeordnet (⇒ beliebige Reihenfolge)</p></li>
<li><p>wenig Overhead (⇒ schnell)</p></li>
</ul>
</li>
<li><p>Größe der Nutzdaten ist 65507 Byte, in der Praxis jedoch meist deutlich kleiner</p></li>
<li><p>Anwendungsfelder:</p>
<ul class="smaller">
<li><p>Anwendungen mit vorwiegend kurzen Nachrichten (z.B. NTP, RPC, NIS)</p></li>
<li><p>Anwendungen mit hohem Durchsatz, die ab und zu Fehler tolerieren (z.B. Multimedia)</p></li>
<li><p>Multicasts sowie Broadcasts</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div><div class="new-section transition-scale ld-slide" id="hypertext-transfer-protocol-http">
<h2>Hypertext Transfer Protocol (HTTP)</h2>
</div><div class="ld-slide" id="http">
<h2>HTTP</h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ietf.org/rfc/rfc7230.txt">RFC 7230</a> – 7235: HTTP/1.1 (redigiert im Jahr 2014; urspr. 1999 RFC 2626)</p></li>
<li><p>RFC 7540: HTTP/2 (seit Mai 2015 standardisiert)</p></li>
<li><p>Eigenschaften:</p>
<ul>
<li><p>Client / Server (Browser / Web-Server)</p></li>
<li><p>basierend auf TCP, i. d. R. Port 80</p></li>
<li><p>Server (meist) zustandslos</p></li>
<li><p>seit HTTP/1.1 auch persistente Verbindungen und Pipelining</p></li>
<li><p>abgesicherte Übertragung (Verschlüsselung) möglich mittels Secure Socket Layer (SSL) bzw. Transport Layer Security (TLS)</p></li>
</ul>
</li>
</ul>
</div><div class="ld-slide" id="konzeptioneller-ablauf">
<h2>Konzeptioneller Ablauf</h2>
<div class="two-columns docutils container">
<div class="center-child-elements docutils container">
<img alt="images/http/http.svg" src="images/http/http.svg" style="width: 1100px;" />
</div>
<div class="small docutils container">
<p class="rubric">HTTP-Kommandos</p>
<p>(<span class="ger-quote">Verben</span>)</p>
<ul class="simple">
<li><p>HEAD</p></li>
<li><p>GET</p></li>
<li><p>POST</p></li>
<li><p>PUT</p></li>
<li><p>PATCH</p></li>
<li><p>DELETE</p></li>
<li><p>OPTIONS</p></li>
<li><p>TRACE</p></li>
<li><p>CONNECT</p></li>
<li><p>...</p></li>
</ul>
</div>
</div>
</div><div class="small ld-slide" id="protokolldefinition">
<h2>Protokolldefinition</h2>
<p>Aufbau der Dokumentenbezeichner <em>Uniform Resource Locator (URL)</em></p>
<div class="text-align-center rounded-corners padding-1em dhbw-light-gray-background docutils container">
<p><span class="docutils literal"><span class="pre">scheme://host[:port][abs_path[?query][#anchor]]</span></span></p>
</div>
<dl class="field-list simple">
<dt><span class="docutils literal">scheme</span><span class="colon">:</span></dt>
<dd><p>Protokoll (case-insensitive) (z. B. <span class="docutils literal">http</span>, <span class="docutils literal">https</span> oder <span class="docutils literal">ftp</span>)</p>
</dd>
<dt><span class="docutils literal">host</span><span class="colon">:</span></dt>
<dd><p>DNS-Name (oder IP-Adresse) des Servers (case-insensitive)</p>
</dd>
<dt><span class="docutils literal">port</span><span class="colon">:</span></dt>
<dd><p>(optional) falls leer, 80 bei <span class="docutils literal">http</span> und 443 bei <span class="docutils literal">https</span></p>
</dd>
<dt><span class="docutils literal">abs_path</span><span class="colon">:</span></dt>
<dd><p>(optional) Pfadausdruck relativ zum Server-Root (case-sensitive)</p>
</dd>
<dt><span class="docutils literal"><span class="pre">?query</span></span><span class="colon">:</span></dt>
<dd><p>(optional) direkte Parameterübergabe (case-sensitive) (<span class="docutils literal"><span class="pre">?from=…&amp;to=…</span></span>)</p>
</dd>
<dt><span class="docutils literal">#anchor</span><span class="colon">:</span></dt>
<dd><p>(optional) Sprungmarke innerhalb des Dokuments</p>
</dd>
</dl>
<div class="incremental small docutils container">
<p>Uniform Resource Identifier (URI) sind eine Verallgemeinerung von URLs.</p>
<ul>
<li><p>definiert in RFC 1630 (im Jahr 1994)</p></li>
<li><p>entweder URL (Location) oder URN (Name) (z. B. <span class="docutils literal">urn:isbn:1234567890</span>)</p></li>
<li><p>Beispiele von URIs, die keine URL sind, sind <em>XML Namespace Iidentifiers</em></p>
<pre class="code XML tiny literal-block"><code><span class="name tag">&lt;svg</span><span class="whitespace"> </span><span class="name attribute">version=</span><span class="literal string">&quot;1.1&quot;</span><span class="whitespace"> </span><span class="name attribute">xmlns=</span><span class="literal string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="name tag">&gt;</span>...<span class="name tag">&lt;/svg&gt;</span></code></pre>
</li>
</ul>
</div>
</div><div class="scriptsize ld-slide" id="das-get-kommando">
<h2>Das GET Kommando</h2>
<div class="stack">
<div class="layer">
<ul>
<li><p>Dient dem Anfordern von HTML-Daten vom Server (Request-Methode).</p></li>
<li><p>Minimale Anfrage:</p>
<dl class="field-list">
<dt>Anfrage<span class="colon">:</span></dt>
<dd><pre class="literal-block">GET &lt;Path&gt; HTTP/1.1
Host: &lt;Hostname&gt;
Connection: close
&lt;Leerzeile (CRLF)&gt;</pre>
</dd>
<dt>Optionen<span class="colon">:</span></dt>
<dd><ul class="simple">
<li><p>Client kann zusätzlich weitere Infos über die Anfrage sowie sich selbst senden.</p></li>
<li><p>Server sendet Status der Anfrage sowie Infos über sich selbst und ggf. die angeforderte HTML-Datei.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Fehlermeldungen werden ggf. vom Server ebenfalls als HTML-Daten verpackt und als Antwort gesendet.</p></li>
</ul>
</div><div class="layer incremental">
<p class="rubric">Beispiel Anfrage des Clients</p>
<pre class="code http literal-block"><code><span class="name function">GET</span> <span class="name namespace">/web/web.php</span> <span class="keyword reserved">HTTP</span><span class="operator">/</span><span class="literal number">1.1</span>
<span class="name attribute">Host</span><span class="operator">:</span> <span class="literal">archive.org</span>
<span class="error">**CRLF**</span></code></pre>
<p class="rubric">Beispiel Antwort des Servers</p>
<pre class="code http literal-block"><code><span class="keyword reserved">HTTP</span><span class="operator">/</span><span class="literal number">1.1</span> <span class="literal number">200</span> <span class="name exception">OK</span>
<span class="name attribute">Server</span><span class="operator">:</span> <span class="literal">nginx/1.25.1</span>
<span class="name attribute">Date</span><span class="operator">:</span> <span class="literal">Thu, 22 Feb 2024 19:47:11 GMT</span>
<span class="name attribute">Content-Type</span><span class="operator">:</span> <span class="literal">text/html; charset=UTF-8</span>
<span class="name attribute">Transfer-Encoding</span><span class="operator">:</span> <span class="literal">chunked</span>
<span class="name attribute">Connection</span><span class="operator">:</span> <span class="literal">close</span>
<span class="error">**CRLF**</span>
<span class="comment preproc">&lt;!DOCTYPE html&gt;</span>
…
<span class="punctuation">&lt;/</span><span class="name tag">html</span><span class="punctuation">&gt;</span>**CRLF**</code></pre>
</div></div></div><div class="new-section transition-scale ld-slide" id="sockets">
<h2>Sockets</h2>
</div><div class="ld-slide" id="sockets-in-java">
<h2>Sockets in Java</h2>
<p><strong>Sockets sind Kommunikationsendpunkte.</strong></p>
<ul class="simple">
<li><p>Sockets werden adressiert über die IP-Adresse (InetAddress-Objekt) und eine interne Port-Nummer (int-Wert).</p></li>
<li><p>Sockets gibt es bei TCP und auch bei UDP, allerdings mit unterschiedlichen Eigenschaften:</p>
<dl class="field-list simple">
<dt>TCP<span class="colon">:</span></dt>
<dd><p>verbindungsorientierte Kommunikation über <em>Streams</em></p>
</dd>
<dt>UDP<span class="colon">:</span></dt>
<dd><p>verbindungslose Kommunikation mittels <em>Datagrams</em></p>
</dd>
</dl>
</li>
<li><p>Das Empfangen von Daten ist in jedem Fall blockierend, d. h. der empfangende Thread bzw. Prozess wartet, falls keine Daten vorliegen.</p></li>
</ul>
</div><div class="ld-slide" id="tcp-sockets">
<h2>TCP Sockets</h2>
<img alt="images/http/tcp_sockets.svg" class="align-center" src="images/http/tcp_sockets.svg" style="height: 950px;" />
<div class="supplemental">
<ol class="arabic simple">
<li><p>Der Server-Prozess wartet an dem bekannten Server-Port.</p></li>
<li><p>Der Client-Prozess erzeugt einen privaten Socket.</p></li>
<li><p>Der Socket baut zum Server-Prozess eine Verbindung auf – falls der Server die Verbindung akzeptiert.</p></li>
<li><p>Die Kommunikation erfolgt Strom-orientiert: Für beide Parteien wird je ein Eingabestrom und ein Ausgabestrom eingerichtet, über den nun Daten ausgetauscht werden können.</p></li>
<li><p>Wenn alle Daten ausgetauscht wurden, schließen im Allg. beide Parteien die Verbindung.</p></li>
</ol>
</div></div><div class="smaller-slide-title ld-slide" id="ein-einfacher-portscanner-in-java">
<h2>(Ein einfacher) Portscanner in Java</h2>
<pre class="code java tiny literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">LowPortScanner</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="whitespace"> </span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="name">String</span><span class="whitespace"> </span><span class="name">host</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal string">&quot;localhost&quot;</span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">args</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="whitespace"> </span><span class="operator">&gt;</span><span class="whitespace"> </span><span class="literal number integer">0</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace"> </span><span class="name">host</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">args</span><span class="whitespace"> </span><span class="operator">[</span><span class="literal number integer">0</span><span class="operator">]</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="keyword">for</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">i</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">1</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="name">i</span><span class="whitespace"> </span><span class="operator">&lt;</span><span class="whitespace"> </span><span class="literal number integer">1024</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="name">i</span><span class="operator">++</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
      </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="name">Socket</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">Socket</span><span class="punctuation">(</span><span class="name">host</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">i</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="literal string">&quot;There is a server on port &quot;</span><span class="operator">+</span><span class="whitespace"> </span><span class="name">i</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal string">&quot;at &quot;</span><span class="operator">+</span><span class="name">host</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">close</span><span class="punctuation">();</span><span class="whitespace">
      </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">UnknownHostException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="keyword">break</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
      </span><span class="punctuation">}</span><span class="whitespace">
      </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">IOException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="comment multiline">/* probably no server waiting at this port */</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span></code></pre>
</div><div class="ld-slide" id="austausch-von-daten">
<h2>Austausch von Daten</h2>
<ul class="incremental simple">
<li><p>Nach erfolgtem Verbindungsaufbau können zwischen Client und Server mittels des Socket-InputStream und Socket-OutputStream Daten ausgetauscht werden.</p></li>
<li><p>Hierzu leitet man die rohen Daten am besten durch geeignete Filter-Streams, um eine möglichst hohe semantische Ebene zu erreichen.</p>
<ul>
<li><p>Beispiele: <span class="docutils literal">PrintWriter</span>, <span class="docutils literal">BufferedReader</span>, <span class="docutils literal">BufferedInputStream</span>, <span class="docutils literal">BufferedOutputStream</span></p></li>
<li><p>Die Netzwerkkommunikation kann dann ggf. bequem über wohlbekannte und komfortable Ein- und Ausgabe-Routinen (z. B. <span class="docutils literal">readLine</span> oder <span class="docutils literal">println</span>) durchgeführt werden.</p></li>
<li><p>Filter-Streams werden auch für den Zugriff auf andere Geräte und Dateien verwendet.</p></li>
</ul>
</li>
</ul>
<div class="supplemental">
<p>Durch die Verwendung des <em>Decorater-Patterns</em> können die Filter-Streams beliebig geschachtelt werden und vielfältig verwendet werden. Dies macht die Anwendungsprogrammierung  einfacher und erlaubt zum Beispiel das einfache Umwandeln von Zeichenketten, Datenkomprimierung, Verschlüsselung, usw.</p>
</div></div><div class="smaller-slide-title ld-slide" id="schachtelung-von-streams-ein-einfacher-echo-dienst">
<h2>(Schachtelung von Streams) Ein einfacher Echo-Dienst</h2>
<div class="stack tiny">
<div class="layer">
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">EchoClient</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="keyword declaration">throws</span><span class="whitespace"> </span><span class="name">IOException</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="name">BufferedReader</span><span class="whitespace"> </span><span class="name">userIn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedReader</span><span class="punctuation">(</span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">InputStreamReader</span><span class="punctuation">(</span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">in</span><span class="punctuation">));</span><span class="whitespace">
    </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
      </span><span class="name">String</span><span class="whitespace"> </span><span class="name">theLine</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">userIn</span><span class="punctuation">.</span><span class="name attribute">readLine</span><span class="punctuation">();</span><span class="whitespace">
      </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">theLine</span><span class="punctuation">.</span><span class="name attribute">equals</span><span class="punctuation">(</span><span class="literal string">&quot;.&quot;</span><span class="punctuation">))</span><span class="whitespace"> </span><span class="keyword">break</span><span class="punctuation">;</span><span class="whitespace">
      </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Socket</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">Socket</span><span class="punctuation">(</span><span class="literal string">&quot;localhost&quot;</span><span class="comment multiline">/*hostname*/</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="literal number integer">7</span><span class="comment multiline">/*serverPort*/</span><span class="punctuation">))</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="name">BufferedReader</span><span class="whitespace"> </span><span class="name">networkIn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace">
            </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedReader</span><span class="punctuation">(</span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">InputStreamReader</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getInputStream</span><span class="punctuation">()));</span><span class="whitespace">
        </span><span class="name">PrintWriter</span><span class="whitespace"> </span><span class="name">networkOut</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">PrintWriter</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getOutputStream</span><span class="punctuation">());</span><span class="whitespace">
        </span><span class="name">networkOut</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">theLine</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="name">networkOut</span><span class="punctuation">.</span><span class="name attribute">flush</span><span class="punctuation">();</span><span class="whitespace">
        </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">networkIn</span><span class="punctuation">.</span><span class="name attribute">readLine</span><span class="punctuation">());</span><span class="whitespace">
      </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span></code></pre>
</div><div class="layer incremental">
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">EchoServer</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="name">BufferedReader</span><span class="whitespace"> </span><span class="name">in</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
      </span><span class="name">ServerSocket</span><span class="whitespace"> </span><span class="name">server</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">ServerSocket</span><span class="punctuation">(</span><span class="literal number integer">7</span><span class="whitespace"> </span><span class="comment multiline">/*DEFAULT PORT*/</span><span class="punctuation">);</span><span class="whitespace">
      </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Socket</span><span class="whitespace"> </span><span class="name">con</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">server</span><span class="punctuation">.</span><span class="name attribute">accept</span><span class="punctuation">())</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
          </span><span class="name">in</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedReader</span><span class="punctuation">(</span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">InputStreamReader</span><span class="punctuation">(</span><span class="name">con</span><span class="punctuation">.</span><span class="name attribute">getInputStream</span><span class="punctuation">()));</span><span class="whitespace">
          </span><span class="name">PrintWriter</span><span class="whitespace"> </span><span class="name">out</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">PrintWriter</span><span class="punctuation">(</span><span class="name">con</span><span class="punctuation">.</span><span class="name attribute">getOutputStream</span><span class="punctuation">());</span><span class="whitespace">
          </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">readLine</span><span class="punctuation">())</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
          </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">flush</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">IOException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace"> </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace">
      </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">IOException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace"> </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span></code></pre>
</div></div></div><div class="ld-slide" id="upd-sockets">
<h2>UPD Sockets</h2>
<div class="two-columns docutils container">
<div class="column no-separator docutils container">
<p class="rubric">Clientseitig</p>
<ol class="arabic simple">
<li><p><span class="docutils literal">DatagramSocket</span> erzeugen</p></li>
<li><p><span class="docutils literal">DatagramPacket</span> erzeugen</p></li>
<li><p><span class="docutils literal">DatagramPacket</span> absenden</p></li>
<li><p>ggf. Antwort empfangen und verarbeiten</p></li>
</ol>
</div>
<div class="column docutils container">
<p class="rubric">Serverseitig</p>
<ol class="arabic simple">
<li><p><span class="docutils literal">DatagramSocket</span> auf festem Port erzeugen</p></li>
<li><p>Endlosschleife beginnen</p></li>
<li><p><span class="docutils literal">DatagramPacket</span> vorbereiten</p></li>
<li><p><span class="docutils literal">DatagramPacket</span> empfangen</p></li>
<li><p><span class="docutils literal">DatagramPacket</span> verarbeiten</p></li>
<li><p>ggf. Antwort erstellen und absenden</p></li>
</ol>
</div>
</div>
</div><div class="smaller-slide-title ld-slide" id="udp-basierter-echo-server">
<h2>UDP basierter Echo Server</h2>
<div class="stack tiny">
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">UDPEchoServer</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">DEFAULT_PORT</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">7</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="comment single">// privileged port</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">DatagramSocket</span><span class="whitespace"> </span><span class="name">server</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramSocket</span><span class="punctuation">(</span><span class="name">DEFAULT_PORT</span><span class="punctuation">))</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
      </span><span class="keyword">while</span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
          </span><span class="keyword type">byte</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">buffer</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="keyword type">byte</span><span class="operator">[</span><span class="literal number integer">65507</span><span class="operator">]</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="comment single">// room for incoming message</span><span class="whitespace">
          </span><span class="name">DatagramPacket</span><span class="whitespace"> </span><span class="name">dp</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramPacket</span><span class="punctuation">(</span><span class="name">buffer</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">buffer</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="punctuation">);</span><span class="whitespace">
          </span><span class="name">server</span><span class="punctuation">.</span><span class="name attribute">receive</span><span class="punctuation">(</span><span class="name">dp</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
          </span><span class="name">String</span><span class="whitespace"> </span><span class="name">data</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">String</span><span class="punctuation">(</span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getData</span><span class="punctuation">(),</span><span class="literal number integer">0</span><span class="punctuation">,</span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getLength</span><span class="punctuation">());</span><span class="whitespace">
          </span><span class="name">DatagramPacket</span><span class="whitespace"> </span><span class="name">dp2</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace">
            </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramPacket</span><span class="punctuation">(</span><span class="name">data</span><span class="punctuation">.</span><span class="name attribute">getBytes</span><span class="punctuation">(),</span><span class="whitespace">
              </span><span class="name">data</span><span class="punctuation">.</span><span class="name attribute">getBytes</span><span class="punctuation">().</span><span class="name attribute">length</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getAddress</span><span class="punctuation">(),</span><span class="whitespace"> </span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getPort</span><span class="punctuation">());</span><span class="whitespace">
          </span><span class="name">server</span><span class="punctuation">.</span><span class="name attribute">send</span><span class="punctuation">(</span><span class="name">dp2</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">IOException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span><span class="whitespace"> </span><span class="punctuation">}</span></code></pre>
</div></div><div class="integrated-exercise transition-fade ld-slide" id="ubung-ein-einfacher-http-client">
<h2>Übung - Ein einfacher HTTP-Client</h2>
<ol class="loweralpha list-with-explanations">
<li><p>Schreiben Sie einen HTTP-Client der den Server <span class="docutils literal">archive.org</span> kontaktiert, die Datei <span class="docutils literal">/web/web.php</span> anfordert und die Antwort des Servers auf dem Bildschirm ausgibt.</p>
<p>Verwenden Sie HTTP/1.1 und eine Struktur ähnlich dem in der Vorlesung vorgestellten Echo-Client.</p>
<p>Senden Sie das GET-Kommando, die Host-Zeile sowie eine Leerzeile als Strings an den Server.</p>
</li>
<li><p>Modifizieren Sie Ihren Client, so dass eine URL als Kommandozeilenparameter akzeptiert wird.</p>
<p>Verwenden Sie die (existierende) Klasse URL, um die angegebene URL zu zerlegen.</p>
</li>
<li><p>Modifizieren Sie Ihr Programm, so dass die Antwort des Servers als lokale Datei abgespeichert wird. Laden Sie die Datei zum Anzeigen in einen Browser.</p>
<p>Nutzen Sie die Klasse <span class="docutils literal">FileOutputStream</span> oder <span class="docutils literal">FileWriter</span> zum Speichern der Datei.</p>
<p>Kann Ihr Programm auch Bilddateien (z. B. &quot;/images/logo_wayback_210x77.png&quot;) korrekt speichern?</p>
</li>
</ol>
<div class="protected-exercise-solution">
<p class="rubric">Ein einfacher HTTP-Client</p>
<ol class="loweralpha simple">
<li></li>
</ol>
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">HTTPClient</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
  </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="whitespace"> </span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">){</span><span class="whitespace">
    </span><span class="name">BufferedReader</span><span class="whitespace"> </span><span class="name">in</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="name">PrintWriter</span><span class="whitespace"> </span><span class="name">out</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="name">String</span><span class="whitespace"> </span><span class="name">hostname</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal string">&quot;archive.org&quot;</span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="name">String</span><span class="whitespace"> </span><span class="name">filename</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal string">&quot;/web/web.php&quot;</span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="keyword">try</span><span class="punctuation">(</span><span class="name">Socket</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">Socket</span><span class="punctuation">(</span><span class="name">hostname</span><span class="whitespace"> </span><span class="punctuation">,</span><span class="literal number integer">80</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">;){</span><span class="whitespace">

      </span><span class="name">in</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedReader</span><span class="punctuation">(</span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">InputStreamReader</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getInputStream</span><span class="punctuation">()));</span><span class="whitespace">
      </span><span class="name">out</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">PrintWriter</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getOutputStream</span><span class="punctuation">());</span><span class="whitespace">
      </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;GET &quot;</span><span class="operator">+</span><span class="whitespace"> </span><span class="name">filename</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal string">&quot; HTTP/1.1&quot;</span><span class="punctuation">);</span><span class="whitespace">
      </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Host: &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">hostname</span><span class="punctuation">);</span><span class="whitespace">
      </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Connection: close&quot;</span><span class="punctuation">);</span><span class="whitespace">
      </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
      </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">flush</span><span class="whitespace"> </span><span class="punctuation">()</span><span class="whitespace"> </span><span class="punctuation">;</span><span class="whitespace">
      </span><span class="name">String</span><span class="whitespace"> </span><span class="name">line</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="punctuation">;</span><span class="whitespace">
      </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">((</span><span class="name">line</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">readLine</span><span class="punctuation">())</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="punctuation">){</span><span class="whitespace">
        </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">line</span><span class="punctuation">);</span><span class="whitespace">
      </span><span class="punctuation">}</span><span class="whitespace">

    </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="punctuation">(</span><span class="name">Exception</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">){</span><span class="name">e</span><span class="punctuation">.</span><span class="name attribute">printStackTrace</span><span class="punctuation">();}</span><span class="whitespace">
  </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span></code></pre>
<ol class="loweralpha simple" start="2">
<li><p>und (c)</p></li>
</ol>
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">HTTPGet</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">getFile</span><span class="punctuation">(</span><span class="name">URL</span><span class="whitespace"> </span><span class="name">url</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">c</span><span class="punctuation">;</span><span class="whitespace">
        </span><span class="name">FileOutputStream</span><span class="whitespace"> </span><span class="name">f</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="punctuation">;</span><span class="whitespace">
        </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Connecting to &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getHost</span><span class="punctuation">());</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Socket</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">Socket</span><span class="punctuation">(</span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getHost</span><span class="punctuation">(),</span><span class="whitespace"> </span><span class="literal number integer">80</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="comment single">// connect to server</span><span class="whitespace">
                </span><span class="keyword declaration">var</span><span class="whitespace"> </span><span class="name">in</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedInputStream</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getInputStream</span><span class="punctuation">());</span><span class="whitespace">
                </span><span class="keyword declaration">var</span><span class="whitespace"> </span><span class="name">out</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">PrintWriter</span><span class="punctuation">(</span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getOutputStream</span><span class="punctuation">());)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">pos</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getFile</span><span class="punctuation">().</span><span class="name attribute">lastIndexOf</span><span class="punctuation">(</span><span class="literal string">&quot;/&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;-&gt; new file: &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getFile</span><span class="punctuation">().</span><span class="name attribute">substring</span><span class="punctuation">(</span><span class="name">pos</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal number integer">1</span><span class="punctuation">));</span><span class="whitespace">
            </span><span class="name">f</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">FileOutputStream</span><span class="punctuation">(</span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getFile</span><span class="punctuation">().</span><span class="name attribute">substring</span><span class="punctuation">(</span><span class="name">pos</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal number integer">1</span><span class="punctuation">));</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">print</span><span class="punctuation">(</span><span class="literal string">&quot;** Anfordern von &lt;&quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">url</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal string">&quot;&gt; ...&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;GET &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">url</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal string">&quot; HTTP/1.0&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;HOST: &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">url</span><span class="punctuation">.</span><span class="name attribute">getHost</span><span class="punctuation">());</span><span class="whitespace">
            </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Connection: close&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">out</span><span class="punctuation">.</span><span class="name attribute">flush</span><span class="punctuation">();</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">print</span><span class="punctuation">(</span><span class="literal string">&quot; request sent &quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="comment single">// skip HTTP/1.x header data up to ’CR LF CR LF’</span><span class="whitespace">
            </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">read</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal number integer">13</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="comment single">// CR</span><span class="whitespace">
                    </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">read</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal number integer">10</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="comment single">// LF</span><span class="whitespace">
                        </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">read</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal number integer">13</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="comment single">// CR</span><span class="whitespace">
                            </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">read</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal number integer">10</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace"> </span><span class="comment single">// LF</span><span class="whitespace">
                                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;... removing meta data &quot;</span><span class="punctuation">);</span><span class="whitespace">
                                </span><span class="keyword">break</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="comment single">// CRLF CRLF found; content follows</span><span class="whitespace">
                            </span><span class="punctuation">}</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace">
            </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">((</span><span class="name">c</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">in</span><span class="punctuation">.</span><span class="name attribute">read</span><span class="punctuation">())</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="operator">-</span><span class="literal number integer">1</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="name">f</span><span class="punctuation">.</span><span class="name attribute">write</span><span class="punctuation">(</span><span class="name">c</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="comment single">// store data into local file</span><span class="whitespace">
                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">print</span><span class="punctuation">((</span><span class="keyword type">char</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="name">c</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace">
            </span><span class="name">f</span><span class="punctuation">.</span><span class="name attribute">close</span><span class="punctuation">();</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot; ... done.&quot;</span><span class="punctuation">);</span><span class="whitespace">

        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Exception</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace">

    </span><span class="comment multiline">/**
    * Downloads a file from a given URL. (Example: &quot;java HTTPGet.java http://www.google.de/index.html&quot;)
    *
    * &#64;param args URL of the file to be downloaded. E.g.,
    *             &quot;http://archive.org/web/web.php&quot;.
    *
    */</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="whitespace"> </span><span class="name">args</span><span class="operator">[]</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">args</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="whitespace"> </span><span class="operator">&lt;</span><span class="whitespace"> </span><span class="literal number integer">1</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;[ERROR] URL missing.&quot;</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;java HttpGet.java &lt;url&gt;&quot;</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">exit</span><span class="punctuation">(</span><span class="operator">-</span><span class="literal number integer">1</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">else</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="name">URL</span><span class="whitespace"> </span><span class="name">myUrl</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">URI</span><span class="punctuation">.</span><span class="name attribute">create</span><span class="punctuation">(</span><span class="name">args</span><span class="operator">[</span><span class="literal number integer">0</span><span class="operator">]</span><span class="punctuation">).</span><span class="name attribute">toURL</span><span class="punctuation">();</span><span class="whitespace">
                </span><span class="name">getFile</span><span class="punctuation">(</span><span class="name">myUrl</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">MalformedURLException</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Invalid URL: &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">exit</span><span class="punctuation">(</span><span class="operator">-</span><span class="literal number integer">2</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span></code></pre>
</div></div><div class="integrated-exercise ld-slide" id="ubung-protokollaggregation">
<h2>Übung - Protokollaggregation</h2>
<p>Schreiben Sie ein UDP-basiertes Java-Programm mit dem sich Protokoll-Meldungen auf einem Server
zentral anzeigen lassen. Das Programm soll aus mehreren Clients und einem Server bestehen. Jeder
Client liest von der Tastatur eine Eingabezeile in Form eines Strings ein, der dann sofort zum Server gesendet wird. Der Server wartet auf Port 4999 und empfängt die Meldungen beliebiger Clients, die er dann unmittelbar auf den Bildschirm ausgibt.</p>
<div class="protected-exercise-solution">
<p class="rubric">UDP basierter Syslog-Server und Client</p>
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">class</span> <span class="name class">SyslogServer</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">DEFAULT_PORT</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">4999</span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">MAX_PACKET_SIZE</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">65507</span><span class="punctuation">;</span><span class="whitespace">

    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="whitespace">
                </span><span class="keyword declaration">var</span><span class="whitespace"> </span><span class="name">socket</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramSocket</span><span class="punctuation">(</span><span class="name">DEFAULT_PORT</span><span class="punctuation">);)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;∗∗∗ SyslogServer ***&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                    </span><span class="keyword type">byte</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">buffer</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="keyword type">byte</span><span class="operator">[</span><span class="name">MAX_PACKET_SIZE</span><span class="operator">]</span><span class="punctuation">;</span><span class="whitespace">
                    </span><span class="name">DatagramPacket</span><span class="whitespace"> </span><span class="name">dp</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramPacket</span><span class="punctuation">(</span><span class="name">buffer</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">buffer</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="punctuation">);</span><span class="whitespace">
                    </span><span class="name">socket</span><span class="punctuation">.</span><span class="name attribute">receive</span><span class="punctuation">(</span><span class="name">dp</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="comment single">// wait for new message</span><span class="whitespace">
                    </span><span class="name">String</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">String</span><span class="punctuation">(</span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getData</span><span class="punctuation">(),</span><span class="whitespace"> </span><span class="literal number integer">0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getLength</span><span class="punctuation">());</span><span class="whitespace">
                    </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;[&quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getAddress</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace">
                            </span><span class="literal string">&quot;:&quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">dp</span><span class="punctuation">.</span><span class="name attribute">getPort</span><span class="punctuation">()</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal string">&quot;] &quot;</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="name">s</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Exception</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                    </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="punctuation">}</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="comment single">// while</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Exception</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span></code></pre>
<pre class="code Java literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.net.*</span><span class="punctuation">;</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">java.io.*</span><span class="punctuation">;</span><span class="whitespace">

</span><span class="keyword declaration">class</span> <span class="name class">SyslogClient</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">DEFAULT_SERVER_PORT</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">4999</span><span class="punctuation">;</span><span class="whitespace">
    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">int</span><span class="whitespace"> </span><span class="name">MAX_PACKET_SIZE</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal number integer">65507</span><span class="punctuation">;</span><span class="whitespace">

    </span><span class="keyword declaration">public</span><span class="whitespace"> </span><span class="keyword declaration">static</span><span class="whitespace"> </span><span class="keyword type">void</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">(</span><span class="name">String</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">args</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
        </span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="name">String</span><span class="whitespace"> </span><span class="name">hostname</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal string">&quot;localhost&quot;</span><span class="punctuation">;</span><span class="whitespace">
        </span><span class="keyword">try</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword declaration">final</span><span class="whitespace"> </span><span class="keyword declaration">var</span><span class="whitespace"> </span><span class="name">socket</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramSocket</span><span class="punctuation">();)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">InetAddress</span><span class="whitespace"> </span><span class="name">host</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">InetAddress</span><span class="punctuation">.</span><span class="name attribute">getByName</span><span class="punctuation">(</span><span class="name">hostname</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="name">BufferedReader</span><span class="whitespace"> </span><span class="name">userIn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">BufferedReader</span><span class="punctuation">(</span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">InputStreamReader</span><span class="punctuation">(</span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">in</span><span class="punctuation">));</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;[INFO] SyslogClient: type message to send or &lt;CTRL + d&gt; for exit.&quot;</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="keyword">do</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
                </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">out</span><span class="punctuation">.</span><span class="name attribute">print</span><span class="punctuation">(</span><span class="literal string">&quot;&gt; &quot;</span><span class="punctuation">);</span><span class="whitespace"> </span><span class="comment single">// user prompt</span><span class="whitespace">
                </span><span class="name">String</span><span class="whitespace"> </span><span class="name">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">userIn</span><span class="punctuation">.</span><span class="name attribute">readLine</span><span class="punctuation">();</span><span class="whitespace">
                </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">s</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="keyword constant">null</span><span class="punctuation">)</span><span class="whitespace">
                    </span><span class="keyword">break</span><span class="punctuation">;</span><span class="whitespace"> </span><span class="comment single">// CTRL+d has been pressed</span><span class="whitespace">
                </span><span class="keyword type">byte</span><span class="operator">[]</span><span class="whitespace"> </span><span class="name">data</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">s</span><span class="punctuation">.</span><span class="name attribute">getBytes</span><span class="punctuation">();</span><span class="whitespace">
                </span><span class="keyword">if</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">data</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="whitespace"> </span><span class="operator">&gt;</span><span class="whitespace"> </span><span class="name">MAX_PACKET_SIZE</span><span class="punctuation">)</span><span class="whitespace">
                    </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="literal string">&quot;Message too large.&quot;</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="name">DatagramPacket</span><span class="whitespace"> </span><span class="name">dp</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">new</span><span class="whitespace"> </span><span class="name">DatagramPacket</span><span class="punctuation">(</span><span class="name">data</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">data</span><span class="punctuation">.</span><span class="name attribute">length</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">host</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="name">DEFAULT_SERVER_PORT</span><span class="punctuation">);</span><span class="whitespace">
                </span><span class="name">socket</span><span class="punctuation">.</span><span class="name attribute">send</span><span class="punctuation">(</span><span class="name">dp</span><span class="punctuation">);</span><span class="whitespace">
            </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">while</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="keyword constant">true</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace"> </span><span class="keyword">catch</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="name">Exception</span><span class="whitespace"> </span><span class="name">e</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="punctuation">{</span><span class="whitespace">
            </span><span class="name">System</span><span class="punctuation">.</span><span class="name attribute">err</span><span class="punctuation">.</span><span class="name attribute">println</span><span class="punctuation">(</span><span class="name">e</span><span class="punctuation">);</span><span class="whitespace">
        </span><span class="punctuation">}</span><span class="whitespace">
    </span><span class="punctuation">}</span><span class="whitespace">
</span><span class="punctuation">}</span></code></pre>
</div></div>
</body>
</html>
