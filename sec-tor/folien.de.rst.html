<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
<meta name="exercises-passwords" content="MTAwMDAw:qjyt5hEjJM/I9SNdOvPJkK4bkFTkBgcntcFGlH/PJh8=:DKEQ8v62Rpxdz3C3:duFn4hvglRX8Wj8Tw6zJSoOltAReiBb8vaUmQeUlqO+e3KBjtkQq3veUN2DGcg+K5DN4vug3i9ydzPYggQg4CC5uiasw6UC4UjJGwtqJ7zkc/CL14HWNGTdU2otsbMxzeaNVVwgkoiIgKeMtnoNMnYIky8ZuSRCUVDU2UXKGSDu0q0SDU+Yz/lyhp5NzlaxAx3/DdJU5kDv/9F+rAYX6nVI6bzML+PbFnMMLPyPSQq1rx4eit/q7de655ZMnM6kW+pZlCT5HvQBkL+D4fapSBV2h7M/tLTFOVs+ZCAxK/t62Wd9KppOVCu6PNDhBTAKxZ9BFJeOk+avwrxkmnTMxXSTXYip/H8+cX3LdiUZbEo6h+fXJm2Dmnud5wjeli8rdXmCtFz5s4ciufTPfM6pe5Hlo3QQyEBduw8BXXyX7g6+DZFpjYmLndWNo59SBspARc0vWpaBiLgRA04pOarMVug1ulkyiXItOcBwOaQ7LtNFZcb4nKP4mFuQ3bvS3yZn7FbxSQ8/82OOuLcL+fftOm8WW2cjWU963cUM10L+C82Qm+X7+fMFhpnJKSd7RD2Xrj+9tQX6QwfAcTzVzNCJSqi2FGPUWwfBqcoH2u4JzdW5DJlejCBNaglnBC8O/l/Ttte3rRA/1VO+0gmNglZ19/mIKkPZrXxgs+9VohpwoaB+76Wxt4VmiyWFvw3eND8sTUjYHVMfQlg6FD9JzryoctX5zEaVhPwCc6WP+YRcdHG6mJPL8aIo/41XkUSy7rV14Vuq3xm60hEbf+yYruwCgGkfP7GdOM9ZkTwLqjpYiLdndt4iISNsNKM55S5BEXONQZZX7rvDa7eq/iNIvIPK3nTD681d86He80A75vAzvFZpqmOLjZTsBcGBRtXh/OtAFA3B9Gc4CSu7pJ09kRsmAdvWJSMjOWAGTYJgi7LjQHf/MoPm8PqomX1Il5yemVIud0lKVSyWJifSYY3rRW5bcfvnfT+oBlMEWYQB68MqlysSy1Iq2OHk1RBjPYsVG8udxWpdEhfuZahj7eceUEIuBDpfBBhz8Uf88VUbcOynSegpeKmAYYuKQe3YQgHuHPe6FtA0MkWrB3w3xqLtofJ0O8+vZSfQoW0Qhz10pbf1wN8banip7h99ZN75m00KVUjv8Y4xQ7UfrX/P7MO33bnvbbuTXxT9x7rlE+4mhJG2SlYfi2yj3ou0=" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="LD2 0.1" />
<meta content="Michael Eichberg" name="author" />
<meta content="&quot;TOR&quot;" name="keywords" />
<meta content="TOR" lang="de" name="description" xml:lang="de" />
<meta content="lecture-security-tor" name="id" />
<meta content="last-viewed" name="first-slide" />
<title>TOR - The Onion Router</title>
<script type="text/javascript" src="../LectureDoc2/ext/mathjax/es5/tex-chtml-full.js?config=TeX-AMS_CHTML"></script>

    <script src="../LectureDoc2/ld-core.js" type="module"></script>

    <script src="../LectureDoc2/ld-components.js" type="module"></script>

    <!-- Additional scripts that interact with LectureDoc have to be added below. -->
    <link rel="stylesheet" href="../LectureDoc2/ld.css" type="text/css" />

    <link rel="stylesheet" href="../LectureDoc2/themes/DHBW/theme.css" type="text/css" />

    <!-- When we make better use of HTML Components for LectureDoc's UI we can remove the following line -->
    <link rel="stylesheet" href="../LectureDoc2/ld-ui.css" type="text/css" />

    
</head>
<body>
<template>
<div class="ld-slide" id="tor-the-onion-router">
<h1 class="title">TOR - The Onion Router</h1>
<dl class="docinfo">
<dt class="dozent">Dozent<span class="colon">:</span></dt>
<dd class="dozent"><p><a class="reference external" href="https://delors.github.io/cv/folien.de.rst.html">Prof. Dr. Michael Eichberg</a></p>
</dd>
<dt class="contact">Kontakt<span class="colon">:</span></dt>
<dd class="contact"><a class="reference external" href="mailto:michael.eichberg&#64;dhbw.de">michael.eichberg&#64;dhbw.de</a></dd>
<dt class="version">Version<span class="colon">:</span></dt>
<dd class="version">1.1</dd>
</dl>
<div class="supplemental">
<dl class="field-list">
<dt>Folien<span class="colon">:</span></dt>
<dd><p>[HTML] <a class="reference external" href="https://delors.github.io/sec-tor/folien.de.rst.html">https://delors.github.io/sec-tor/folien.de.rst.html</a></p>
<p>[PDF] <a class="reference external" href="https://delors.github.io/sec-tor/folien.de.rst.html.pdf">https://delors.github.io/sec-tor/folien.de.rst.html.pdf</a></p>
</dd>
<dt>Fehler melden<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://github.com/Delors/delors.github.io/issues">https://github.com/Delors/delors.github.io/issues</a></p>
</dd>
</dl>
</div></div>
<div class="ld-slide" id="tor-the-onion-router-1">
<h2>Tor (The Onion Router)</h2>
<p>Anwendungsunabhängiger <strong>low-latency Anonymisierungsdienst für TCP-Verbindungen</strong>, der den Standort und die IP des Nutzers verschleiert.</p>
<ul class="incremental simple">
<li><p>Typische Anwendung: anonymes Surfen im Internet und Instant Messaging (z. B. Briar)</p></li>
<li><p>Frei und Open Source</p></li>
<li><p>gegründet 2002, öffentlich nutzbar seit 2003, Code seit 2004 frei verfügbar</p></li>
<li><p>Baut ein <em>Overlay-Netzwerk</em> auf</p></li>
<li><p>Grundlegendes Prinzip: Onion Routing</p></li>
</ul>
<div class="supplemental">
<dl class="field-list simple">
<dt>low-latency<span class="colon">:</span></dt>
<dd><p>Die Verzögerung durch die Anonymisierung ist so gering, dass Tor für Instant Messaging und das Surfen im Internet verwendet werden kann.</p>
</dd>
<dt>Overlay-Netzwerk<span class="colon">:</span></dt>
<dd><p>Tor baut ein eigenes Netzwerk auf, welches auf dem Internet aufsetzt. Die Verbindungen zwischen den Tor-Knoten werden von Tor zusätzlich verschlüsselt.</p>
</dd>
</dl>
</div></div><div class="ld-slide" id="tor-verwendung">
<h2>Tor - Verwendung</h2>
<ul class="incremental">
<li><p>legale/intendierte Nutzungen: Nutzer mit allg. Datenschutzbedürfnissen, <em>Whistleblowers</em>, Dissidenten, Journalisten, ...</p></li>
<li><p>illegale Zwecke (<strong>Darknet</strong>)</p>
<div class="smaller minor incremental docutils container">
<p>Marktplatz für illegale Waren und Dienstleistungen, z. B. Drogen, Waffen, gefälschte Dokumente, ... (z. B. <a class="reference external" href="https://en.wikipedia.org/wiki/Silk_Road_(marketplace)">Silk Road</a>, oder <a class="reference external" href="https://en.wikipedia.org/wiki/CyberBunker">CyberBunker</a> als Hosting-Provider für illegale Dienst)</p>
</div>
<div class="smaller minor incremental docutils container">
<p>Es wird geschätzt, dass etwa 80% des Datenverkehrs im Zusammenhang mit dem Zugriff auf Kinderpornografie steht. Solche Schätzungen sind allerdings mit Vorsicht zu genießen!</p>
</div>
</li>
</ul>
<div class="supplemental">
<p>Wir können unterscheiden zwischen:</p>
<dl class="field-list simple">
<dt><em>Surface Web</em><span class="colon">:</span></dt>
<dd><p>Das frei-verfügbare Internet.</p>
</dd>
<dt><em>Deep Web</em><span class="colon">:</span></dt>
<dd><p>Das Internet, das durch Zugriffsbeschränkungen nicht öffentlich zugänglich ist.</p>
</dd>
<dt><em>Dark Web</em><span class="colon">:</span></dt>
<dd><p>Das Internet, das nicht indiziert ist und nur über spezielle Software (z. B. Tor) erreichbar ist. Häufig - aber nicht ausschließlich - wird das Dark Web für illegale Aktivitäten genutzt und ist meist zusätzlich durch Zugriffsbeschränkungen geschützt.</p>
</dd>
</dl>
</div></div><div class="ld-slide" id="tor-potentielle-sicherheitslucken">
<h2>Tor - potentielle Sicherheitslücken</h2>
<ul class="simple">
<li><p><span class="minor">DoS Attacken</span></p></li>
</ul>
<div class="incremental docutils container">
<ul class="simple">
<li><p>Identifikation von <em>Onion Services</em> (aka <em>Hidden Services</em>)</p></li>
</ul>
</div>
<div class="incremental docutils container">
<ul class="simple">
<li><p>Deanonymisierungsattacken</p></li>
</ul>
</div>
<div class="incremental docutils container">
<p><a class="reference external" href="https://github.com/Attacks-on-Tor/Attacks-on-Tor#correlation-attacks">Aufstellung von Angriffen auf Tor</a>.</p>
</div>
</div><div class="ld-slide" id="tor-deanonymisierungsattacke-2013">
<h2>Tor - Deanonymisierungsattacke 2013</h2>
<blockquote class="epigraph">
<p>Wenn ein einzelner Nutzer Tor über einen längeren Zeitraum [3 bis 6-Monate, abhängig von einigen Faktoren] regelmäßig nutzt, ist es fast sicher, dass er <em>de-anonymisiert</em> werden kann.</p>
<p>[Übersetzt mit DeepL.]</p>
<p class="attribution">—2013 - <a class="reference external" href="https://www.infosecurity-magazine.com/news/tor-is-not-as-safe-as-you-may-think/">Tor is not as safe as you may think</a></p>
</blockquote>
</div><div class="ld-slide" id="tor-deanonymisierungsattacke-2024">
<h2>Tor - Deanonymisierungsattacke 2024</h2>
<blockquote class="epigraph">
<p>Strafverfolgungsbehörden haben offenbar einen Weg gefunden, Nutzer des Tor-Netzwerkes gezielt zu deanonymisieren. Möglich sein soll dies [...] durch sogenannte Timing-Analysen, die bisher als praktisch nicht umsetzbar galten. Dadurch sei es aufgrund der verschlüsselten Datenpakete zwar nicht möglich zu sehen, was Nutzer verschickten, dass sie überhaupt kommunizierten, sei aber sichtbar.</p>
<div class="incremental docutils container">
<p>[...] ist dafür allerdings eine teils jahrelange Überwachung einzelner Tor-Nodes erforderlich. [...]</p>
</div>
<p class="attribution">—2024 - <a class="reference external" href="https://www.golem.de/news/deanonymisierung-von-nutzern-behoerden-unterwandern-tor-netzwerk-2409-189076.html">Behörden unterwandern Tor</a></p>
</blockquote>
</div><div class="ld-slide" id="tor-hintergrund">
<h2>Tor - Hintergrund</h2>
<ul class="incremental simple">
<li><p>Die grundlegende Idee ist es eine Trennung zwischen der Quelle und dem Ziel des Datenverkehrs zu schaffen.</p></li>
<li><p>Der Datenverkehr wird über <em>mehrere Knoten</em> (<em>Relays</em>) umgeleitet, die jeweils nur den vorherigen und den nächsten Knoten kennen. Der Weg den ein Datenpaket nimmt, wird als <em>Circuit</em> oder <em>Path</em> bezeichnet.</p></li>
<li><p>Der Pfad wird dazu vorher ausgewählt und der gesamte Datenverkehr entsprechend des Pfades verschlüsselt.</p></li>
<li><p>Tor bietet Anonymität auch für die Serverseite durch <em>Onion Services</em> (auch <em>Hidden Services</em>), die nur über eine von Tor vergebene Onion-Adresse erreicht werden können.</p></li>
</ul>
</div><div class="ld-slide" id="tor-bedrohungsmodel">
<h2>Tor - Bedrohungsmodel</h2>
<p>Tor bietet Schutz for folgenden Angreifern: Einem Angreifer dem es gelingt ...</p>
<ul class="simple">
<li><p>einen Teil der Kommunikation zu beobachten und</p></li>
<li><p>nur einen Teil der Tor-Knoten zu kontrollieren, indem er entweder einen eigenen Tor-Knoten (<em>Relay</em>; früher <em>Onion-Router</em>) betreibt oder einen bereits laufenden Knoten kompromittiert.</p></li>
</ul>
<aside class="admonition incremental margin-top-2em">
<p class="admonition-title">Warnung</p>
<p>Folgendes Szenario ist nicht abgedeckt: Ein Angreifer, der beide Enden der Kommunikation, den <span class="docutils literal">Entry Guard</span> und den <span class="docutils literal">Exit Node</span> überwachen kann.</p>
<p>Gegen solche Angreifer bietet Tor keine Anonymität.</p>
</aside>
</div><div class="vertical-title tiny ld-slide" id="tor-aufbau">
<h2>Tor - Aufbau</h2>
<div class="stack docutils container">
<div class="layer docutils container">
<img alt="Tor - Network" class="align-center" src="images/tor/base-network.svg" style="height: 1120px;" />
</div>
<div class="layer incremental overlay docutils container">
<img alt="Tor - Directory Authority" class="align-center" src="images/tor/directory-authority.svg" style="height: 1120px;" />
</div>
<div class="layer incremental overlay docutils container">
<img alt="TOR - Bridges and Bridge Nodes" class="align-center" src="images/tor/bridge-nodes.svg" style="height: 1120px;" />
</div>
<div class="layer incremental overlay docutils container">
<img alt="TOR - Onion Routing" class="align-center" src="images/tor/msg.svg" style="height: 1120px;" />
</div>
</div>
<div class="supplemental">
<p><a class="reference external" href="https://spec.torproject.org">Spezifikation</a></p>
<dl class="field-list">
<dt>Tor-Knoten<span class="colon">:</span></dt>
<dd><p>Rechner, die das Tor-Netzwerk bilden. Es gibt drei Arten von Tor-Knoten:</p>
<ul class="simple">
<li><p><em>Entry Nodes</em> (auch <em>Guard Nodes</em>): Diese Knoten sind die ersten Knoten in der Kette. Sie kennen die IP-Adresse des Clients. Sie können den Datenverkehr nicht entschlüsseln. Sie können aber sehen, dass der Datenverkehr von einem bestimmten Client kommt.</p></li>
<li><p><em>Middle Nodes</em>: Diese Knoten sind die mittleren Knoten in der Kette. Sie kennen weder die IP-Adresse des Clients noch die IP-Adresse des Ziels. Sie können den Datenverkehr nicht entschlüsseln. Sie können aber sehen, dass der Datenverkehr von einem bestimmten Entry Node kommt und an einen bestimmten Exit Node geht.</p></li>
<li><p><em>Exit Nodes</em>: Diese Knoten sind die letzten Knoten in der Kette. Sie kennen die IP-Adresse des Ziels. Sie können den Datenverkehr entschlüsseln. Sie können aber nicht sehen, von welchem Entry Node der Datenverkehr kommt.</p></li>
<li><p><em>Bridge Nodes</em>: Diese Knoten sind <em>Entry Nodes</em>, die nicht bzw. nicht vollständig öffentlich bekannt. Diese dienen ggf. dazu in Ländern, in denen Tor blockiert wird, den Zugang zu Tor zu ermöglichen. Sollte eine Verbindung zu einer Bridge nicht hergestellt werden können, aufgrund der Struktur der Nachrichten - zum Beispiel aufgrund der Verwendung von <em>Deep Packet Inspection</em> - dann ist es möglich diese mit Hilfe von <em>Pluggable Transports</em> zu verschleiern.</p></li>
</ul>
</dd>
<dt>Tor-Netzwerk<span class="colon">:</span></dt>
<dd><p>besteht aus mehreren tausend Tor-Knoten. Viele Knoten sind freiwillig betriebene Knoten.</p>
</dd>
<dt>Circuit/Path<span class="colon">:</span></dt>
<dd><p>Ein Circuit besteht typischerweise aus drei Knoten: <em>Entry Node</em>, <em>Middle Node</em> und <em>Exit Node</em>. Mehr Knoten sind möglich, haben jedoch nur einen geringen Einfluss auf die Sicherheit. Die Übertragung der Daten zwischen diesen Knoten erfolgt verschlüsselt. In welcher Form die Daten vom <em>Exit Node</em> zum Ziel übertragen werden, ist nicht Teil von Tor. Hat der Client eine verschlüsselte Verbindung initiiert (HTTPS), dann ist auch der Datenverkehr zwischen dem Exit Node und dem Ziel (noch) verschlüsselt ansonsten nicht und der Exit Node kann den Datenverkehr lesen.</p>
</dd>
<dt>Directory Authority<span class="colon">:</span></dt>
<dd><p>Knoten, die die Liste der aktiven Tor-Knoten verwalten. Diese Liste wird von allen Tor-Knoten regelmäßig in Hinblick auf das <em>Consensus Document</em> bzgl. der Knoten und deren Eigenschaften sowie Zustand abgefragt. Das <em>Consensus Document</em> wird von den <em>Directory Authorities</em> einmal pro Stunde gemeinsam erstellt und beschreibt die relevanten Eigenschaften jedes Tor-Knotens. Die Authentizität des <em>Consensus Document</em> wird durch die Signaturen der <em>Directory Authorities</em> nachgewiesen.</p>
<p>Es gibt (Stand 2023) 9 <em>Directory Authorities</em>.</p>
</dd>
<dt><span class="eng">Onion Routing</span><span class="colon">:</span></dt>
<dd><p>bedeutet, dass die Datenpakete mehrfach verschlüsselt werden. Jeder Tor-Knoten kann nur die Verschlüsselungsschicht entfernen, für die er den Schlüssel hat. Die Schlüssel werden mit dem Client während des Aufbaus des Circuits ausgehandelt. Es gibt für jeden Tor-Knoten einen eigenen Schlüssel und die Nachrichten werden in umgekehrter Reihenfolge der Tor-Knoten entlang des Pfades verschlüsselt. d. h. die Verschlüsselung für den Entry Node wird als letztes angewendet, da diese als erstes entfernt wird.</p>
</dd>
<dt>Cells<span class="colon">:</span></dt>
<dd><p>sind die Datenpakete, die zwischen den Tor-Knoten ausgetauscht werden. Cells sind immer 512Byte groß, um es unmöglich zu machen anhand der Größe der Datenpakete Rückschlüsse auf die Daten zu ziehen.</p>
</dd>
</dl>
<aside class="admonition admonition-hinweis">
<p class="admonition-title">Hinweis</p>
<p>In älteren Dokumenten wird der <em>Client</em> auch als <em>Onion Proxy (OP)</em> bezeichnet und die Tor-Knoten als <em>Onion Router (OR)</em>. Die Tor-Knoten (<span class="eng">Nodes</span>) werden auch als <em>Onion Relay</em> bezeichnet.</p>
</aside>
</div></div><div class="vertical-title tiny ld-slide" id="initiierung-eines-circuits-konzeptionell">
<h2>Initiierung eines Circuits (konzeptionell)</h2>
<img alt="Initiierung eines Circuits" class="align-center" src="images/tor/circuit-creation.svg" style="width: 1800px;" />
<div class="supplemental">
<p>Jeder Tor-Knoten verfügt über mehrere Keys. Für den Aufbau der Verbindung werden die <em>Onion Keys</em> verwendet. Mit Hilfe dieser werden die initialen Datenpakete mittels Public-Key Kryptografie verschlüsselt. Dies wird benötigt, um den AES Key - einer pro Knoten - der für den eigentlichen Versand benötigt wird, auszuhandeln und sicher zu übertragen.</p>
<p>In der Grafik wird der Aufbau eines Circuits mit zwei Tor-Knoten dargestellt. Der Client kennt die Onion Keys der Tor-Knoten (<span class="docutils literal">OR1</span> und <span class="docutils literal">OR2</span>). Die Onion Keys werden verwendet, um die <em>Create</em> Zelle zu verschlüsseln. Der Entry Node verwendet diese Onion Keys um die <em>Create</em> Zelle zu entschlüsseln und den gemeinsamen Schlüssel zu erzeugen. Um einen längeren Pfad aufzubauen, muss der Client ggf. einfach mehrere <span class="docutils literal">Extend</span> Nachrichten versenden. Erhält ein Knoten eine Relay Nachricht, dann kann der Knoten diese mit dem mit ihm ausgehandelten AES Key entschlüsseln und die Nachricht weiterleiten. Er kann den Inhalt (zum Beispiel eine weitere Relay Nachricht oder eine Extend Nachricht) nicht lesen.</p>
</div></div><div class="ld-slide" id="tor-relays-in-deutschland">
<h2>Tor Relays in Deutschland</h2>
<img alt="Tor Relays gelistet von Tor Metrics Jan. 2024" class="align-center" src="images/tor-metrics-relays.png" style="height: 1050px;" />
<div class="supplemental">
<p><strong>Flags</strong></p>
<p>Beschreibung jedes Tor-Knotens in Hinblick auf die Rolle des Knotens im Tor-Netzwerk. Zum Beispiel: kann der Knoten als Entry Node verwendet werden? Ist der Knoten schnell genug um als Exit Node verwendet zu werden?</p>
<p>Auszug wichtiger <em>Flags</em>:</p>
<dl class="field-list simple">
<dt>HSDir<span class="colon">:</span></dt>
<dd><p>Ein Router ist ein <em>v2 Hidden Service Directory</em></p>
</dd>
<dt>Running<span class="colon">:</span></dt>
<dd><p>Eine Authority konnte sich innerhalb der letzten 45 Minuten mit dem Router verbinden.</p>
</dd>
<dt>Stable<span class="colon">:</span></dt>
<dd><p>die gewichtet Zeit zwischen zwei Fehlern (<em>weighted MTBF</em>) ist größer als 7 Tage oder größer als der Median aller aktiven Router.</p>
</dd>
<dt>Valid<span class="colon">:</span></dt>
<dd><p>eine Version von Tor wird ausgeführt, die von den Authorities als aktuell angesehen wird und keine bekannten Schwachstellen aufweist.</p>
</dd>
</dl>
</div></div><div class="ld-slide" id="informationen-uber-tor-relays">
<h2>Informationen über Tor Relays</h2>
<img alt="Tor Relay Snorlax" class="picture align-right" src="images/tor-relay-snorlax.png" style="width: 50%;" />
<div class="smaller width-40 float-left docutils container">
<div class="stack">
<div class="layer incremental">
<ul class="simple">
<li><p>Viele Tor Relays werden von Freiwilligen betrieben</p></li>
<li><p>In Deutschland gibt es viele Relays</p></li>
<li><p>Hetzner ist diesbezüglich beliebt...</p></li>
</ul>
<div class="incremental docutils container">
<p>... und deswegen steht Hetzner auf der Liste der zu <a class="reference external" href="https://community.torproject.org/relay/community-resources/good-bad-isps/">vermeidenden Hoster</a> (Stand Jan. 2024).</p>
</div>
</div><div class="layer incremental">
<p>Ein Tor-Knoten wird as <span class="docutils literal">schnell</span> (<em>fast</em>) eingestuft, wenn er aktiv ist und eine Bandbreite von mindestens 100KB/s hat oder unter den Top 7/8tel aller bekannten aktiven Router ist.</p>
<p>Zum Vergleich: Die durchschnittliche Bandbreite in Deutschland ist 80Mbit/s (cf. <a class="reference external" href="https://www.statista.com/statistics/1338657/average-internet-speed-germany/">Statista</a>).</p>
<p>(Stand Jan. 2024)</p>
</div></div></div>
<div class="supplemental">
<p>Pfade, die über die ganze Welt gehen verhindern, dass der <span class="docutils literal">Entry-</span> und <span class="docutils literal"><span class="pre">Exit-node</span></span> beim gleichen Anbieter liegen.</p>
<img alt="Tor Circuit" class="picture align-center" src="images/tor-circuit.png" />
<p><strong>Jan. 2024 - zu vermeidende Hoster</strong>:</p>
<pre class="code text literal-block"><code>Frantech / Ponynet / BuyVM (AS53667)
OVH SAS / OVHcloud (AS16276)
Online S.A.S. / Scaleway (AS12876)
Hetzner Online GmbH (AS24940)
IONOS SE (AS8560)
netcup GmbH (AS197540)
Psychz Networks (AS40676)
1337 Services GmbH / RDP.sh (AS210558)</code></pre>
</div></div><div class="ld-slide" id="tor-exit-nodes">
<h2>Tor Exit Nodes</h2>
<p>Die Anzahl der Exit nodes ist deutlich kleiner (2. Jan. 2024 - 1314 Einträge) als die Anzahl der Knoten. Dies liegt daran, dass die technischen Anforderungen höher sind (z. B. stabile IP Adressen) und insbesondere daran, dass die Betreiber der <span class="docutils literal">Exit nodes</span> darauf vorbereitet sein müssen ggf. (zahlreiche) Anfragen von den Behörden zu bekommen. <a class="footnote-reference brackets" href="#footnote-1" id="footnote-reference-1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<img alt="Deutscher Tor Exit Node von der TU Berlin" class="picture align-center" src="images/tor-german-exit-node.png" />
<div class="supplemental">
<p>Reverse IP Lookup für 130.149.80.199 durchgeführt mit <a class="reference external" href="https://www.iplocation.net/ip-lookup">IP Location Service</a>.</p>
<p>Die (aktuell) geringe Anzahl an Exit Nodes ist ein (steigendes?) Problem, da es dadurch ggf. einfach(er) ist den Datenverkehr zu überwachen.</p>
</div><aside class="footnote-list brackets">
<aside class="footnote brackets" id="footnote-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#footnote-reference-1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://community.torproject.org/relay/community-resources/tor-exit-guidelines/">Tor Exit Node Guidelines</a></p>
</aside>
</aside>
</div><div class="ld-slide" id="tor-relays-exit-policy">
<h2>Tor Relays: <span class="docutils literal">Exit Policy</span></h2>
<p>Jeder <span class="docutils literal">Node</span> legt in seiner <span class="docutils literal">Exit Policy</span> genau fest welchen Datenverkehr weiterleiten möchte:</p>
<ul class="simple">
<li><p>Es gibt offene Exit Nodes, die alle Anfragen weiterleiten.</p></li>
<li><p>Es gibt Knoten, die die Daten nur an weitere Tor-Knoten weiterleiten.</p></li>
<li><p>Es gibt Knoten, die nur bestimmte Dienste (z. B. HTTPs) weiterleiten.</p></li>
<li><p>Es gibt „private Exit Nodes“, die nur zu einem bestimmten Netz Verbindungen aufbauen.</p></li>
</ul>
</div><div class="ld-slide" id="onion-services-hidden-services">
<h2>Onion Services/Hidden Services</h2>
<ul>
<li><p>Server, die Anfragen nur aus dem Tor-Netzwerk annehmen, werden als <em>Onion Services</em> (bzw. <em>Hidden Services</em>) bezeichnet.</p></li>
<li><p><span class="docutils literal">.onion</span> ist eine <em>Pseudo</em>-Top-Level-Domain, die für Onion Services verwendet wird.</p></li>
<li><p>Onion Services können nur über das Tor-Netzwerk erreicht werden.</p>
<p><span class="minor">Onion-Adresse der New-York-Times im Tor Netzwerk: https://nytimesn7cgmftshazwhfgzm37qxb44r64ytbb2dj3x62d2lljsciiyd.onion (Aus Deutschland faktisch nicht nutzbar.)</span></p>
</li>
</ul>
</div><div class="ld-slide" id="tor-browser">
<h2>Tor Browser</h2>
<p>Standardanwendung für den Zugriff auf das Tor-Netzwerk.</p>
<div class="stack docutils container">
<div class="layer clearfix docutils container">
<img alt="Tor Browser mit Ney-York-Times - 01.01.2024" class="align-left" src="images/tor-onion-service-nyt.png" style="height: 848px;" />
<div class="scriptsize docutils container">
<p>Ergebnis nach mehreren Minuten Wartezeit und zwei Versuchen überhaupt eine Verbindung aufzubauen.</p>
</div>
</div>
<div class="layer incremental docutils container">
<p><strong>Sicherheitseinstellungen des Tor Browsers</strong></p>
<dl class="field-list simple">
<dt>Standard<span class="colon">:</span></dt>
<dd><p>alle Browserfunktionen sind aktiviert.</p>
</dd>
<dt>Sicherer<span class="colon">:</span></dt>
<dd><p>JavaScript ist auf Nicht-HTTPS-Seiten deaktiviert. Wenn JavaScript aktiviert ist, dann sind die Leistungsoptimierungen deaktiviert. Audio und Video (HTML5-Medien) sowie WebGL werden nur nach Mausklick abgespielt.</p>
</dd>
<dt>Sicher<span class="colon">:</span></dt>
<dd><p>(zusätzlich) JavaScript ist immer deaktiviert. Einige Schriftarten, Symbole, mathematische Symbole und Bilder sind deaktiviert.</p>
</dd>
</dl>
</div>
</div>
<div class="supplemental">
<p>Das Tor-Netzwerk erlaubt ggf. das Setzen des <span class="docutils literal">Exit Nodes</span>, um zum Beispiel geografische Sperren zu umgehen. Entsprechende Dienstanbieter können dies jedoch leicht erkennen, da die Knoten des Tor Netzwerkes bekannt sind (<a class="reference external" href="https://check.torproject.org/torbulkexitlist">https://check.torproject.org/torbulkexitlist</a>) und verweigern dann den Zugriff.</p>
</div></div><div class="ld-slide" id="tor">
<h2>Tor</h2>
<ul class="positive-list incremental">
<li><p>Schützt vor der Analyse des Datenverkehrs.</p>
<p>Von <a class="reference external" href="https://securedrop.org/">SecureDrop</a> wird zum Beispiel für Whistleblower empfohlen sich mit dem SecureDrop Service über Tor zu verbinden und erst dann Dokumente hochzuladen.</p>
</li>
<li><p>Tor Browser schützt relativ effektiv vor Website-Fingerprinting.</p></li>
</ul>
<ul class="negative-list incremental simple">
<li><p>Teilweise sehr langsam (insbesondere bei Onion Services).</p></li>
<li><p>Monitoring des Netzwerks ist an den Grenzen möglich.</p></li>
<li><p>Ende-zu-Ende Korrelation von Datenverkehr ist möglich.</p></li>
<li><p>Die Anonymität hängt auch von der Anzahl der Nutzer ab.</p></li>
</ul>
<div class="supplemental">
<p><em>Website Fingerprinting</em></p>
<p>Website Fingerprinting ermöglicht es die besuchten Websites anhand des Datenverkehrs zu identifizieren. Dabei wird nicht der Inhalt der Datenpakete analysiert, sondern die statistischen Eigenschaften des Datenverkehrs. Wie groß sind die Datenpakete (d. h. die ausgelieferten Dateien)? Wie viele Datenpakete werden wann verschickt? Wie lange dauert es bis ein Datenpaket verschickt wird (d. h. Geschwindigkeit der Webseite)? Wie lange dauert es bis ein Datenpaket ankommt?</p>
<p><em>(Cross-)Browser Fingerprinting</em></p>
<p>Durch das Sammeln vieler (auch kleiner) Informationen über den/die Browser und das Betriebssystem kann ein für praktische Zwecke hinreichend eindeutiger Fingerabdruck erstellt werden. Dieser kann dann zur Identifikation des Nutzers verwendet werden.</p>
<p>Kleiner Auszug aus den möglichen Informationen:</p>
<ul class="simple">
<li><p>System Fonts</p></li>
<li><p>Werden Cookies unterstützt?</p></li>
<li><p>Betriebssystem</p></li>
<li><p>Betriebssystem Sprache</p></li>
<li><p>Keyboard layout</p></li>
<li><p>Art/Version des Browsers</p></li>
<li><p>verfügbare Sensoren: Beschleunigungssensor, Näherungssensor, Gyroskop</p></li>
<li><p>verfügbare Browser Plugins</p></li>
<li><p>HTTP-Header Eigenschaften</p></li>
<li><p>CPU Klasse</p></li>
<li><p>HTML 5 Canvas Fingerprinting</p></li>
<li><p>Unterstützung von Multitouch</p></li>
</ul>
<p><em>Monitoring des Netzwerks an den Grenzen</em></p>
<p>Hat in der Vergangenheit dazu geführt, dass Nutzer von Tor-Netzwerken identifiziert werden konnten.</p>
<p><em>Ende-zu-Ende Korrelation von Datenverkehr</em></p>
<p>Auch als <em>Traffic Confirmation</em> bekannt. Diese Art von Attacke ist möglich, wenn <em>Relays</em> am Anfang und am Ende der Verbindung kontrolliert werden. Die Angreifer können dann den Datenverkehr an beiden Enden beobachten und die Datenpakete korrelieren z. B. basierend auf statistischen Informationen über die Zeitpunkte und Volumen von Datenflüssen.</p>
</div></div><div class="integrated-exercise transition-move-left ld-slide" id="ubung-tor">
<h2>Übung: Tor</h2>
<ul>
<li><p></p>
<div class="ld-exercise" data-exercise-id="1" data-exercise-title="1 - Onion Services" id="ld-exercise-1">
<p class="rubric">Onion Services</p>
<p>Ist es für <em>Onion Services</em> (.onion) notwendig auf HTTPS zu setzen oder reicht HTTP für eine sichere Kommunikation? Ist die Verwendung von HTTPS ggf. sogar problematisch?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:/GZtJLFOFF4Ig3xWKAtDkDGnd6fXlrj9bwwAI8vCZKs=:PHKkDYiX6OqYDVbR:EIgf6DVhIQL7h0y9XJ9YW5v1lVdKG2s/Qi4EkZK58iJWUoKVw5bA4mWF8frfK4IYz2KE3Hrqr9Tcv5tgcu0wE9qxich2Z32kkY5XGco73k0xGybs6MnuIH0AkSU8MU2N1e/ch5eNTOC1XZBdHlooPsqI3M78KSKg37uT5X8fm4f6nyOAToLoblSh3JK64B6IGNHtrfEaz/VBSHKNGt7wSnozate+KD96x6rR4SuNPNKnd9PFiid9mgDNRLGrXre8lq/99T0vPZTPnmH62gwozfYryF2MtHe6cWTm38SsAhDQ3m3fXum+dIWtLw+nrzSBqkeICTnGN+1Yxhfs7/1M7QFtfS/MlyQvZiimDkU5LPIctuxMnKCLn9nzYz575F2sD3Fk/ZqiVZVl7tVg8tci0F7VhsSpFLqUlp65smVieZEqH127sheEn4CENkGFhljvbNd8kEjld1Hn1ZEh4LX7QaZbUL++S2AkGFHLE278l6+m0C43rCxgMZInc/HNljJpqCqdaXp7PoE+z19Q4xCEGvECJGzKasZfdTl97aEEbPyllVUNtQJFrDGRF/EIkRqKD49UT9RWZ3DajVVDbIxIU7JINU43x4D2839zABl99zzw552h8wQ+xH985oqPC9c+s1e+MIVVrz6hu+Qst61XBRKIMX/fKSNz25O0mvUvrIHu0huJq3ebcfDRInsCCyvLzMNnegIElz0xuQVoXGrSLl3NuNOVOebKF7MJhfFphtJrK6l5ps301QOvDxFYh+owZKxX8TWxlH3z/Cnx2pBlOj0CpGBC/hxiVdD2rL/AyPhq</div>
</div>
</li>
<li><p></p>
<div class="ld-exercise" data-exercise-id="2" data-exercise-title="2 - TOR und DNS Lookups" id="ld-exercise-2">
<p class="rubric">TOR und DNS Lookups</p>
<p>Warum führt der Tor Browser keine DNS Lookups durch? Warum ist dies wichtig und wer kann/muss es stattdessen machen?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:qSYUU8s8Qe0go9/QEgKYckAAmEkCe5NksK2/5knWwlg=:41PU1f/2eyXcoTDT:+TJIWBmFl0nowhXyJBWCOV+Joo3MhCoTQaLan4Vg1j9vc0pOGYs2d/HXU68H0Y2OkQuZT5UcoJPgNPSD/5uF8qvtyH0fPST3HFvizaIaESvDBg6ccW1gUXWeuSu7PEeW5Pgn4X1a9LC54Qm7gh1ZRnyPAJhmHzEMTuQNTqNEC2TXLn3nRvEBRixJGajE8BF0Ysjxb74SEATt8vtfbPK8g+BXNUMKotkUWlVg2zujrzERUGRZTYcuFvHa18befDsjn0iJ9nn7uhEbgdzsJ8rOIwHtdz9byaZyu9lXkglN3o74cWa7t7FzQz+rvlEFR+LrnSlb942+VHiLLiLoHFhaCVQCtj3H7tIPud9+5GJHtKHWIkyZZhf8Zu1rOztbIZeTniuRJzxcuNNSYauC2xqxM6gGywk8r+2XEe4oZ+ljPinBWzHH+vjy83S5e8LLKTWCiFMBRQq796IQVZw6CE8W7freLRNN9g==</div>
</div>
</li>
<li><p></p>
<div class="ld-exercise" data-exercise-id="3" data-exercise-title="3 - TOR abschalten?" id="ld-exercise-3">
<p class="rubric">TOR abschalten?</p>
<p>Warum hätte das Abschalten von TOR auf kriminelle Aktivitäten im Internet vermutlich nur einen geringeren Einfluss?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:QOcFu+WjNqwfT5Wdtnc/O/xrgayJjvbFvaq/zQp53XI=:hgtBZKhPHwY+/Ls1:qR7JpfB3hs527uDgYPfRzbNodjREmP3xuRCW6uN8AhkW/WSbMHaR1dxD0ahye1yD4G7qLFaO24Icknfqw3HwPCLBT2r6yfAhjox5tfrJ+h5hGInbljg1fBw1ZLfcIfeHQRKI0+lE/uZRnIOdIhLfyBMQmx4zcj8F/0eNb53JNK802yXPyps7kz9Htt33+5K38JyaDUsxDIeKQ2E35jMTGy1KalSbQJt1bjfD9cukmBhI8N8P9B/t6ce5nIa4/2GSJ5L4sK6Mw6FWiw==</div>
</div>
</li>
</ul>
</div><div class="integrated-exercise transition-move-left ld-slide" id="ubung-tor-1">
<h2>Übung: Tor</h2>
<ul>
<li><p></p>
<div class="ld-exercise" data-exercise-id="4" data-exercise-title="4 - Wie vergleichen sich Proxies und Tor-Knoten?" id="ld-exercise-4">
<p class="rubric">Wie vergleichen sich Proxies und Tor-Knoten?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:hrObQZUS/LpL9gLv9qrtaUZFjFiuHt4XMO+z51toCTQ=:CF2W1lD7zpkuu5VH:b6z6PO67hUhKkFfwvfBbeQc1Qr852WeN1ly6CpctfT4WUyr/XjzGv6p64YK0FOtyEGmM0ldr+QOZbXzuoHnAsXV5yvZ6YYZf5qkGt4BdgVzfyyjYx0Zfc71nchknH6rgh3u/v0+DGT656W6OYHmETIIg74vmWgVQ1AgqQ5NFWpk/78OKiFktqVH/RtwlM1EnBY2I/7NdcOrvz75OyOhJh+/VFqIcy6ojhENlR3uW8HP/pFngnArqgmMvohiQ/RZ6jI6Dttl+Dk9m0vtrEzYOTAPKVz5l+yJyXheGz4DXHclnwUFLPB3SkpJDbIKwdje9Dv+mdXeqM8N51CmNUHDaL6gy3DpAbwL+UucCiM5f8bk3KihY9kflDmyQC8NbPGtejEfnl4E5n5RudKzfR9w=</div>
</div>
</li>
<li><p></p>
<div class="ld-exercise" data-exercise-id="5" data-exercise-title="5 - Wie unterscheidet sich Tor von einem VPN?" id="ld-exercise-5">
<p class="rubric">Wie unterscheidet sich Tor von einem VPN?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:G9jj37q2LVZxK4sQy3qB9biZ93ZHPfpPy+WueoizLd4=:0uV0QtapIf/7/wpX:EuiWQ+jXEyd8mmlGI+LR2K4UnC7BGDJWOCdulcIfhtlQYsDSCYlGf2uOI+xsDX0Z3jdT7BYszKfQw7zrwajacrlktkq04iwpsUtvtvjZveLpz9nTCHGGYQ97hwFWvMuhgicmSdJmMS58xBKJqXxKmcHsyxIJDtCII1hXUGj2bl+ZjpY4sxdVDIz07a/YlHFVVCyZ8bIPlfgt2616Z6PTNwG2lmXV9j3sy7ReRkqLm6DZ72aAcPWSghW9usFBv8ncSkhNZsMY99NSIVDpTs9fptswrx54fz37wTm8EmQl/xjDRuCY2foko7ETQWWcrlfJDHD8y5AUPbxUb8jmN81ntQmB1nOKnrwq8bLJpPeYjLbkMtlwIaEAgqGLSQofjBD46mFySt0CniF3RHn4lXfrXbi+d3QU8Qy+Z6Z7hvHTrvJ3WXYH6AKBzIV8qheW5XHaoO6ki4BgdTABpELFmO6oF9Xk+Ai74Uj63K52Lqx+U8sj0hItRrkoo+QxAR1odf6dWX9W2l2WZ/6myVAmf7Wi3epy0XZNv5v0gkcdzvH1ZuKMekJpvdkaFL3kmJjy+WCLuvPbVc6Nm2SxTca0rU/rUpfy5L73X/yXseHt1eCSwIsgLrb6eNC+VBr0vQXdUz/M3y3yEXLxE0csTRW4k4V1UBw8+FIhBdifm7ExlATHMu1+W0jYNgRZ+nyAWcxF9tFV5WoOZQ6AxN2wGvyvOTrJlDhHF35A4wzS06nNk+PUVtX9OGwUWxIxgGpE8fza25XQFA==</div>
</div>
</li>
<li><p></p>
<div class="ld-exercise" data-exercise-id="6" data-exercise-title="6 - Tor über VPN oder VPN über TOR?" id="ld-exercise-6">
<p class="rubric">Tor über VPN oder VPN über TOR?</p>
<p>Macht es Sinn ein VPN über Tor oder anders herum zu betreiben?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:so5wpjbqpt2rtgGpEtnWG/iC+4fl3iGoJgOrrbOrDNI=:rnGNI9KV+XdXnW7q:3zOJpFyaoxgsN4ONk+5UmMY/x07c1HPXRAlTG8dQt4yPysHC59mv+Qsj59agupboIm85eHSuTV70v7X+oeiHsleqSXMcfzE3vSGy+5jZxnvL1TL+kHffbK4mX9Yl2bg15N8u0lce9TdFClSX8XPhVnLTqFfnPAJ3EFqi3fhCBX/wTU+OPXR6HM8GjtpaRcOmC7oaaZlBeVF0mdtCd82x6V8DVZ5vvs01iTGu7jbbYKgsvaGtl7yaMXG/vHGj/ZIl2CXRcsTVxt8LEZtactEHnG5miXZdQDsr4/bHbNt5NHRvfwxJwUdd7dt/+Pn88vuub5aMAutVnswe8pIW0SgKn/yaKmRS/MEocRPlEaZAZCAOZ3x7R+QmRNhEUUVRiyayx6QAQSgr8Pxw9wZePTbSNQqUia06I/VDlCmt+ZvT9h56dfDqBjTOwjRqLOOt8OvpJSub9unREi3o2vkXrt5vFMFGUBoU8N4Zng0OF3W+B2CnvwJNPZPPh2OXfjMHWG4lCPE0P3c/Fa0//TadIlpHeHQGkurHlGI94YPcc5a2Ha6GtGjypgGJrFozVKSnZOs33oprw6Bij+9nTyIvStaCjrpDjTp8m+3aRei0LE7KjE1qlwZn5PSJQy9wwYSJYWSYfS0j4d9F50subH292i2ioL0GX03t+2dF9RpJNdO11OGqyLNauVvlxZycZSMyns5DIQRUjjm6UUManbt8B2c9Jhs25DXeEogI/Y1k2CsmgiQC1yO272wrt5jWmffzZRYzVA94GZajUsDdDuD6gfFChtMkbbA7Xf6G/KW4tVCxripzy+e8ZHwO+sI++Q5QhZwFD+EVh03Bc7tI2Cr68YcV13SBbMtCZ+YkjVE5bQwDkenXgjJTGhn84amwB3xiadAWtif8tgNfVM0Y/q8uUyG1IH+Wo+sdntr9feMrp4l2ui3TNAfsSVOe8OXoKJ2iFOYjpXF2doXGl0ewDDyEU4TZz751WZnlaQMiSQ==</div>
</div>
</li>
<li><p></p>
<div class="ld-exercise" data-exercise-id="7" data-exercise-title="7 - Kontrolle über TOR Netzwerk?" id="ld-exercise-7">
<p class="rubric">Kontrolle über TOR Netzwerk?</p>
<p>Was passiert, wenn eine Angreifer in der Lage ist <span class="math">\(50\% + 1\)</span> der <span class="docutils literal">Directory Authority</span> Server zu kontrollieren?</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:O2PCrFFH+uuTMjeDywmkMWIJfAnXzs8A9Tz9syxnbq4=:4LRfGnrW/BmhOOxf:ARGkuk6ZgeCr7y0I1xO3LwsdwGjozoXSj6v51EPDkzrhKQWtTmOad/ActLYDIqIpTBi43EV8XlyC8vIg2FpsR2Sc3O8IgYVtoRvuAOW2vaXk8trfrd0klNRwk1bdRMCu/nWYNh6AEDV4HRBQRA7hlMZeknEeVTuXwRfDfqXLq8yvvKKqJqGZ9tiIT6jZnjZ8tEQFBLRA4KbxKosex/zYk3RuLuycihToHm+OBPlW9PNtEkW6YGAExrVvt7LUzhzSLGMTiZ2gvjvjCZc4ecSnVYVjTd/Ga07lvfsMVmt0Xwwp3lP0f/9mlBZ9RmtP4G/SrMXWKQQxjELDbmL8WVT3FfuFsvGKh3wQFB7nkwgl+PRW0FFiVq/Jp8BavLxLjsAFuRXQypMTA4+be7uIjp9jTEKvKD2fUrub7lYj</div>
</div>
</li>
</ul>
<!-- IDEAs/TODOs/FIXMEs
add a discussion about alle the keys used by tor and how they are initialized! -->
</div>
</template>
</body>
</html>
