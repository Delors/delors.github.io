<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta content="Michael Eichberg" name="author" />
<meta content="&quot;Python&quot;, &quot;Concurrency&quot;" name="keywords" />
<meta content="Nebenläufigkeit in Python" lang="de" name="description" xml:lang="de" />
<meta content="Concurrency in Python" lang="en" name="description" xml:lang="en" />
<meta content="lecture-ds-nebenlaeufigkeit-python" name="id" />
<meta content="last-viewed" name="first-slide" />
<meta name="version" content="LD2 RENAISSANCE" />
<meta name="exercises-passwords" content="MTAwMDAw:Um5QrQ/A+slSSF8sf/wrK2jiOzCdz5pw4z3jZsoBRbY=:Gv6ZRbJdbarQKEpF:9xU2vGpuv3VlhLLekO0kAn/e9CbQ3LALE1h24BQNKnD7Gm0pRcD1enT44WZj5QivqwdT99t514nLb0+tR7VKH/65HYYqEmQNdpXrBEnfdbOgBe1IentR4gMbnhInmZF9hmx8ewTDnG3qfK6n38A6i9VNcclba+XjbA+n5gFA0OZY0DgJ78GtIJWdhUUZzcRhlHNkryu9m74utLFYMu8HS57tFXIo9fprDHftpXSHO/9H57yKOFLrXmpt5ET96KUlSV9Wr9FJ4dbjn7hotuPk5izeVICnHpWeuaytYDTgOMX1z8hO6WnnKeN5P2NkG+07j4oURze2AIqALfR8yEHHlD6amPZxXkA1WzMcG1crbsRCouV+KFeApVIRn7rDxXAFOTYw0D/eyt3dMhgiLfzNsp1IANBtJKc02Xo8BGSopO1DGeMH2OYgJLxJGBTi+UrvOeSSkpXX2tVU+ARfkWBiItZA78R1T1lohbsdwP39CayCs+Qk6/YyG3JnW41N7UM6XM3T+IKgXxEOw5F1IshEBJrwSiJkKJDenh2HkUlZaQo/ZESePzCokCgZQSDVxJ5zvs7lX1fWQ+fd" />
<title>Nebenläufigkeit in Python</title>

    <script src="../LectureDoc2/renaissance/ld.js" type="module"></script>

    <link rel="stylesheet" href="../LectureDoc2/renaissance/ld.css" />

    
    <!-- As of 2024 it is not yet possible to use "layer" with linked stylesheets
         <link rel="stylesheet" href="../LectureDoc2/renaissance/css/themes/dhbw.css" layer="theme" />
 -->
         <style>@import url("../LectureDoc2/renaissance/css/themes/dhbw.css") layer(theme)</style>
    
</head>
<body>
<template>
<ld-topic id="nebenlaufigkeit-in-python">
<h1 class="title">Nebenläufigkeit in Python</h1>

<p class="rubric"><span class="eng">Concurrency</span> in Python</p>
<dl class="field-list simple">
<dt>Dozent<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/cv/folien.de.rst.html">Prof. Dr. Michael Eichberg</a></p>
</dd>
<dt>Kontakt<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="mailto:michael.eichberg&#64;dhbw.de">michael.eichberg&#64;dhbw.de</a></p>
</dd>
<dt>Version<span class="colon">:</span></dt>
<dd><p>1.0</p>
</dd>
</dl>
<div class="supplemental">
<dl class="field-list">
<dt>Folien<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://delors.github.io/ds-nebenlaeufigkeit-in-python/folien.de.rst.html">https://delors.github.io/ds-nebenlaeufigkeit-in-python/folien.de.rst.html</a></p>
<p><a class="reference external" href="https://delors.github.io/ds-nebenlaeufigkeit-in-python/folien.de.rst.html.pdf">https://delors.github.io/ds-nebenlaeufigkeit-in-python/folien.de.rst.html.pdf</a></p>
</dd>
<dt>Fehler melden<span class="colon">:</span></dt>
<dd><p><a class="reference external" href="https://github.com/Delors/delors.github.io/issues">https://github.com/Delors/delors.github.io/issues</a></p>
</dd>
</dl>
</div></ld-topic>
<ld-topic class="no-title center-child-elements transition-move-left" id="nebenlaufigkeit">
<h2>Nebenläufigkeit</h2>
<aside class="admonition background">
<p class="admonition-title">Hintergrund</p>
<p>Nebenläufigkeit ist notwendig, um:</p>
<ul class="simple">
<li><p>die Reaktionsfähigkeit von Anwendungen zu verbessern</p></li>
<li><p>eine bessere Auslastung von (Mehrkern-)prozessoren zu erreichen</p></li>
</ul>
<div class="incremental docutils container">
<p>Ein gutes Verständnis von nebenläufiger Programmierung ist für die Entwicklung von verteilten Anwendungen unerlässlich, da Server immer mehrere Anfragen gleichzeitig bearbeiten.</p>
</div>
</aside>
</ld-topic><ld-topic class="new-section transition-fade" id="nebenlaufigkeitsmodelle-in-python">
<h2>Nebenläufigkeitsmodelle in Python</h2>
</ld-topic><ld-topic id="prozesse-vs-threads-vs-coroutines-in-python">
<h2>Prozesse vs. Threads vs. Coroutines in Python</h2>
<ld-deck>
<ld-card>
<object aria-label="Multiprocessing in Python" class="align-center" data="images/threads/multiprocessing.svg" role="img" type="image/svg+xml">
</object></ld-card><ld-card class="overlay incremental">
<object aria-label="Klassisches Threading in Python" class="align-center" data="images/threads/threads_classical.svg" role="img" type="image/svg+xml">
</object></ld-card><ld-card class="overlay incremental">
<object aria-label="Coroutines in Python" class="align-center" data="images/threads/coroutines.svg" role="img" type="image/svg+xml">
</object></ld-card><ld-card class="overlay incremental">
<object aria-label="Neues Multithreading in Python" class="align-center" data="images/threads/threads_new.svg" role="img" type="image/svg+xml">
</object></ld-card></ld-deck><div class="supplemental">
<ul>
<li><p>Prozesse sind voneinander isoliert und können nur über explizite Mechanismen miteinander kommunizieren (z. B. <code>Pipe</code>s und <code>Queue</code>s); Prozesse teilen sich <em>nicht</em> denselben Adressraum.</p></li>
<li><p>Alle Threads eines Prozesses teilen sich denselben Adressraum. Python Threads sind vom Betriebssystem unterstützte Threads, die direkt vom Betriebssystem verwaltet werden. Python (d. h. der Standardinterpreter CPython bis (mind.) einschließlich Version 3.12) führt aber immer nur einen Thread aus aufgrund des <em>Global Interpreter Lock</em>s (GIL).</p>
<p>Der GIL existiert(e) insbesondere, da dadurch die Implementierung von Python einfacher wurde (z. B. kann problemlos <em>Reference Counting</em> verwendet werden und Probleme mit externen Bibliotheken sind auch minimiert.)</p>
<p>Andere Python-Implementierungen (wie Jython und IronPython) haben keinen GIL und können daher mehrere Threads (echt) parallel ausführen.</p>
</li>
<li><p><em>Coroutines</em> (auch <em>Fibres</em>) nutzen immer kooperatives Multitasking. D. h. ein Fibre gibt die Kontrolle an eine andere Fibre explizit ab. (Früher wurden <em>Fibres</em> auch als <em>Green Threads</em> bezeichnet.) Diese sind für das Betriebssystem unsichtbar.</p>
<p><em>Coroutines</em> erfordern explizite Unterstützung in den Bibliotheken. Alle auf Koroutinen basierenden Tasks werden in von der Event-Loop verwaltet und von einem einzigen Thread ausgeführt.</p>
</li>
</ul>
</div></ld-topic><ld-topic id="nebenlaufigkeit-in-python-1">
<h2>Nebenläufigkeit in Python</h2>
<ld-deck>
<ld-card>
<object aria-label="threading.Thread" class="align-center" data="images/threads/python-threads.svg" role="img" type="image/svg+xml">
</object></ld-card><ld-card class="overlay center-child-elements incremental">
<div class="border-rounded dhbw-light-gray-background opacity-90 padding-1em text-align-center docutils container">
<p>Die <span class="docutils literal">Process</span> API bietet eine vergleichbare Schnittstelle.</p>
</div>
</ld-card></ld-deck><div class="supplemental">
<ul>
<li><p>Threads werden in Python über die vordefinierte Klasse <span class="docutils literal">threading.Thread</span> bereitgestellt.</p></li>
<li><p>Alternativ kann ein <em>Callable</em> an ein Thread-Objekt übergeben werden.</p></li>
<li><p>Threads beginnen ihre Ausführung erst, wenn die <span class="docutils literal">start</span>-Methode in der Thread-Klasse aufgerufen wird. Die <span class="docutils literal">Thread.start</span>-Methode ruft die <span class="docutils literal">run</span>-Methode auf. Ein direkter Aufruf der <span class="docutils literal">run</span>-Methode führt nicht zu einer nebenläufigen Ausführung.</p></li>
<li><p>Der aktuelle Thread kann mittels der statischen Methode <span class="docutils literal">Thread.currentThread()</span> ermittelt werden.</p></li>
<li><p>Ein Thread wird beendet, wenn die Ausführung seiner <span class="docutils literal">run</span>-Methode entweder normal oder als Ergebnis einer unbehandelten Ausnahme endet.</p></li>
<li><p>Python unterscheidet <em>User</em>-Threads und <em>Daemon</em>-Threads.</p>
<p><em>Daemon-Threads</em> sind Threads, die allgemeine Dienste bereitstellen und normalerweise nie beendet werden. Jeder Thread, der eine Endlosschleife ausführt sollte als Daemon-Thread gekennzeichnet werden bei Erzeugung.</p>
<p>Wenn alle Benutzer-Threads beendet sind, werden die Daemon-Threads automatisch beendet, und das Hauptprogramm endet.</p>
<p>Der Thread kann beim Erzeugen als Daemon-Thread gekennzeichnet werden, indem der Parameter <span class="docutils literal">daemon</span> auf <span class="docutils literal">True</span> gesetzt wird.</p>
</li>
</ul>
</div></ld-topic><ld-topic id="inter-thread-process-koordination">
<h2>Inter-<span class="docutils literal">Thread</span>/<span class="docutils literal">Process</span>- Koordination</h2>
<ul class="simple">
<li><p>Ein <span class="docutils literal">Thread</span>/<span class="docutils literal">Process</span> kann (mit oder ohne Zeitüberschreitung) auf die Beendigung eines anderen <span class="docutils literal">Thread</span>s/<span class="docutils literal">Process</span>es (des Ziels) warten, indem er die <span class="docutils literal">join</span>-Methode für das <span class="docutils literal">Thread</span>/<span class="docutils literal">Process</span>-Objekt des Ziels aufruft.</p></li>
</ul>
<ul class="incremental simple">
<li><p>Mit der Methode <span class="docutils literal">is_alive</span> kann ein Thread feststellen, ob der Ziel-Thread beendet wurde.</p></li>
</ul>
</ld-topic><ld-topic id="python-thread-states">
<h2>Python Thread States</h2>
<object aria-label="Python Thread States" class="align-center" data="images/threads/python-thread-states.svg" role="img" type="image/svg+xml">
</object></ld-topic><ld-topic id="beispiel-multiprocessing-io-bound">
<h2>Beispiel: Multiprocessing - „IO-Bound“</h2>
<ld-grid class="default-layout">
<ld-cell class="width-60" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">multiprocessing</span> \
</code><small class="ln"> 3 </small><code data-lineno=" 3 ">    <span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">Process</span><span class="operator">,</span><span class="whitespace"> </span><span class="name namespace">current_process</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">busy_sleep</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">10</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span><span class="name builtin">print</span><span class="punctuation">(</span><span class="name">current_process</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string single">'__main__'</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span>    <span class="name">p1</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">busy_sleep</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>    <span class="name">p2</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">busy_sleep</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="incremental" style="align-self:auto;">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span><span class="name builtin">time</span><span class="whitespace"> </span>./processes_sleep.py<span class="whitespace">
</span>MainProcess<span class="whitespace">
</span>Process-2<span class="whitespace">
</span>Process-1<span class="whitespace">
</span>./processes_sleep.py<span class="whitespace">
  </span><span class="literal number">0</span>.07s<span class="whitespace"> </span>user<span class="whitespace">
  </span><span class="literal number">0</span>.02s<span class="whitespace"> </span>system<span class="whitespace">
  </span><span class="literal number">0</span>%<span class="whitespace"> </span>cpu<span class="whitespace">
  </span><span class="literal number">10</span>.070<span class="whitespace"> </span>total</code></pre>
</ld-cell></ld-grid></ld-topic><ld-topic id="beispiel-multiprocessing-cpu-bound">
<h2>Beispiel: Multiprocessing - CPU-Bound</h2>
<ld-grid class="default-layout">
<ld-cell class="width-60" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">multiprocessing</span> \
</code><small class="ln"> 3 </small><code data-lineno=" 3 ">  <span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">Process</span><span class="operator">,</span><span class="whitespace"> </span><span class="name namespace">current_process</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">computation</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name">j</span> <span class="operator">=</span> <span class="literal number integer">1</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span>    <span class="keyword">for</span> <span class="name">i</span> <span class="operator word">in</span> <span class="name builtin">range</span><span class="punctuation">(</span><span class="literal number integer">100</span><span class="operator">*</span><span class="literal number integer">1000</span><span class="operator">*</span><span class="literal number integer">1000</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span>        <span class="name">j</span> <span class="operator">+=</span> <span class="punctuation">(</span><span class="name">i</span><span class="operator">/</span><span class="name">j</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>    <span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Done:&quot;</span><span class="operator">+</span><span class="name builtin">str</span><span class="punctuation">(</span><span class="name">j</span><span class="punctuation">))</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span><span class="name builtin">print</span><span class="punctuation">(</span><span class="name">current_process</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string single">'__main__'</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="name">p1</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">computation</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>    <span class="name">p2</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">computation</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">17 </small><code data-lineno="17 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">18 </small><code data-lineno="18 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">19 </small><code data-lineno="19 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell style="align-self:auto;">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span><span class="name builtin">time</span><span class="whitespace"> </span>./processes_computation.py<span class="whitespace">
</span>MainProcess<span class="whitespace">
</span>Process-1<span class="whitespace">
</span>Process-2<span class="whitespace">
</span>Done:100000000.0<span class="whitespace">
</span>Done:100000000.0<span class="whitespace">
</span>./processes_computation.py<span class="whitespace">
  </span><span class="literal number">5</span>.60s<span class="whitespace"> </span>user<span class="whitespace">
  </span><span class="literal number">0</span>.02s<span class="whitespace"> </span>system<span class="whitespace">
  </span><span class="literal number">194</span>%<span class="whitespace"> </span>cpu<span class="whitespace">
  </span><span class="literal number">2</span>.899<span class="whitespace"> </span>total</code></pre>
</ld-cell></ld-grid><div class="supplemental">
<p class="rubric">Hinweise</p>
<p>Je nach Betriebssystem werden die Kindprozesse ggf. anders ausgeführt (<span class="docutils literal">fork</span> oder <span class="docutils literal">spawn</span>). Linux/Posix bietet die beste Unterstützung gefolgt von MacOS und Windows.</p>
</div></ld-topic><ld-topic id="beispiel-threading-io-bound">
<h2>Beispiel: Threading - „IO-Bound“</h2>
<ld-grid class="default-layout">
<ld-cell class="width-60" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Thread</span><span class="punctuation">,</span> <span class="name">current_thread</span><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">busy_sleep</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span>    <span class="comment single"># ts_print(current_thread().name)</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">10</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string single">'__main__'</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>    <span class="name">t1</span> <span class="operator">=</span> <span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">busy_sleep</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>    <span class="name">t2</span> <span class="operator">=</span> <span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">busy_sleep</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span>    <span class="name">t1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>    <span class="name">t2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>    <span class="name">t1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="name">t2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="incremental" style="align-self:auto;">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span><span class="name builtin">time</span><span class="whitespace"> </span>./threads_sleep.py<span class="whitespace">
  </span><span class="literal number">0</span>.02s<span class="whitespace"> </span>user<span class="whitespace">
  </span><span class="literal number">0</span>.01s<span class="whitespace"> </span>system<span class="whitespace">
  </span><span class="literal number">0</span>%<span class="whitespace"> </span>cpu<span class="whitespace">
  </span><span class="literal number">10</span>.188<span class="whitespace"> </span>total</code></pre>
</ld-cell></ld-grid></ld-topic><ld-topic id="beispiel-threading-cpu-bound">
<h2>Beispiel: Threading - CPU-Bound</h2>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span> \
</code><small class="ln"> 3 </small><code data-lineno=" 3 ">    <span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">Thread</span><span class="operator">,</span><span class="whitespace"> </span><span class="name namespace">current_thread</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">computation</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name">ts_print</span><span class="punctuation">(</span><span class="name">current_thread</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span>    <span class="name">j</span> <span class="operator">=</span> <span class="literal number integer">1</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span>    <span class="keyword">for</span> <span class="name">i</span> <span class="operator word">in</span> <span class="name builtin">range</span><span class="punctuation">(</span><span class="literal number integer">100</span><span class="operator">*</span><span class="literal number integer">1000</span><span class="operator">*</span><span class="literal number integer">1000</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>        <span class="name">j</span> <span class="operator">+=</span> <span class="punctuation">(</span><span class="name">i</span><span class="operator">/</span><span class="name">j</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>    <span class="name">ts_print</span><span class="punctuation">(</span><span class="literal string double">&quot;Done:&quot;</span><span class="operator">+</span><span class="name builtin">str</span><span class="punctuation">(</span><span class="name">j</span><span class="punctuation">))</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string single">'__main__'</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>    <span class="name">t1</span> <span class="operator">=</span> <span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">computation</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="name">t2</span> <span class="operator">=</span> <span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">computation</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>    <span class="name">t1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>    <span class="name">t2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">17 </small><code data-lineno="17 "><span class="whitespace"></span>    <span class="name">t1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">18 </small><code data-lineno="18 "><span class="whitespace"></span>    <span class="name">t2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span><span class="name builtin">time</span><span class="whitespace"> </span>./threads_computation.py<span class="whitespace"> </span><span class="literal number">16</span>:10:15<span class="whitespace">
</span>Thread-1<span class="whitespace"> </span><span class="operator">(</span>computation<span class="operator">)</span><span class="whitespace">
</span>Thread-2<span class="whitespace"> </span><span class="operator">(</span>computation<span class="operator">)</span><span class="whitespace">
</span>Done:100000000.0<span class="whitespace">
</span>Done:100000000.0<span class="whitespace">
</span>Done.<span class="whitespace">
</span>./threads_computation.py<span class="whitespace">
</span><span class="literal number">5</span>.27s<span class="whitespace"> </span>user<span class="whitespace">
</span><span class="literal number">0</span>.02s<span class="whitespace"> </span>system<span class="whitespace">
</span><span class="literal number">96</span>%<span class="whitespace"> </span>cpu<span class="whitespace">
</span><span class="literal number">5</span>.450<span class="whitespace"> </span>total</code></pre>
</ld-cell></ld-grid></ld-topic><ld-topic id="beispiel-coroutines">
<h2>Beispiel: Coroutines</h2>
<ld-grid class="default-layout">
<ld-cell class="width-60" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">asyncio</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace"></span><span class="keyword">async</span> <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">busy_sleep</span><span class="punctuation">(</span><span class="name builtin">id</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace"></span>    <span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string affix">f</span><span class="literal string double">&quot;Task </span><span class="literal string interpol">{</span><span class="name builtin">id</span><span class="literal string interpol">}</span><span class="literal string double"> started&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span>    <span class="keyword">await</span> <span class="name">asyncio</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">10</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string affix">f</span><span class="literal string double">&quot;Task </span><span class="literal string interpol">{</span><span class="name builtin">id</span><span class="literal string interpol">}</span><span class="literal string double"> completed&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span><span class="keyword">async</span> <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">main</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>    <span class="name">t1</span> <span class="operator">=</span> <span class="name">asyncio</span><span class="operator">.</span><span class="name">create_task</span><span class="punctuation">(</span><span class="name">busy_sleep</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">))</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>    <span class="name">t2</span> <span class="operator">=</span> <span class="name">asyncio</span><span class="operator">.</span><span class="name">create_task</span><span class="punctuation">(</span><span class="name">busy_sleep</span><span class="punctuation">(</span><span class="literal number integer">2</span><span class="punctuation">))</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>    <span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Both initialized.&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>    <span class="keyword">await</span> <span class="name">t1</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="keyword">await</span> <span class="name">t2</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>    <span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Done.&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace">
</span></code><small class="ln">17 </small><code data-lineno="17 "><span class="whitespace"></span><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string single">'__main__'</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">18 </small><code data-lineno="18 "><span class="whitespace"></span>    <span class="name">asyncio</span><span class="operator">.</span><span class="name">run</span><span class="punctuation">(</span><span class="name">main</span><span class="punctuation">())</span></code></pre>
</ld-cell><ld-cell class="width-40 incremental" style="align-self:auto;">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span><span class="name builtin">time</span><span class="whitespace"> </span>./async.py<span class="whitespace">
</span>Both<span class="whitespace"> </span>initialized.<span class="whitespace">
</span>Task<span class="whitespace"> </span><span class="literal number">1</span><span class="whitespace"> </span>started<span class="whitespace">
</span>Task<span class="whitespace"> </span><span class="literal number">2</span><span class="whitespace"> </span>started<span class="whitespace">
</span>Task<span class="whitespace"> </span><span class="literal number">1</span><span class="whitespace"> </span>completed<span class="whitespace">
</span>Task<span class="whitespace"> </span><span class="literal number">2</span><span class="whitespace"> </span>completed<span class="whitespace">
</span>Done.<span class="whitespace">
</span>./async.py<span class="whitespace">
  </span><span class="literal number">0</span>.05s<span class="whitespace"> </span>user<span class="whitespace">
  </span><span class="literal number">0</span>.01s<span class="whitespace"> </span>system<span class="whitespace">
  </span><span class="literal number">0</span>%<span class="whitespace"> </span>cpu<span class="whitespace">
  </span><span class="literal number">10</span>.063<span class="whitespace"> </span>total</code></pre>
</ld-cell></ld-grid><div class="supplemental">
<ul class="simple">
<li><p>Beide <span class="docutils literal">Task</span>s werden von dem gleichen Thread ausgeführt. Der Thread gibt „die Kontrolle an die Event-Loop ab“, wenn er auf eine entsprechende blockierende Methode trifft. Die Event-Loop kann dann die Kontrolle an einen anderen Task übergeben.</p></li>
<li><p>Warten (<span class="docutils literal">await</span>) ist nur möglich in asynchronen Methoden (<span class="docutils literal">async def</span>).</p></li>
<li><p><span class="docutils literal"><span class="pre">asyncio.run(&lt;fn&gt;)</span></span> startet die Event-Loop und führt die übergebene asynchrone Methode aus.</p></li>
<li><p>Die Verwendung von Koroutinen erfordert explizite Unterstützung in den Bibliotheken.</p></li>
</ul>
</div></ld-topic><ld-topic class="new-section transition-fade" id="sperren-und-bedingungsvariablen">
<h2>Sperren und Bedingungsvariablen</h2>
</ld-topic><ld-topic id="synchronisation-mit-hilfe-von-sperren">
<h2>Synchronisation mit Hilfe von <em>Sperren</em></h2>
<ul class="incremental list-with-explanations">
<li><p>Zugriff auf gemeinsam genutzte Ressourcen muss synchronisiert werden, um <span class="eng">Race Conditions</span> (<span class="ger">Wettlaufsituationen</span>) zu vermeiden.</p>
<p>(Unabhängig davon ob Threads echt parallel oder nur scheinbar parallel ausgeführt werden.)</p>
</li>
<li><p>Eine <em>Sperre</em> (<span class="docutils literal">Lock</span>) ist ein Objekt, das es erlaubt Code im wechselseitigen Ausschluss (engl. <em>mutual exclusion</em>) auszuführen.</p>
<p>D. h. ein Thread blockiert, wenn er versucht eine Sperre zu erwerben, die bereits von einem anderen Thread gehalten wird.</p>
</li>
<li><p>Der Code, der von einer Sperre geschützt wird, wird als kritischer Abschnitt bezeichnet.</p></li>
</ul>
<div class="supplemental">
<p>Eine <em>Race Condition</em> liegt vor, wenn der Zustand eines (Software-)Systems von der Abfolge oder dem Zeitpunkt anderer unkontrollierbarer Ereignisse abhängt. Eine Race Condition führt ggf. zu unerwarteten oder inkonsistenten Ergebnissen.</p>
</div></ld-topic><ld-topic id="verwendung-von-sperren">
<h2>Verwendung von <em>Sperren</em><a class="brackets" href="#footnote-1" id="footnote-reference-1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></h2>
<ul class="simple">
<li><p>Am Anfang des kritischen Abschnitts wird die Sperre angefordert mit <span class="docutils literal"><span class="pre">&lt;Lock&gt;.acquire()</span></span>.</p></li>
<li><p>Am Ende des kritischen Abschnitts wird die Sperre freigegeben mit <span class="docutils literal"><span class="pre">&lt;Lock&gt;.release()</span></span>.</p></li>
</ul>
<ul class="incremental">
<li><p>Um sicherzustellen, dass eine gehaltene Sperre immer aufgehoben wird, sollte <span class="docutils literal"><span class="pre">try-finally</span></span> oder ein passendes <span class="docutils literal">with</span>-Statement verwendet werden. (Lock implementiert z. B. das Protokoll von <em>Context-Managern</em>)</p>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python far-smaller literal-block"><code><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name">lock</span><span class="operator">.</span><span class="name">acquire</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="keyword">try</span><span class="punctuation">:</span><span class="whitespace">
</span>  <span class="comment single"># critical section</span><span class="whitespace">
</span><span class="keyword">finally</span><span class="punctuation">:</span><span class="whitespace">
</span>  <span class="name">lock</span><span class="operator">.</span><span class="name">release</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code python far-smaller literal-block"><code><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span><span class="whitespace">

</span><span class="keyword">with</span> <span class="name">lock</span><span class="punctuation">:</span><span class="whitespace">
</span>  <span class="comment single"># critical section</span></code></pre>
</ld-cell></ld-grid></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footnote-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#footnote-reference-1">1</a><span class="fn-bracket">]</span></span>
<p>Die APIs von <span class="docutils literal">threading</span> und <span class="docutils literal">multiprocessing</span> sind in weiten Teilen vergleichbar.</p>
</aside>
</aside>
</ld-topic><ld-topic id="beispiel-thread-safe-shared-counter">
<h2>Beispiel: Thread-safe Shared Counter</h2>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python smaller copy-to-clipboard literal-block"><code><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Thread</span><span class="punctuation">,</span><span class="name">Lock</span><span class="whitespace">

</span><span class="keyword">class</span><span class="whitespace"> </span><span class="name class">SharedCounter</span><span class="punctuation">:</span><span class="whitespace">

</span>    <span class="keyword">def</span><span class="whitespace"> </span><span class="name function magic">__init__</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">_value</span> <span class="operator">=</span> <span class="literal number integer">0</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span><span class="whitespace">

</span>    <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">value</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>        <span class="keyword">return</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">_value</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code python smaller copy-to-clipboard literal-block"><code><span class="comment single"># Thread-sichere Implementierungen</span><span class="whitespace">
</span><span class="comment single">#  von increment und decrement</span><span class="whitespace">


</span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">increment</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="operator">.</span><span class="name">acquire</span><span class="punctuation">()</span><span class="whitespace">
</span>    <span class="keyword">try</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">_value</span> <span class="operator">+=</span> <span class="literal number integer">1</span><span class="whitespace">
</span>    <span class="keyword">finally</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="operator">.</span><span class="name">release</span><span class="punctuation">()</span><span class="whitespace">

</span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">decrement</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">_value</span> <span class="operator">-=</span> <span class="literal number integer">1</span></code></pre>
</ld-cell></ld-grid><div class="supplemental">
<aside class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>Code, der eine konkrete Sperre erzeugt, anfordert und freigibt, sollte immer lokal sein; d.h. nicht über die Code-basis verteilt sein. Auch wenn es möglich ist eine Instanz eines Locks weiterzureichen und sperren in einer Methode anzufordern und in einer anderen Methode freizugeben, so ist dies eine schlechte Praxis, da es zu ((sehr,) sehr) schwer zu findenden Fehlern führen kann.</p>
</aside>
</div></ld-topic><ld-topic id="sperren-und-komplexe-ruckgabewerte">
<h2>Sperren und komplexe Rückgabewerte</h2>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python smaller copy-to-clipboard literal-block"><code><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Thread</span><span class="punctuation">,</span><span class="name">Lock</span><span class="whitespace">

</span><span class="keyword">class</span><span class="whitespace"> </span><span class="name class">SharedCoordinate</span><span class="punctuation">:</span><span class="whitespace">

</span>    <span class="keyword">def</span><span class="whitespace"> </span><span class="name function magic">__init__</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">x</span><span class="punctuation">,</span> <span class="name">y</span><span class="punctuation">):</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">x</span> <span class="operator">=</span> <span class="name">x</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">y</span> <span class="operator">=</span> <span class="name">y</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code python smaller copy-to-clipboard literal-block"><code><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">update</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">x</span><span class="punctuation">,</span> <span class="name">y</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="operator">.</span><span class="name">acquire</span><span class="punctuation">()</span><span class="whitespace">
</span>    <span class="keyword">try</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">x</span> <span class="operator">=</span> <span class="name">x</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">y</span> <span class="operator">=</span> <span class="name">y</span><span class="whitespace">
</span>    <span class="keyword">finally</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="operator">.</span><span class="name">release</span><span class="punctuation">()</span><span class="whitespace">

</span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">value</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="keyword">return</span> <span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">x</span><span class="punctuation">,</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">y</span><span class="punctuation">)</span></code></pre>
</ld-cell></ld-grid><div class="supplemental">
<p>Beide Methoden müssen synchronisiert werden, damit es nicht dazu kommen kann, dass man einen ungültigen Zustand beobachten kann. Ein ungültiger Zustand wäre ein paar Koordinaten, die nicht zusammengehören. Z. B. wenn der Wert x von einem Aufruf kommt (update(100,100)) und der Wert y von einem anderen (update(200,200)); d.h. der Wert, den <span class="docutils literal">value</span> zurückliefert: <span class="docutils literal">100, 200</span> wäre.</p>
</div></ld-topic><ld-topic class="new-subsection" id="bedingungsvariablen">
<h2>Bedingungsvariablen</h2>
</ld-topic><ld-topic id="bedingte-synchronisation">
<h2>Bedingte Synchronisation</h2>
<ul class="incremental">
<li><p>drückt eine Bedingung für die Reihenfolge der Ausführung von Operationen aus.</p></li>
<li><p>z. B. können Daten erst dann aus einem Puffer entfernt werden, wenn Daten in den Puffer eingegeben wurden.</p></li>
<li><p>Python unterstützt optionale Bedingungs-Variablen (Instanzen von <span class="docutils literal">Condition</span>), mit den klassischen Methoden <span class="docutils literal">wait</span> und <span class="docutils literal">notify</span> bzw. <span class="docutils literal">notify_all</span>.</p>
<p>Diese Methoden erlauben es auf bestimmte Bedingungen zu warten und andere Threads zu benachrichtigen, wenn sich die Bedingung geändert hat.</p>
</li>
</ul>
</ld-topic><ld-topic id="programmierung-mit-conditions">
<h2>Programmierung mit <span class="docutils literal">Condition</span>s</h2>
<ld-deck class="incremental footnotesize margin-top-1em">
<ld-card>
<ul class="simple">
<li><p>Die Methoden <span class="docutils literal">wait</span> und <span class="docutils literal">notify(_all)</span> können nur verwendet werden, wenn die Sperre gehalten wird; andernfalls wird eine <span class="docutils literal">RuntimeError</span> ausgelöst.</p></li>
</ul>
</ld-card><ld-card class="incremental">
<ul class="simple">
<li><p>Die <span class="docutils literal">wait</span>-Methode blockiert immer den aufrufenden Thread und gibt die mit dem Objekt verbundene Sperre frei.</p></li>
</ul>
</ld-card><ld-card class="incremental">
<ul>
<li><p>Die <span class="docutils literal">notify(n=1)</span>-Methode weckt (mind.) <em>n</em> wartende Threads auf. Welcher Thread aufgeweckt wird, ist nicht spezifiziert.</p>
<p><span class="docutils literal">notify</span> gibt die Sperre nicht frei; daher muss der aufgeweckte Thread warten, bis er die Sperre erhalten kann, bevor er fortfahren kann.</p>
</li>
<li><p>Um alle wartenden Threads aufzuwecken, muss die Methode <span class="docutils literal">notify_all</span> verwendet werden.</p>
<p>Warten die Threads aufgrund unterschiedlicher Bedingungen, so ist immer <span class="docutils literal">notify_all</span> zu verwenden.</p>
</li>
<li><p>Wenn kein Thread wartet, dann haben <span class="docutils literal">notify</span> und <span class="docutils literal">notify_all</span> keine Wirkung.</p></li>
</ul>
</ld-card><ld-card class="incremental">
<aside class="admonition warning">
<p class="admonition-title">Wichtig</p>
<p>Wenn ein Thread aufgeweckt wird, kann er nicht davon ausgehen, dass seine Bedingung erfüllt ist!</p>
<p>Die Bedingung ist immer in einer Schleife zu prüfen und der Thread muss ich ggf. wieder in den Wartezustand versetzen.</p>
</aside>
</ld-card></ld-deck></ld-topic><ld-topic id="beispiel-implementation-eines-boundedbuffer">
<h2>Beispiel: Implementation eines <em>BoundedBuffer</em></h2>
<ul>
<li><p>Ein <em>BoundedBuffer</em> hat (z. B.) traditionell zwei Bedingungsvariablen:</p>
<ul class="simple">
<li><p><em>not_full</em> und</p></li>
<li><p><em>not_empty</em>.</p></li>
</ul>
<p>In diesem Fall würde gelten, dass, wenn ein Thread auf eine Bedingung wartet, kein anderer Thread auf die andere Bedingung warten kann, da sich die Bedingungen gegenseitig ausschließen.</p>
</li>
</ul>
</ld-topic><ld-topic id="beispiel-synchronisation-mit-bedingungsvariablen">
<h2>Beispiel: Synchronisation mit Bedingungsvariablen</h2>
<ld-grid class="far-smaller default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><code><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span> \
  <span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">Condition</span><span class="operator">,</span><span class="whitespace"> </span><span class="name namespace">Lock</span><span class="whitespace">

</span><span class="keyword">class</span><span class="whitespace"> </span><span class="name class">BoundedBuffer</span><span class="punctuation">:</span><span class="whitespace">

</span>  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function magic">__init__</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">capacity</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">capacity</span> <span class="operator">=</span> <span class="name">capacity</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span> <span class="operator">=</span> <span class="punctuation">[]</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_empty</span> <span class="operator">=</span> <span class="name">Condition</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="punctuation">)</span><span class="whitespace">
</span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_full</span> <span class="operator">=</span> <span class="name">Condition</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="punctuation">)</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><code>  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">put</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">item</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_full</span><span class="punctuation">:</span><span class="whitespace">
</span>      <span class="keyword">while</span> <span class="name builtin">len</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="punctuation">)</span> <span class="operator">==</span> \
            <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">capacity</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_full</span><span class="operator">.</span><span class="name">wait</span><span class="punctuation">()</span><span class="whitespace">
</span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">item</span><span class="punctuation">)</span><span class="whitespace">
</span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_empty</span><span class="operator">.</span><span class="name">notify</span><span class="punctuation">()</span><span class="whitespace">

</span>  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">get</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_empty</span><span class="punctuation">:</span><span class="whitespace">
</span>      <span class="keyword">while</span> <span class="name builtin">len</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="punctuation">)</span> <span class="operator">==</span> <span class="literal number integer">0</span><span class="punctuation">:</span><span class="whitespace">
</span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_empty</span><span class="operator">.</span><span class="name">wait</span><span class="punctuation">()</span><span class="whitespace">
</span>      <span class="name">item</span> <span class="operator">=</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="operator">.</span><span class="name">pop</span><span class="punctuation">(</span><span class="literal number integer">0</span><span class="punctuation">)</span><span class="whitespace">
</span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_full</span><span class="operator">.</span><span class="name">notify</span><span class="punctuation">()</span><span class="whitespace">
</span>      <span class="keyword">return</span> <span class="name">item</span></code></pre>
</ld-cell></ld-grid></ld-topic><ld-topic class="smaller" id="beispiel-synchronisation-mit-nur-einer-bedingung">
<h2>Beispiel: Synchronisation mit nur einer Bedingung</h2>
<ld-deck>
<ld-card>
<div class="minor docutils container">
<p>Im Folgenden sehen wir eine Implementierung mit nur einer Bedingungsvariablen, um bestimmte Synchronisationsfehler demonstrieren zu können.</p>
</div>
</ld-card><ld-card class="incremental">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Thread</span><span class="punctuation">,</span> <span class="name">Lock</span><span class="punctuation">,</span> <span class="name">Condition</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace"></span><span class="keyword">class</span><span class="whitespace"> </span><span class="name class">BoundedBuffer</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span>  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function magic">__init__</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">capacity</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">capacity</span> <span class="operator">=</span> <span class="name">capacity</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span> <span class="operator">=</span> <span class="punctuation">[]</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span> <span class="operator">=</span> <span class="name">Lock</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>    <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span> <span class="operator">=</span> <span class="name">Condition</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">lock</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span><span class="operator">...</span></code></pre>
</ld-card><ld-card class="incremental">
<pre class="code python copy-to-clipboard literal-block"><small class="ln">11 </small><code data-lineno="11 ">  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">put</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">,</span> <span class="name">item</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>      <span class="keyword">while</span> <span class="name builtin">len</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="punctuation">)</span> <span class="operator">==</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">capacity</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="operator">.</span><span class="name">wait</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">item</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="operator">.</span><span class="name">notify_all</span><span class="punctuation">()</span> <span class="comment single"># notify_all() !</span></code></pre>
</ld-card><ld-card class="incremental">
<pre class="code python copy-to-clipboard literal-block"><small class="ln">19 </small><code data-lineno="19 ">  <span class="keyword">def</span><span class="whitespace"> </span><span class="name function">get</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln">20 </small><code data-lineno="20 "><span class="whitespace"></span>    <span class="keyword">with</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">21 </small><code data-lineno="21 "><span class="whitespace"></span>      <span class="keyword">while</span> <span class="name builtin">len</span><span class="punctuation">(</span><span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="punctuation">)</span> <span class="operator">==</span> <span class="literal number integer">0</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">22 </small><code data-lineno="22 "><span class="whitespace"></span>        <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="operator">.</span><span class="name">wait</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">23 </small><code data-lineno="23 "><span class="whitespace"></span>      <span class="name">item</span> <span class="operator">=</span> <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">buffer</span><span class="operator">.</span><span class="name">pop</span><span class="punctuation">(</span><span class="literal number integer">0</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">24 </small><code data-lineno="24 "><span class="whitespace"></span>      <span class="name builtin pseudo">self</span><span class="operator">.</span><span class="name">not_used</span><span class="operator">.</span><span class="name">notify_all</span><span class="punctuation">()</span> <span class="comment single"># notify_all() !</span><span class="whitespace">
</span></code><small class="ln">25 </small><code data-lineno="25 "><span class="whitespace"></span>      <span class="keyword">return</span> <span class="name">item</span></code></pre>
</ld-card><ld-card class="incremental">
<div class="text-align-center dhbw-red bolder docutils container">
<p>Fehlersituation, die bei der Verwendung von <span class="docutils literal">notify</span> (statt <span class="docutils literal">notify_all</span>) auftreten könnte.</p>
</div>
<pre class="code java copy-to-clipboard literal-block"><code><span class="name">bb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">BoundedBuffer</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">);</span><span class="whitespace">
</span><span class="name">p1</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">lambda</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="name">bb</span><span class="punctuation">.</span><span class="name attribute">put</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">));</span><span class="whitespace"> </span><span class="name">p2</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">lambda</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="name">bb</span><span class="punctuation">.</span><span class="name attribute">put</span><span class="punctuation">(</span><span class="literal number integer">2</span><span class="punctuation">))</span><span class="whitespace">
</span><span class="name">c1</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">lambda</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="name">bb</span><span class="punctuation">.</span><span class="name attribute">get</span><span class="punctuation">());</span><span class="whitespace"> </span><span class="name">c2</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">lambda</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="name">bb</span><span class="punctuation">.</span><span class="name attribute">get</span><span class="punctuation">())</span><span class="whitespace">
</span><span class="name">c1</span><span class="punctuation">.</span><span class="name attribute">start</span><span class="punctuation">();</span><span class="whitespace"> </span><span class="name">c2</span><span class="punctuation">.</span><span class="name attribute">start</span><span class="punctuation">();</span><span class="whitespace"> </span><span class="name">p1</span><span class="punctuation">.</span><span class="name attribute">start</span><span class="punctuation">();</span><span class="whitespace"> </span><span class="name">p2</span><span class="punctuation">.</span><span class="name attribute">start</span><span class="punctuation">();</span></code></pre>
<table class="incremental no-table-borders">
<thead>
<tr><th class="head"></th>
<th class="head"><p>Aktionen</p></th>
<th class="head"><p>(Änderung des) Zustand(s) des Buffers</p></th>
<th class="head"><p>Auf die Sperre (<em>Lock</em>) wartend</p></th>
<th class="head"><p>An der Bedingung wartend</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>1</p></td>
<td><p><strong>c1:bb.get()</strong>, <span class="raw-html"><br></span> c2:bb.get(), p1:bb.put(), p2:bb.put()</p></td>
<td><p>empty</p></td>
<td><p>{c2,p1,p2}</p></td>
<td><p>{c1}</p></td>
</tr>
<tr><td><p>2</p></td>
<td><p><strong>c2:bb.get()</strong></p></td>
<td><p>empty</p></td>
<td><p>{p1,p2}</p></td>
<td><p>{c1,c2}</p></td>
</tr>
<tr><td><p>3</p></td>
<td><p><strong>p1:bb.put(1)</strong></p></td>
<td><p>empty → not empty</p></td>
<td><p>{p2,c1}</p></td>
<td><p>{c2}</p></td>
</tr>
<tr><td><p>4</p></td>
<td><p><strong>p2:bb.put(2)</strong></p></td>
<td><p>not empty</p></td>
<td><p>{c1}</p></td>
<td><p>{c2,p2}</p></td>
</tr>
<tr><td><p>5</p></td>
<td><p><strong>c1:bb.get()</strong></p></td>
<td><p>not empty → empty</p></td>
<td><p>{c2}</p></td>
<td><p>{p2}</p></td>
</tr>
<tr><td><p>6</p></td>
<td><p><strong>c2:bb.get()</strong></p></td>
<td><p>empty</p></td>
<td><p>∅</p></td>
<td><p>{c2,p2}</p></td>
</tr>
</tbody>
</table>
</ld-card></ld-deck><div class="supplemental">
<p>In Schritt 5 wurde (z. B.)- aufgrund des Aufrufs von <span class="docutils literal">notify</span> durch <span class="docutils literal">c1</span> - der Thread <span class="docutils literal">c2</span> aufgeweckt - anstatt des Threads <span class="docutils literal">p2</span>. Der aufgeweckte Thread <span class="docutils literal">c2</span> prüft die Bedingung (Schritt 6) und stellt fest, dass der Puffer leer ist. Er geht wieder in den Wartezustand. Jetzt warten sowohl ein Thread, der ein Wert schreiben möchte, als auch ein Thread, der einen Wert lesen möchte.</p>
</div></ld-topic><ld-topic id="best-practices-in-hinblick-auf-synchronisation">
<h2><em>Best Practices</em> in Hinblick auf Synchronisation</h2>
<ul class="impressive incremental">
<li><p>Code, der eine Sperre hält (<span class="eng">Lock</span>) sollte so kurz (zeitlich) wie möglich gehalten werden.</p>
<p>(D. h. der Code zwischen <span class="docutils literal">Lock.acquire()</span> und <span class="docutils literal">Lock.release()</span>)</p>
</li>
<li><p>Verschachtelte Anforderungen von Sperren sollten vermieden werden, da die äußere Sperre nicht freigegeben wird, wenn man an der Inneren wartet. Dies kann leicht zum Auftreten eines Deadlocks führen.</p></li>
</ul>
</ld-topic><ld-topic class="no-title center-content" id="ressourcen-immer-in-der-gleichen-reihenfolge-sperren">
<h2>Ressourcen immer in der gleichen Reihenfolge sperren</h2>
<ul class="impressive simple">
<li><p>Wenn zwei (oder mehr) Threads bzw. Prozesse auf die gleichen Ressourcen in unterschiedlicher Reihenfolge zugreifen und entsprechende Sperren halten bzw. anfordern, kann es zu einem Deadlock kommen.</p></li>
</ul>
<aside class="admonition warning incremental">
<p class="admonition-title">Zu Beachten</p>
<p><strong>Ressourcen immer in der gleichen Reihenfolge sperren</strong>, um Deadlocks zu vermeiden.</p>
</aside>
</ld-topic><ld-topic class="no-title center-child-elements transition-scale" id="alternative-synchronisationsmechanismen">
<h2>Alternative Synchronisationsmechanismen</h2>
<div class="rounded-corners yellow-background padding-1em box-shadow docutils container">
<p><em>Sperren</em> (d. h. <span class="docutils literal">Lock</span>s) in Verbindung mit Bedigungsvariablen sind nur eine Möglichkeit, um die Synchronisation von Threads zu ermöglichen. Es ist jedoch ein sehr häufiges Modell. (Alternativen sind zum Beispiel: <em>Semaphoren</em>, <em>Nachrichtenübermittlung</em>)</p>
</div>
</ld-topic><ld-topic class="new-section" id="ausgewahlte-aspekte-der-nebenlaufigkeit">
<h2>Ausgewählte Aspekte der Nebenläufigkeit</h2>
</ld-topic><ld-topic id="thread-lokaler-speicher">
<h2>Thread-lokaler Speicher</h2>
<p>Thread-lokaler Speicher (<span class="docutils literal">threading.local()</span>) ermöglicht es, dass jeder Thread eine lokale Kopie einer bestimmten Variable hat</p>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><code><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace">

</span><span class="name">stop</span> <span class="operator">=</span> <span class="keyword constant">False</span> <span class="comment single"># shared global variable</span><span class="whitespace">
</span><span class="name">local_data</span> <span class="operator">=</span> <span class="name">threading</span><span class="operator">.</span><span class="name">local</span><span class="punctuation">()</span><span class="whitespace">

</span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">f</span><span class="punctuation">(</span><span class="name">v</span><span class="punctuation">):</span><span class="whitespace">
</span>    <span class="name builtin">setattr</span><span class="punctuation">(</span><span class="name">local_data</span><span class="punctuation">,</span> <span class="literal string double">&quot;value&quot;</span><span class="punctuation">,</span> <span class="literal number integer">0</span><span class="punctuation">)</span><span class="whitespace">
</span>    <span class="keyword">while</span><span class="punctuation">(</span><span class="operator word">not</span> <span class="name">stop</span><span class="punctuation">):</span><span class="whitespace">
</span>        <span class="name builtin">print</span><span class="punctuation">(</span><span class="name">local_data</span><span class="operator">.</span><span class="name">value</span><span class="punctuation">)</span><span class="whitespace">
</span>        <span class="name">local_data</span><span class="operator">.</span><span class="name">value</span> <span class="operator">+=</span> <span class="name">v</span><span class="whitespace">
</span>        <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">)</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<pre class="code python copy-to-clipboard literal-block"><code><span class="comment single"># &quot;main&quot; thread</span><span class="whitespace">
</span><span class="name">t1</span> <span class="operator">=</span> <span class="name">threading</span><span class="operator">.</span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">f</span><span class="punctuation">,</span> <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">,))</span><span class="whitespace">
</span><span class="name">t2</span> <span class="operator">=</span> <span class="name">threading</span><span class="operator">.</span><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">f</span><span class="punctuation">,</span> <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="operator">-</span><span class="literal number integer">1</span><span class="punctuation">,))</span><span class="whitespace">
</span><span class="name">t1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name">t2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">3</span><span class="punctuation">);</span><span class="whitespace">
</span><span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Attributes of local_data: &quot;</span> <span class="operator">+</span> \
      <span class="name builtin">str</span><span class="punctuation">(</span><span class="name">local_data</span><span class="operator">.</span><span class="name variable magic">__dict__</span><span class="operator">.</span><span class="name">keys</span><span class="punctuation">()))</span><span class="whitespace">
</span><span class="name">stop</span> <span class="operator">=</span> <span class="keyword constant">True</span><span class="whitespace">
</span><span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Stop set to True.&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span><span class="name">t1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name">t2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell></ld-grid><div class="supplemental">
<pre class="code bash literal-block"><code>$<span class="whitespace"> </span>./ThreadLocal.py<span class="whitespace">
</span><span class="literal number">0</span><span class="whitespace">
</span><span class="literal number">0</span><span class="whitespace">
</span>-1<span class="whitespace">
</span><span class="literal number">1</span><span class="whitespace">
</span>-2<span class="whitespace">
</span><span class="literal number">2</span><span class="whitespace">
</span>Attributes<span class="whitespace"> </span>of<span class="whitespace"> </span>local_data:<span class="whitespace"> </span><span class="operator">[]</span><span class="whitespace">
</span>Stop<span class="whitespace"> </span><span class="name builtin">set</span><span class="whitespace"> </span>to<span class="whitespace"> </span>True.<span class="whitespace"> </span>Waiting<span class="whitespace"> </span><span class="keyword">for</span><span class="whitespace"> </span>threads<span class="whitespace"> </span>to<span class="whitespace"> </span>finish.</code></pre>
</div></ld-topic><ld-topic id="reentrant-locks">
<h2>Reentrant Locks</h2>
<ul class="simple">
<li><p><em>Reentrant Lock</em>s (<span class="docutils literal">RLock</span>) sind Sperren, die von demselben Thread mehrmals erworben werden können.</p></li>
<li><p>Implementierungen: <span class="docutils literal">threading.RLock</span> oder <span class="docutils literal">multiprocessing.RLock</span>.</p></li>
</ul>
</ld-topic><ld-topic id="thread-processpools">
<h2>Thread-/ProcessPools</h2>
<ul>
<li><p><em>ThreadPools</em> und <em>ProcessPools</em> bieten eine höherwertige Abstraktion, um eine große Anzahl von Aufgaben nebenläufig zu verarbeiten.</p></li>
<li><p>Beide erben von <span class="docutils literal">concurrent.futures.Executor</span>; zentrale Methoden:</p>
<ul>
<li><p><span class="docutils literal">submit(fn, *args, **kwargs)</span>: Fügt eine Aufgabe hinzu und gibt ein <span class="docutils literal">Future</span>-Objekt zurück.</p>
<p>Auf Futures sind die Hauptfunktionen:</p>
<ul class="simple">
<li><p><span class="docutils literal">done()</span>: Gibt zurück, ob die Aufgabe abgeschlossen ist.</p></li>
<li><p><span class="docutils literal">result(timeout=None)</span>: Gibt das Ergebnis zurück, wenn die Aufgabe abgeschlossen ist; blockiert ggf..</p></li>
</ul>
</li>
<li><p><span class="docutils literal">map(func, *iterables, timeout=None, chunksize=1)</span>: Führt die Funktion für jedes Element in <span class="docutils literal">iterables</span> aus und gibt die Ergebnisse in der Reihenfolge zurück, in der sie abgeschlossen wurden.</p></li>
</ul>
</li>
</ul>
</ld-topic><ld-topic class="new-subsection" id="nachrichtenaustausch">
<h2>Nachrichtenaustausch</h2>
</ld-topic><ld-topic id="motivation-nachrichtenaustausch">
<h2>Motivation: Nachrichtenaustausch</h2>
<ul class="incremental-list simple">
<li><p>Locks haben das große Potential eigentlich nebenläufige Programme effektiv zu serialisieren (und zu verlangsamen).</p></li>
<li><p>Prozesse nutzen keinen gemeinsamen Adressraum.</p></li>
<li><p>Eine Möglichkeit auf Locks weitgehend zu verzichten ist der Nachrichtenaustausch.</p></li>
</ul>
<div class="supplemental">
<p>Generell ist der Austausch zwischen Prozessen über <span class="docutils literal">Queue</span>s, <span class="docutils literal">Pipe</span>s und (explizitem) <span class="docutils literal">SharedMemory</span> möglich; d. h. in diesen Fällen ist Inter-Prozess-Kommunikation (<em>Interprocess Communication (IPC)</em>) notwendig.</p>
</div></ld-topic><ld-topic id="queues">
<h2><span class="docutils literal">Queue</span>s</h2>
<p class="rubric"><span class="docutils literal">queue.Queue</span> oder <span class="docutils literal">multiprocessing.JoinableQueue</span></p>
<p>Die grundlegenden Methoden von <span class="docutils literal">Queue</span>s sind:</p>
<ul class="list-with-explanations">
<li><p><span class="docutils literal">Queue(maxsize=0)</span></p>
<p>Erzeugt eine neue Queue-Instanz welche <span class="docutils literal">maxsize</span>  Elemente speichern kann. 0 bedeutet, dass die Queue unendlich groß ist.</p>
<p>(Pythons <span class="docutils literal">Queue</span> realisiert einen <em>Bounded Buffer</em>.)</p>
</li>
</ul>
<ul class="incremental simple">
<li><p><span class="docutils literal">put(item)</span>: Fügt ein Element in die Queue ein.</p></li>
<li><p><span class="docutils literal">get()</span>: Entfernt und gibt das erste Element aus der Queue zurück.</p></li>
</ul>
<ul class="incremental simple">
<li><p><span class="docutils literal">task_done()</span>: Signalisiert, dass ein Element aus der Queue <em>abgearbeitet</em> wurde.</p></li>
<li><p><span class="docutils literal">join()</span>: Blockiert bis alle Elemente aus der Queue <em>abgearbeitet</em> wurde.</p></li>
</ul>
</ld-topic><ld-topic id="beispiel-verwendung-von-queues-fur-thread-sichere-konsolenausgabe">
<h2>Beispiel - Verwendung von <span class="docutils literal">Queue</span>s für Thread-Sichere Konsolenausgabe</h2>
<ld-grid class="default-layout">
<ld-cell class="width-50" style="align-self:auto;">
<p class="rubric">Setup</p>
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">queue</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Queue</span><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace"></span><span class="name">print_queue</span> <span class="operator">=</span> <span class="name">Queue</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">ts_print</span><span class="punctuation">(</span><span class="name">msg</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span>    <span class="name">print_queue</span><span class="operator">.</span><span class="name">put</span><span class="punctuation">(</span><span class="name">msg</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">print_handler</span><span class="punctuation">():</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>    <span class="keyword">while</span> <span class="keyword constant">True</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span>        <span class="name">msg</span> <span class="operator">=</span> <span class="name">print_queue</span><span class="operator">.</span><span class="name">get</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>        <span class="comment single"># there will ever be only one thread</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>        <span class="name builtin">print</span><span class="punctuation">(</span><span class="name">msg</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>        <span class="name">print_queue</span><span class="operator">.</span><span class="name">task_done</span><span class="punctuation">()</span></code></pre>
</ld-cell><ld-cell class="width-50 incremental" style="align-self:auto;">
<p class="rubric">Verwendung</p>
<pre class="code python copy-to-clipboard literal-block"><code><span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">print_handler</span><span class="punctuation">,</span><span class="name">daemon</span><span class="operator">=</span><span class="keyword constant">True</span><span class="punctuation">)</span><span class="operator">.</span>\
  <span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="error">⁞</span><span class="whitespace">
</span><span class="comment single"># &lt;thread 1:&gt; ts_print(&quot;Hello&quot;)</span><span class="whitespace">
</span><span class="error">⁞</span><span class="whitespace">
</span><span class="comment single"># &lt;thread 2:&gt; ts_print(&quot;World&quot;)</span><span class="whitespace">
</span><span class="error">⁞</span><span class="whitespace">
</span><span class="name">print_queue</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-cell></ld-grid><div class="supplemental">
<aside class="admonition hint">
<p class="admonition-title">Hinweis</p>
<ul class="simple">
<li><p><strong>nur ein Thread darf die print_queue abarbeiten</strong></p></li>
<li><p><strong>wir müssen überall ``ts_print`` verwenden</strong></p></li>
</ul>
</aside>
</div></ld-topic><ld-topic id="verwendung-von-queues-fur-die-kommunikation-zwischen-prozessen">
<h2>Verwendung von <span class="docutils literal">Queue</span>s für die Kommunikation zwischen Prozessen</h2>
<ld-deck>
<ld-card>
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">random</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">randint</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">multiprocessing</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">current_process</span><span class="punctuation">,</span> <span class="name">Process</span><span class="punctuation">,</span> <span class="name">JoinableQueue</span> <span class="keyword">as</span> <span class="name">MPQueue</span><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">threading</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Thread</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace"></span><span class="keyword namespace">from</span><span class="whitespace"> </span><span class="name namespace">queue</span><span class="whitespace"> </span><span class="keyword namespace">import</span> <span class="name">Queue</span> <span class="keyword">as</span> <span class="name">TQueue</span><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span><span class="keyword namespace">import</span><span class="whitespace"> </span><span class="name namespace">time</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">print_queue_handler</span><span class="punctuation">(</span><span class="name">print_queue</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span>    <span class="keyword">while</span> <span class="keyword constant">True</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>        <span class="name">msg</span> <span class="operator">=</span> <span class="name">print_queue</span><span class="operator">.</span><span class="name">get</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>        <span class="name builtin">print</span><span class="punctuation">(</span><span class="name">msg</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span>        <span class="name">print_queue</span><span class="operator">.</span><span class="name">task_done</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">read_from_ip_queue</span><span class="punctuation">(</span><span class="name">ip_queue</span><span class="punctuation">,</span> <span class="name">print_queue</span><span class="punctuation">):</span> <span class="comment single"># ip =(here) interprocess</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="keyword">while</span> <span class="keyword constant">True</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>        <span class="name">msg</span> <span class="operator">=</span> <span class="name">ip_queue</span><span class="operator">.</span><span class="name">get</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>        <span class="name">print_queue</span><span class="operator">.</span><span class="name">put</span><span class="punctuation">(</span><span class="name">msg</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">17 </small><code data-lineno="17 "><span class="whitespace"></span>        <span class="name">ip_queue</span><span class="operator">.</span><span class="name">task_done</span><span class="punctuation">()</span></code></pre>
</ld-card><ld-card class="incremental">
<pre class="code python copy-to-clipboard literal-block"><small class="ln">1 </small><code data-lineno="1 "><span class="keyword">def</span><span class="whitespace"> </span><span class="name function">f</span><span class="punctuation">(</span><span class="name">c_to_p_ip_queue</span><span class="punctuation">):</span><span class="whitespace">
</span></code><small class="ln">2 </small><code data-lineno="2 "><span class="whitespace"></span>    <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="name">randint</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">,</span> <span class="literal number integer">3</span><span class="punctuation">))</span> <span class="comment single"># just some fuzzing</span><span class="whitespace">
</span></code><small class="ln">3 </small><code data-lineno="3 "><span class="whitespace">
</span></code><small class="ln">4 </small><code data-lineno="4 "><span class="whitespace"></span>    <span class="name">c_to_p_ip_queue</span><span class="operator">.</span><span class="name">put</span><span class="punctuation">(</span><span class="literal string double">&quot;I'm alive: &quot;</span> <span class="operator">+</span> <span class="name">current_process</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span><span class="whitespace">
</span></code><small class="ln">5 </small><code data-lineno="5 "><span class="whitespace">
</span></code><small class="ln">6 </small><code data-lineno="6 "><span class="whitespace"></span>    <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="name">randint</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">,</span> <span class="literal number integer">3</span><span class="punctuation">))</span> <span class="comment single"># just some fuzzing</span><span class="whitespace">
</span></code><small class="ln">7 </small><code data-lineno="7 "><span class="whitespace">
</span></code><small class="ln">8 </small><code data-lineno="8 "><span class="whitespace"></span>    <span class="name">c_to_p_ip_queue</span><span class="operator">.</span><span class="name">put</span><span class="punctuation">(</span><span class="literal string double">&quot;Hell World from &quot;</span> <span class="operator">+</span> <span class="name">current_process</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span></code></pre>
</ld-card><ld-card class="incremental">
<pre class="code python copy-to-clipboard literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 "><span class="keyword">if</span> <span class="name variable magic">__name__</span> <span class="operator">==</span> <span class="literal string double">&quot;__main__&quot;</span><span class="punctuation">:</span><span class="whitespace">
</span></code><small class="ln"> 2 </small><code data-lineno=" 2 "><span class="whitespace"></span>    <span class="name">print_queue</span> <span class="operator">=</span> <span class="name">TQueue</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 3 </small><code data-lineno=" 3 "><span class="whitespace"></span>    <span class="name">c_to_p_ip_queue</span> <span class="operator">=</span> <span class="name">MPQueue</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 4 </small><code data-lineno=" 4 "><span class="whitespace"></span>    <span class="name">p1</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">f</span><span class="punctuation">,</span> <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="name">c_to_p_ip_queue</span><span class="punctuation">,))</span><span class="whitespace">
</span></code><small class="ln"> 5 </small><code data-lineno=" 5 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 6 </small><code data-lineno=" 6 "><span class="whitespace"></span>    <span class="name">p2</span> <span class="operator">=</span> <span class="name">Process</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">f</span><span class="punctuation">,</span> <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="name">c_to_p_ip_queue</span><span class="punctuation">,))</span><span class="whitespace">
</span></code><small class="ln"> 7 </small><code data-lineno=" 7 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln"> 8 </small><code data-lineno=" 8 "><span class="whitespace"></span>    <span class="name">Thread</span><span class="punctuation">(</span><span class="whitespace">
</span></code><small class="ln"> 9 </small><code data-lineno=" 9 "><span class="whitespace"></span>        <span class="name">target</span><span class="operator">=</span><span class="name">read_from_ip_queue</span><span class="punctuation">,</span><span class="whitespace">
</span></code><small class="ln">10 </small><code data-lineno="10 "><span class="whitespace"></span>        <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="name">c_to_p_ip_queue</span><span class="punctuation">,</span> <span class="name">print_queue</span><span class="punctuation">,</span> <span class="punctuation">),</span><span class="whitespace">
</span></code><small class="ln">11 </small><code data-lineno="11 "><span class="whitespace"></span>        <span class="name">daemon</span><span class="operator">=</span><span class="keyword constant">True</span><span class="punctuation">,</span><span class="whitespace">
</span></code><small class="ln">12 </small><code data-lineno="12 "><span class="whitespace"></span>    <span class="punctuation">)</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">13 </small><code data-lineno="13 "><span class="whitespace"></span>    <span class="name">Thread</span><span class="punctuation">(</span><span class="name">target</span><span class="operator">=</span><span class="name">print_queue_handler</span><span class="punctuation">,</span> <span class="name">args</span><span class="operator">=</span><span class="punctuation">(</span><span class="name">print_queue</span><span class="punctuation">,),</span> <span class="name">daemon</span><span class="operator">=</span><span class="keyword constant">True</span><span class="punctuation">)</span><span class="operator">.</span><span class="name">start</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">14 </small><code data-lineno="14 "><span class="whitespace"></span>    <span class="name">c_to_p_ip_queue</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">15 </small><code data-lineno="15 "><span class="whitespace"></span>    <span class="name">print_queue</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">16 </small><code data-lineno="16 "><span class="whitespace"></span>    <span class="name">p2</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span></code><small class="ln">17 </small><code data-lineno="17 "><span class="whitespace"></span>    <span class="name">p1</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span></code></pre>
</ld-card></ld-deck></ld-topic><ld-topic class="new-subsection" id="thread-safety">
<h2>Thread Safety</h2>
<div class="footer-left tiny minor docutils container">
<p><span class="ger">Threadsicherheit</span></p>
</div>
</ld-topic><ld-topic class="smaller" id="thread-safety-voraussetzung">
<h2>Thread Safety - Voraussetzung</h2>
<p>Damit eine Klasse thread-sicher ist, muss sie sich in einer single-threaded Umgebung korrekt verhalten.</p>
<ld-deck>
<ld-card>
<p>D. h. wenn eine Klasse korrekt implementiert ist, dann sollte keine Abfolge von Operationen (Lesen oder Schreiben von öffentlichen Feldern und Aufrufen von öffentlichen Methoden) auf Objekten dieser Klasse in der Lage sein:</p>
<blockquote>
<ul class="simple">
<li><p>das Objekt in einen ungültigen Zustand versetzen,</p></li>
<li><p>das Objekt in einem ungültigen Zustand zu beobachten oder</p></li>
<li><p>eine der Invarianten, Vorbedingungen oder Nachbedingungen der Klasse verletzen.</p></li>
</ul>
</blockquote>
</ld-card><ld-card class="incremental">
<p>Die Klasse muss das korrekte Verhalten auch dann aufweisen,
wenn auf sie von mehreren Threads aus zugegriffen wird.</p>
<ul class="simple">
<li><p>Unabhängig vom <em>Scheduling</em> oder der Verschachtelung der Ausführung dieser Threads durch die Laufzeitumgebung,</p></li>
<li><p>Ohne zusätzliche Synchronisierung auf Seiten des aufrufenden Codes.</p></li>
</ul>
</ld-card></ld-deck><div class="accentuate docutils container">
<p>Dies hat zur Folge, dass Operationen auf einem thread-sicheren Objekt für alle Threads so erscheinen als ob die Operationen in einer festen, global konsistenten Reihenfolge erfolgen würden.</p>
</div>
<div class="supplemental">
<p>Da sich Prozesse den Adressraum mit Threads nicht teilen, ist es nicht möglich, dass ein Prozess den Speicher eines anderen Prozesses direkt manipuliert. Dies bedeutet jedoch nicht, dass keine Inter-Prozess-Koordination notwendig ist. Insbesondere wenn auf auf gemeinsame Ressourcen - wie zum Beispiel die Konsole - zugegriffen wird, ist eine Koordination notwendig.</p>
</div></ld-topic><ld-topic id="thread-safety-level">
<h2>Thread Safety Level</h2>
<dl class="incremental-list field-list simple">
<dt>Immutable <span class="ger">Unveränderlich</span><span class="colon">:</span></dt>
<dd><p>Die Objekte sind konstant und können nicht geändert werden.</p>
</dd>
<dt>Thread-sicher<span class="colon">:</span></dt>
<dd><p>Die Objekte sind veränderbar, unterstützen aber nebenläufigen Zugriff, da die Methoden entsprechende Sperren und Bedingungen verwenden.</p>
</dd>
<dt>Bedingt Thread-sicher<span class="colon">:</span></dt>
<dd><p>All solche Objekte bei denen jede einzelne Operation thread-sicher ist, aber bestimmte Sequenzen von Operationen eine externe Synchronisierung erfordern können.</p>
</dd>
<dt>Thread-kompatibel<span class="colon">:</span></dt>
<dd><p>Alle Objekte die keinerlei Synchronisierung aufweisen. Der Aufrufer kann die Synchronisierung jedoch ggf. extern übernehmen.</p>
</dd>
<dt>Thread-hostile „Thread-schädlich“<span class="colon">:</span></dt>
<dd><p>Objekte, die nicht thread-sicher sind und auch nicht thread-sicher gemacht werden können, da sie zum Beispiel globalen Zustand manipulieren.</p>
</dd>
</dl>
<div class="supplemental">
<p>Ein Beispiel bzgl. <em>bedingt Thread-sicher</em> wäre die Verwendung eines Iterators, bei dem
die Methoden für sich genommen thread-sicher sind, aber die Iteration über die Elemente als ganzes zusätzliche Synchronisation erfordert, damit die Ergebnisse konsistent sind.</p>
<p>Ein Beispiel für eine <em>thread-schädliche</em> Klasse (Code) wäre eine Klasse, die auf eine globale Variable zugreift bzw. globalen Zustand ändert, der von mehreren Threads verwendet wird, ohne dass eine Synchronisierung stattfindet.</p>
</div></ld-topic><ld-topic class="no-title center-content transition-move-up" id="concurrency-done-wrong">
<h2>Concurrency Done Wrong</h2>
<aside class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>Wenn Nebenläufigkeit nicht richtig umgesetzt wird, dann kann dies nicht nur zu schwer zu findenden Fehlern führen sondern auch <strong>zu langsam(er)en Programmen</strong>.</p>
<div class="incremental docutils container">
<p>Im Allgemeinen sollte Parallelisierung auf <em>höchstmöglicher Ebene</em> erfolgen.</p>
</div>
</aside>
</ld-topic><ld-topic id="threads-und-prozesse-nicht-terminieren">
<h2>Threads und Prozesse nicht terminieren</h2>
<aside class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>Auch wenn es technisch möglich ist Threads und Prozesse explizit zu terminieren (z. B. durch <span class="docutils literal">Process.terminate()</span>) so sollte man darauf verzichten.</p>
</aside>
<div class="supplemental">
<p>Das Hauptproblem sind nicht freigegebene Locks und Ressourcen, die sich in einem inkonsistenten Zustand befinden können.</p>
<p>Auch in anderen Programmiersprachen sollte man niemals Threads oder Prozesse explizit terminieren.</p>
</div></ld-topic><ld-topic class="no-title center-content transition-move-up" id="starte-immer-mit-einer-single-threaded-implementation">
<h2>Starte immer mit einer <em>Single-threaded implementation</em></h2>
<aside class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>Nebenläufigkeit macht <em>nichts</em> einfacher! Entwickle und teste immer erst eine single-threaded Version des Programms.</p>
</aside>
</ld-topic><ld-topic class="exercises" id="ubung">
<h2>Übung</h2>
<ld-story>
<p>Implementieren Sie einen einfachen <em>DelayedBuffer</em>, der es ermöglicht Aufgaben (d. h. Objekte vom Typ <span class="docutils literal">Callable</span>) erst nach einer bestimmten Zeit auszuführen. Die Klasse muss zwei Funktionen zur Verfügung stellen:</p>
<dl class="field-list simple">
<dt><span class="docutils literal">submit(self, delay, fn, *args, **kwargs)</span><span class="colon">:</span></dt>
<dd><p>Die Funktion <span class="docutils literal">fn</span> wird nach <span class="docutils literal">delay</span> Sekunden ausgeführt wobei delay vom Typ Float ist. <span class="docutils literal">args</span> und <span class="docutils literal">kwargs</span> sind die Argumente, die an <span class="docutils literal">fn</span> übergeben werden.</p>
</dd>
<dt><span class="docutils literal">join(self)</span><span class="colon">:</span></dt>
<dd><p>Wartet bis alle Aufgaben abgearbeitet wurden.</p>
</dd>
</dl>
<div class="incremental docutils container">
<p>Im Folgenden sehen Sie eine mögliche Verwendung des Puffers:</p>
<pre class="code python copy-to-clipboard literal-block"><code><span class="name">buffer</span> <span class="operator">=</span> <span class="name">DelayedBuffer</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">submit</span><span class="punctuation">(</span><span class="literal number integer">100</span> <span class="operator">/</span> <span class="literal number integer">1000</span><span class="punctuation">,</span> <span class="name">ts_print</span><span class="punctuation">,</span> <span class="literal string double">&quot;Hello &quot;</span><span class="punctuation">,</span> <span class="operator">**</span><span class="punctuation">{</span><span class="literal string double">&quot;end&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&quot;</span><span class="punctuation">,</span> <span class="literal string double">&quot;flush&quot;</span><span class="punctuation">:</span> <span class="keyword constant">True</span><span class="punctuation">})</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">submit</span><span class="punctuation">(</span><span class="literal number integer">1000</span> <span class="operator">/</span> <span class="literal number integer">1000</span><span class="punctuation">,</span> <span class="name">ts_print</span><span class="punctuation">,</span> <span class="literal string double">&quot;World!&quot;</span><span class="punctuation">)</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">submit</span><span class="punctuation">(</span><span class="literal number integer">500</span> <span class="operator">/</span> <span class="literal number integer">1000</span><span class="punctuation">,</span> <span class="name">ts_print</span><span class="punctuation">,</span> <span class="literal string double">&quot;of the &quot;</span><span class="punctuation">,</span> <span class="operator">**</span><span class="punctuation">{</span><span class="literal string double">&quot;end&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&quot;</span><span class="punctuation">,</span> <span class="literal string double">&quot;flush&quot;</span><span class="punctuation">:</span> <span class="keyword constant">True</span><span class="punctuation">})</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">submit</span><span class="punctuation">(</span><span class="literal number integer">200</span> <span class="operator">/</span> <span class="literal number integer">1000</span><span class="punctuation">,</span> <span class="name">ts_print</span><span class="punctuation">,</span> <span class="literal string double">&quot;from &quot;</span><span class="punctuation">,</span> <span class="operator">**</span><span class="punctuation">{</span><span class="literal string double">&quot;end&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&quot;</span><span class="punctuation">,</span> <span class="literal string double">&quot;flush&quot;</span><span class="punctuation">:</span> <span class="keyword constant">True</span><span class="punctuation">})</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">submit</span><span class="punctuation">(</span><span class="literal number integer">300</span> <span class="operator">/</span> <span class="literal number integer">1000</span><span class="punctuation">,</span> <span class="name">ts_print</span><span class="punctuation">,</span> <span class="literal string double">&quot;the other side &quot;</span><span class="punctuation">,</span> <span class="operator">**</span><span class="punctuation">{</span><span class="literal string double">&quot;end&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&quot;</span><span class="punctuation">,</span> <span class="literal string double">&quot;flush&quot;</span><span class="punctuation">:</span> <span class="keyword constant">True</span><span class="punctuation">})</span><span class="whitespace">
</span><span class="comment single"># ggf. await buffer.join() im Falle von Koroutinen</span><span class="whitespace">
</span><span class="name">buffer</span><span class="operator">.</span><span class="name">join</span><span class="punctuation">()</span><span class="whitespace">
</span><span class="name builtin">print</span><span class="punctuation">(</span><span class="literal string double">&quot;Done.&quot;</span><span class="punctuation">)</span></code></pre>
</div>
<div class="ld-exercise incremental" data-exercise-id="1" data-exercise-title="1 - Implementation mit Threads" id="ld-exercise-1">
<p class="ld-exercise-title rubric">Implementation mit Threads</p>
<p>Implementieren Sie die Klasse <span class="docutils literal">DelayedBuffer</span> mit Hilfe von Threads (und ggf. <span class="docutils literal">Queue</span>s bzw. Locks).</p>
<p>Implementieren Sie <span class="docutils literal">ts_print</span> als Thread-sichere Variante von <span class="docutils literal">print</span>.</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:g2dNeCSaiYp0xuyc9Kr/oFIuZDNclI5uZr09PxMFnRw=:wNwcWdem2vHlUyzq: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</div>
</div>
<div class="ld-exercise incremental" data-exercise-id="2" data-exercise-title="2 - Implementation mit Threadpool" id="ld-exercise-2">
<p class="ld-exercise-title rubric">Implementation mit Threadpool</p>
<p>Implementieren Sie die Klasse <span class="docutils literal">DelayedBuffer</span> mit Hilfe eines <span class="docutils literal">concurrent.futures.ThreadPool</span>s (und ggf. <span class="docutils literal">Queue</span>s bzw. Locks).</p>
<p>Implementieren Sie <span class="docutils literal">ts_print</span> als Thread-sichere Variante von <span class="docutils literal">print</span>. Wählen Sie ggf. eine andere Implementierung als in der vorherigen Aufgabe.</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:MrHuRubQy1R+d0kBA9HGF8L7dk6mXoR60XvhEh6+9HQ=:jUwymtmajUEy3faP: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</div>
</div>
<div class="ld-exercise incremental" data-exercise-id="3" data-exercise-title="3 - Implementation mit Koroutinen" id="ld-exercise-3">
<p class="ld-exercise-title rubric">Implementation mit Koroutinen</p>
<p>Implementieren Sie die Klasse <span class="docutils literal">DelayedBuffer</span> mit Hilfe von Koroutinen (und ggf. <span class="docutils literal">asyncio.Queue</span>s).</p>
<div class="ld-exercise-solution" data-encrypted="true">
MTAwMDAw:ENvNcLA/+61e9cVRjlPoI/buO63QenvIQEuFWbCBIzg=:qAfqdBeSqrkH/6tq:evGiRyjwrPAnY9rAeCbEoNGLHLCHD9tjXLrJsqrwq9cEuhVTwqJaCgPQfI2m+BTkifYVFlO464n/vJKgDDyntmaO+Cv/+e+L0axk2rruk6A6QsS7ArzORsb7TAGHamBiThJxu71MRYdh2gG9AqSszEgWOnfjkOMn/ft/LqhsnBFy77Q5q+QEeGOax+gRN2kblGZYzMIPeqEiDcr2wcI9jITGkS+cL0vQ0zLCFzkwB2y1kPooSxT08Gi+kHM1ZYxe34O5PO/HCzV2xwfXvhNy1F5YA3dDXMXjr02ozl6ygnpjYIrC2G1xXtFtibyG9A4Zb5kRJohNX/xk+ywYinUH1I8msonN+DKt5zUYwzR6UNT8tbyu5ULtKu2P6Z3uwtA4dOY5KowC+c1/I6sQ83GLOGyD8bPD0S7BQwGO2bQY/59mww3R4hYkVXeyspSBFIUYeS01PTWzrfSv6EummIdwlD07LU+DFVD2BGOoJANoCiIGx9qAE286uYIK8/8zrrdpSAc0ihHJDp2jv+Jsl5/CJM34vSIIbGDW+EoWwr+NFlleAtGrCmByd+8Mc9pqQR9oKqrYFpJ3LapDXsZ3SdFsIMyVAAg3HbKdyNVAYeDFhWIF1sSsMkHlqmu0TTIIEpCTZsLR+itUzJu45dKb56BeGLtshmhgGMuXAhsUiWvWWtX6WcCKSuzc/q1O0COofJzG0Ox1SCiua0vWs1Lrz/qZqmyICIPIaNN3Zy46fe/vcyNbS8X0OumSMLVEKzTHMzcLaeJhCkgDXJcsaAvBTnW4j2cn2lMGGZiEc+yASqMwQCwzKFvH1ts4hbJZCfJVU/aOgnqSk2WQp0D19m3ceJHwo5DCuggHt1d3yk4B1ekqUNjCPiLx5cAl79Cy89QYCKBMmsCJLKy9WaejUL61CjmzW6IMyByo7/39LGMJPexukQ5Flpg7/WVVrfplM2/hGq9Nn/dkYkdoKRTrs8SjO4BfXCIGGHhkOestEOU2Qywq42LmkS2Bs78gL73VUVdhBlre5CsjrnNCM7mSM2PVKEjI2qqY9rx+/r4gqm5z4yrbDt63wpGvnXpsifWcPGKeOGfDcr7W8HqiMiF5QTPQ6/7nnIDeEg8dSzdQiJ53oo0rr8wcWjEiiC1bcDm/0phJt0e2hnrAZvjQp0zU9OSsRkQe4Xnv4cP+WQ9ovCc8X/0dU9R0xNAgCVDVBZdl+POVaRifRAL3Nu4nkj8ZvGlXqyU1H399CPc361/Kz9o/RFUJ8q4x0t8zRm55jvTS08Xll8kOGg9GiD04HwuC5Kki08j+uYTslJ3G7uiC5ROsXMIGICBgmH6NQecqwwnCRM/ZuLWcicKMzMWpA6yLYOb+f8dWjQq+IshXhDxHpfZXfbnYnYKc08j1LgXBlzQlB0DCrwOSruA+R8EqI0VXLH/dJMvNR/RDwzSTkuq+tGdlJsWOElz5mwX3/ZQBLpsjxGIH/EbWLd3/OVFOxyVbz6al87FVEZC7ce0F1UsQ98vHTs5ecFntqkccyVOEzvq1/faJiv3KYsiqiul4jEl0ffr1LybEuw42nZGz877RSdgOdVRht7MHCZo1vyRMH96lbQlXBHEnJgIIn9v3ks5oOHA5wBFQ5Za4RMjAGRl9EvmaVc+3MkrE+ufLXlFQx7V0Qgt0XLwec1gulXmCIMEv3HPTrzjYAL9EvxYYZZkPXNv/+HAvoN7enMvAuKeTK/gZqiad4l4teCWdsKN6d3Xy2+AANRKZTOeYnP2Moca1GGHZuGibWVWkS6pIHwW3H88ZSE65lRV3z0rNSiomFpb+yXVTFBzLqyPjGbgz9R5ApkcvCjcStFMDg+FxiWgr1WVAQRH6jOa5ErwtHOeiAPpbEQPQyjUPCfgQKC0q1+cEYWFYAi7MDbsZj0Gs/Yk3/ZXaE2PzuWrfYYd651ps2NibGFrkYiCupdX85FHfTIHYEm0dLzvgJdSRc6n56QKfcyWu6SCQuK+YdtA4lj+pxbnj407NyNol2p7M6EfUvpvFvSYcfXvXJEolRHKI5ykZcTlAwN9ylRAhDCyoPcrA/4f7PHaUrnkDDvmmyO0fmstuV5ITuU2oxKQd5yFxtboYLTDxiQp8rH4OQWYyjGB5of9TRpTvX5BdZXlUcp226u6VVIxXzaR3BhWQEzVb4bs5B1Inxg65KXjcGxxHAwHY+yXy8i2KN8TFGmK9rYL48GK4CNObPjhyn/j5zCgUEHv2dBPO1UGkXTetCMWIyh/vvXZ87sVOgwna0IgccsPL1hxbivhpJmZEJ5dieX/9baMGK/ZhEgPLwj+Ap0vJ40cx3YBQQu5blxhf8Z8wrFxownElfWXG31TKObcjlY6xWzgyeSioWnd+FDYKD5hxkm2slFwe7ahMeNmZ9YNnjJsRuQNa5UPa6c3vBvs2R/g5hTTijnFe5l9UDKDIoQ7GNpfnlFWFDhgl6+JzbnEu34zBQF5mSJPOr8ZeK4z9iDvhEip29hsbnLWwD1jelx52yc1BbZJwPbNskewht0WBf+oh6scZKkPWUChmawDs2L7whZn+cNg0bJwejOVcZXMqGXiSan3UNiLfXzME+qqH1b4dtp7uj5pnF9/Z6Pc9zJ5+5uAAi9qkZ6rjQOSM0AUbgOOuK+RWxknHBZdgJpLZSyUTqNOqlwlaRZX60GnJ2SwZOfvYdO7wz0o6tN7wXcN/lNryFGH6/3e6SbDSIWt76YMkOhprdw7pwhMLTdKOzhsVnPYnfjV/kDgMT5KoKswXRaVC0i30o+a/YhE4Eo1i2UVz0p8qIwfUM95YgRaA46BkYOQ48bsr5osfJK0fUjAR9qiROHUQgUImNMdLPWLr2bITNuoDJDL5o+D9mkOnpi8NHa1WseRWFhVUYxDIfzo347Nk1lLXMeYPuClhCJySEL7nxZ3xXqv3KBYToWTiGcM2o5G9EYZmZiGrC+nuoymWEUxDp7IqfD4COF78GlywduAVFGO3Pkf1BYgleKZEiCA4tdpzkeg2lkx4MyiHAYTwcwIHoUOV9/Q30JOm0rlhGFyIoKCei1pgNxUfK6BVOG3tUE9oMD+GAVfC8UOaktBeKCf9jQrcOOQwnFqaBZTzAN3J0r4sDr0I5Kt87Hh2ebIErrjEmI4exppkXefp6GpRfblKRM3JHpJtAwiYO7oHAgSCU6BF7j1FR+XKWmRdYKDRpRlvRqTudqe/M4SAtccLD16vq4JNbclgw+a+218jXfTZgnOPdNrYkGOOlbDbyX70rC6B+r7k4APEk1u3NJ1unUuAvMoIfAO+FsbPBMmmdsDQUcLWKoSkxkY++KyTTp7MjHszkMo2qAFekD+xta9S8CxTcDuOgPRbErMOP6gYjZnYzgt43pnDflAPONBfxAKDei+0t/zkh5K/gd0J8jGEhT+fQm92aCG394gokMUn0jOxVOeRahLQMGvIV5AUuG6Jpo9wj+av4qA2+fflviduEvndtTi9KrR+2YU9jU4GEaBGV6jxdLik+2NSlUShWAvdM/XMSDVUsulSl6XkFJsCD1/uqnoon0mQFu41G4hH0qxZAfyuQibrn9PTsnRWnprbNX9VDNMUEozCNPv2t4ZGBsubPcHBMdkWkEKA9XCsm5hUfNYvT8L3O24fLkkasaQj+Rfc2we7INpUawG5STeWQXLJ44E8PU6q4XM909pTVzZapRq6RNW3w3q0ya755Qi8PgvxFhGoBpmlWAIg64wzecgWMnNTA3mPrbnUCHsXNDFhSWvU+sNFyJIGqpCtiM12DFEuI86YxhXlLMAbQKsEkNXb69dVWNSSX5lhURj3lUS3KpOKAsQW2bHh9z2d+Rk7Sj67+LFI5o7pPfZzejnE+wz7r+v13IR2N8I47VGcVNMQrYyb5DbR7mGjJLRc2MeguUihKpV8MHcxFSUCThuk5p2RlkXnHo73noddkt5Udk8Rs8TJIZEBMiCyarDLYviZwnOXjOtpMDIqMhZSOs3ibUHu/x93gy8s20KLFj3l6rzxYzxnp+bo42dmrDYYdmf21GhAL72laleSY9raIStrEnmMktRQgQbkEGh4NiYxAjMK2K6kA+rgvEcIb3TIQWl6DdEuXPachIHcc20uFZpAbkDONDkt2g4LW419PF3H04rQsyQzpl5Ugsh2c/t25iutw6ukDrA+vo1Cr8RJCTJHIUiCI2+xGJZIBQooEN5vuCF0rFyKy87mUg/lACC7DkTpSg2xe+wvAx0MKxBaGqNSQrKzNsvqsFPEmoK5ofBzRVa5hyWUnkoHck9CmoM3r3libNCxllX7n50gEE+aj5ZXmHwxovcqamqPuHyHlYjD6CRWFUraEkRD1oA/zrx7U8+gbMm/tQQqeRZDc+dDoZrhMhihTuQOGEavZpn/pi/+Q/aqRXjIQeoWZHjwd6y4nSv9YWRaj0Cd2d3YZHoT3LVRezZrair87SwvZUaovgaW3Oui3UKtviVYLQhLYSXMXDMnYwwNec6FgMrnzZanbXDc0xikE9bNeBCW08DdiuDqyb/o5SwLrXsKRAeXb5j9Jw9nMGFSdc2vU23ukNh5Pc6L6uOT4TwU5NHkMp7ruDWrasjfg/Or0vezNUis08BA6UPgWuTCSLrzecB32KtWNF9M9V/7ppE1vt5sKUMw+xjloTMPPC2gv2RRC58ZQXjZBkgYKnrpz/66RQWNP2qERRq4FNDgof7VEG6vLKt7+k6FCQC6A1DjwqbT0pmkeyLKSjEn1lKiyey+io81N8cn/LFCrSYPbbQINxVSsFJGrWg9hzA/hYAqzqSPSz7IjinwgBvb4oI+XTOzKMnMofc7HTfH4vximqJOaDgL977ZY3jC5k9NZN3y30zjYjO4jvI6ajuqzRGYGJvre/gSqnmEkhWux0RyrhIzDuBWQM4zW55exQdRhAqvXIUDOhFPsHtK1dq/7k66JcEoUWSj7YIbKdodpPlu4q91jGiFthHWjDdb1OTfBRZq5AXMnN34BgDPT5Km8MzfiMLdw4e6gqVFZkA8iG6K5wV1VKWjR4UW5W2Xbz2QVKiMRgcjbjF6R0gSDlC5vYoYvxVs92Zlfr9JQ1uAukvd4U50oPKx8B7r8m4C431wblpvjMaoXYG0o7fRVPP50W31m9qkuZJ1FLVPOlaU1htyZsWQyEmRn+Qb5pKD92AwdaGrbDKAgLmAfD/VoQDZRt7ZvBPGt99W89Tcfc9oeIeOnqRa7yDGRE4anA3/9CkCXT32TZguUlWOOiJL9F6U075ikzEWCOFjGlxmjc2CBHzl/dqX7R9t2TSmzsxENdCPcL6X0yHL89+4C3V7wwIXhiyDOwhPRVlG5Kl9fruw+84a1Pg6jHT426iOwv8N8BQxHtajIBeXAiGiosLPiAl+e2j6rz9l8krILrxr8Of+7HLcWgu5gspCOpBz69gVvrBk+eddOFivdqQ93O1FlbIHPQqlhC7fYTu6H717Z10b8accXDYcVTbsn3Fga3IgPJHA6Jk7sT93Uxa8sI/eQwgqFMQnrqAIleA0nZuJ3i9vODDj4iSbwgLXOAQmvdHEfVooGFvUkjby/67U/YBScWqFDn0CT1YTUjy3KMFzwjM6dJu9OM/1kFMb1KNSxpuqwve3Vauk3U197v8F4R523cv3B0R6gJZhN1UzH1A0Nq4KfdJSkMnv1rFP8/ap/GaLANzBbH2IUPLz16NqqAJzyyZ+g/wDEP8bYVfwMaOZNRHC22AxMgYyNK2Qm5coFknV2VyYbfTzmASyWnMinVjLW+rONYqaivCsf7U03GJS1jlMysK9dr0P+AoUqdmcz4m64Nh7M18lJBYZ8odQy5NTlIa07Y4cmtveiGIY31NKyQXtytRXWG9NdHmkHY+IhSB6dvHPrV3QtrkOQb5i4yQ+PFalu67afvkG7bSP9uwUeAUCbzaWaGH+UB9b2W5zp/O2OrRFm3UxS8bKj0x/JGF6FnuuVWwupDz2EjvVv7lXd8It0bJovEsf21dfIs90H2mFy7DsvyEZNlo9qSZeEBamrPYO6DsrIK362ImKt9hSmJMTpyeFyp6wPHeA3zNBsVoi/ecc+ZDckOgTMz+DBVf/jgj4k77Bq9THBhYk5I9+HAxS7DrjBiGgJ7H1azggc34982WAyvf/btfIdE4ATQRA5xmJKducYywZzfOCL+93rqNuXrDuRGD9oKVJUIKtxjDMvtXFwyQyykXlVUHolskA7+ruyl9myrRvaAiJ+tlTk1FyJ/0Xz7mRdhtokHn5QvVQ2oOgJs1a7C0THjc/W2cplspS7tlV741DhSZ334KxFyBPfm75PgnzrwZGWIfYBOGKybiniw0trClmwdPv+wgc55Zpr9p+OFgt6V1oPJOWPUXnGOpRuqjgv+P2XiJs9FkxxqIxEDO+W0PP6MGuwJPL+eU0ejcjEZf3htmAXZITOrNzr19VcG0J2gC0sGEXSGJ4C9GlO9tIMbn1uoLEbzZ5UJg/R+dMFGU/SGeo4xZ9+LttpIuGuQUyizn8ce7onq85PNLzZZWCotEFIVtsDWoVLt5/MiA0Xt3GjrgBpIi1yYWsCV+jg/6/aZEab7iKzdR2DahE1vqoufjeBxjaiSUyfnCLW9V5RWdZUyDf2PotuB2Mkl2EfXXneCKqAq8uSC9anc1crfztKdaXQIlrjOoQvIsffWEMYmBHuPQsap3P80h49Xtm7ecG1PPeR/0EAUfm/at08juievkYn2O2SRhjQi7IWZribcYnQMcrnqxe9uX++/SNfwq+aC8tBxIMa6+k1rN7yhv+Y0oTW9buPpvlNXd2cfN9VQehYeM0sLSG0ilAartsAZuFFTBRDLR5EFHOB6Skh1VfxBrI/Jn6MppROZ23Yh1JfIzXIw9GnpXa6t/CsNgqOU2/1rxJDGogYEuFqy2S1oGlel/rYG4noFJw4cbLzwPlMn/ybvBXzpOmpnaSjJTzwAStFHLlTvYcoDqjDL1WEu5b/e9wveAV2QfKJZrJ1DTPgJVJ0E0OleBiyisEm2RbbYmlHq94bTSrSaGeSjdgoVOQHDl4vcHbK71ia9wQwpPvGkzhBOHEvWRv41X0l00AjhorbhchhGZCtiiaHTJ0k88McwatzbEbRghZUEAj5UM7P0UCN+MJaQWj5KPnDoOIOcc9Nb4Z0oYrGoWwTa9dlbqWOXWOYE9wgWZ7xTXF70n+EWfxbOft3bEfGAuEBtNiR/6ZJW8PQ9g4x4TFal2xFrSZ5NodJD46hQej7KP91ivn8mBrvqnQUF8bt6/UetfWzeLhMIJv4een72QB87wf3zCM+02W1C2HVqHR6RRqhndNg0PlP59VL772WxVhN89bs66vx8/rmhpN1/Vl1tAAVim6qw0M6oF50ANMcMqm3tX9tVtT9LCWICfxpxZKkOLQaGGQ68pHjfXEAc0xzt5cR1BmvRaPjyxTDGk6xPRZQDosluCSFTNtKuVAOONO4x/sZgNe8bkahv+FzdWXhZuU5ujGb2lols4EAN/xk2AjfN4yty4zb4hHCk/qTHFXiRSuhmJmWBnt+3jRUsu7CFoKOzSGHtece8gWUcCft+PD318DWze62D3heHMfofp/Zf6KDGA5X4BFUaJAXgoaQLaMnQYbVacoIzN6XYw+35HaqKmUUtbWUejQYiFj3rpnDfh2R/5cQOi3YgueQBDMq8oJDb8v9uElaejSXFydTj7jfHws2kdXU1r6VR0cz6gx++boPU40jkowDTaGGap9oakE1NOgaP0AgEBpJIhUTWDm83TTwGSaKBSI2CLeOWx3THyCTAx2nurZWKKyZmGLnCLIuQWntXHBRKoly85WHGee11ibSLJUKA61dmQjECexoykN6kqeDIqi5dOWHNbPy3wUk076dc93VhELJ+Vjsf9n++4Dmy0rsrpFWYudjal728YAiNOus+Nkwf7lmeLx3cZgNWQ/lPHm8A5U6zVmky+SpEdgSQp12Ak1JotwBS0o0P8pwfUHihRx7NyuPG0smH2DaUCpclroncGkOD2Yt/RiJvmr9N5iYS0kN8mqi+B6rpIXztT/0JbYZEoXA/BK9q0HDepywR0mnMoKTO7eeZ5tjXQAGON0r13/Bp2lFFNa5lquBghkSGjsEYRaHnSyCY/YXOBUla2Skw3r1itPQ8cwOcAgMk99gsQH8sXg6EjUaRqxxf5l+qMk2ghnfPEkay/cFCoV4Rg6hCezOnvBeR/Kce4JxRg2FPW1fJqeKc45Jk6A309YjN6mwV8w8Qi/Y7HXTV09wZ4MKYN4EbhbvgKrig/j7fRw9vMfcHbGTkYlorBRs9CgrdBY67LMIcN3TE+4McS5Ps00mOhPouMRVvw9LY0rn5GJiDcGJX/mfoiNfkJp9LXMbQei5n3k7Mj5fizG+MqWy5Qb2I0N/fFii1C6neAnzrqvNRcvOEbxSTnWA/nmpvkOWk6QG/EfTTAecqWW6DgMpauu32yQCla41DP9/jUhPV4AZmt33PXqt6Brb0YctTezs9sZv8KAZwFKVbQkwdeqTdzVWAXJkyiDuzH9/amoCFLCo0GNDAGmHDWjvdPaloYhv4Wm5zk8Qdexc4iiMlLrbpn2nVi1maviyT7OZBhDKsAxvk74u9QOmORYDCzpLO3OHina/oRpDh/jeDL5+5IlWXWSxZ8op+XTvhAb/ZJCV3wCQiUfSmGg1R8BJdamaCCQQ00/rp5yuPvdzuapHer8VwhtB6VOY5X7S6I/xNTOTemtnXevjjDajK8grXzcPR27rWAoXOuKijR7YZb6ev2TEfKOfVpioiO+AgxI5QR/A6M5FwEaWtD5etUhMb8kFKQasqr6acX6UiFgRQdbdgebUBM1tQGIbsqxEaKU+zMv06Br5YpdW6ILx4Fw4YcDQRPeSTIbOpOMRkRfayMRLwYDFeFSi7iWclLQwRwQifn8xc7npk6QMJy7Bg1KjgHkDOb1ndX2PgoPRDfvxwBoiWRpcAhwAc2HprZ+aCucSElLzadpD/oy7x5/XYC07s58mUn+yrcIhI3u9KFjavMuOk7fni3hKSBMSvtXSd3vdoprByWRR0rSmjSyNfYaaAvksIYV+43YaMXDDY4ch8pn43QPIGWtXrI2j4izfwb37VIXC8jD1V+tvJ3ArWEQt2UGc8v365BTP5VyMMayXGKqQl6fGpz2l2muvteLj3UQxb5cfygv5BVEAwCrZ5YJK9+6UogC01XauBeq3SerBPThGQzJat+vM3HFdBfVhre8paEXpIDKQF41d/OEPbieyZ3AHdP0CAy+hDTpZFEANl+iSx+pp0+IbN1xYuDQW1GwfrDdrgH/OEBvHfAxpQsAnMi2gVl7K0OSbK+dsXRKsy7z2uQ6AtffxuNUWBpXyXHR+2XD5pJNpoQY6GE+WePYKuM40nGmrY57XK4qah8bCgV+h+UzY9Sk1KHErk9ZkRCwjwFM6t0XIMQR0I8qmQtzc0FXmfCfZM4X0ICo9qCppV2D1SlSdF+oo3QNKL+biSU+vVbJ4nhVvYxI28cyu2UhFQIBLwKjxdUQg67bfp7ITBAiNuO+g70/Z5wEr5CsLxyzY/k62qlGUqZjo2XnuCdPZi1PNld+JXOCOkECxivVro0WK1q+k0qdjKy35A7DvLMt8rfWniIue/0gpYEl3XWCvT5pZJVFEZmCowTlqtr6Pso1DX1pqbs++mshbxtGDlx/QpO8CdwGmr+R0L5+iFNcuR8Stesze96EwiQNvBRXxVVhNL14MTI9o0+WnY0msYoR8YyDJY/AQntltExt7PaWwRbX/zy48Oy3K8qzenmkccxD8s1NGxBPHQghHKy0rLgaYzXxa3dNuBZZF/YJ1XQ64lZOrHd21Gpjultv1n/XUaqWXG5XY72fZqMV9YWklreTOIerBfLIgSNFePpG5d4wqPxMMG+jd2MGx+91GZdLNOe5BZGTir+L4Gx75aSYVtkCitQyBTSS6hDoGov4tDdHs5K09zTYIxRydW4+Dp1V5CAV3n1+moe+MoOv6+6mmpK25NvoADvn5EiNQ/IY3+aq4WKbovTucQOQ9BBrSyCIrstsYUsmdjdfdhupEsoM2sOskxvyx5jdDEpRsse9LeFg6CPU6W1WUmZsMwWMPI1zQwuVAMzSBMf4SokMynLBg3fmgH4+EaZ8ebflDqGbQWXTnm0DOqIJIzNc1fezKEtw/ZjGuIax3E8Vjz05MGQmxiXpFNTNh+vbair2OpnuLu6uDO8XS1PoMBTND1Gyn44RjiC4pXRNVqkjtPUpHLRZFmMa64992IgPXQPGKIkW5H5n5s9H7Ubqp/SZzCcPlYV7A8Yz3MPvxbm1mFwGDnthT+JBap27IcqONwLJIO9op1HuimAJyO+D3jhixBR1tkFNDQ30CAwx6EvHWyj/JkwEpON6xHWbm6UY0qCQGu8eLP4U3n2FFJNa2tmJiH7aFihR/rl3hwKksS1x4eQoP/wUtf1U1eFiHNT+gAeWNR31VcLXcqolULxv4tesCxZeNdzJXoAuAECzCaot65xvnhIJ1+5oNMOQ3gOvKLEuYtsJVnNwxuqKarKrS5ObGbAUQviSESTLfVzGtqnaVYRA8HrKJhNLer5Fy6oFJ1SyCFr7AHMxDYIZ1/sLy6KbTLkzSlGuAZ3Y+DuSREeDTGs0xS0xi+XEbpKtcSQg0tofUl5BIV+YAE13L+p6yLDnrgCQGpuOjy+iiFXfYmNOCibZe+AVPFJYrEF5SEH63sT1ZXX7GVO/i/JdosAkdhrKmbjXvbz5NiSkgo72FKKEIXfpKk3GMYttxhFS1piMgYyrL9ga7UguNPTZtrwSu8Ajc3zTEVkLHdUYHYw8hpHcZqi2xkvVO6iTxxukaiTkbCYYdk4t0YNjvDZJxe1m2FohVpFY6J+fSnw9iXks2srznVrF00wavmZ2YwHdhNNB9p+izP2ZGH4BYzWHAbaM8M17EsLwX+xyP4L8CVx9G1akiLVpJG+c5HPAcjN4cwgAW2p6GE7NvHDYpARu3ugbGpPaTP68wKtQnV/kt34T57Hirk+vVF+yKRFoaXECvGFNk6LSP54dR4kKg8Y9TO/0OkKQ0sn7Gtwqyxy/3SNCzf3I+ldlHbdM7HXCc7Ur1p6uQD22mgAmA/LRYIm14LDdyQRiPWq9Hx/IODjUEdesj6Tn8elky9mY0tLCPe07rn9O7+ymivDUDSPNMAr/xewgsT8h5FkbQerF9QoPlgN7hUtregwmUA4nJzRDzyeE7cNZ4Vizd2gtVRhQa+aQUpwbH+jT6d6YnXYtXQe71EmRXGixBuoIIU7UrHWfA9mMgXqkl+FbUqccnuUJBSelbTxsZPSAF6tymQZgQOUpvE1Qo1IvWoucUaGbGLRuwppUAxDa5ibTDGfElMS5vSXitqpuIQHhOnGIRrZy6gZTLbTxPjv1c4o3gTy8palvAldX2qxZepiMDNUhJ8bIU6R2DK4xnCjKc36XbCdNhFnwcQTinxJt0QkdoIp2O4aEGTA+DL6QODZASNUx0IsKBsSvXsyiyqSaxE8jHk2Qd1xAJ1j7yVSrrLvKCNFf3Pcl6goRr3mx/X7SAvdcsfyat1MY9whGuUbVxZ1USLX/7XTgCNB3Ju/8ytcUbWtBi94HyY0R+tQYgixHe7mWbDGEsIgKVhFYtiebClUTOWnXuo3nNNb0iWZlocZFqJMUerLZ3rwh06K8YQ3rfFx4rc25/rbIp3mnPbfu7e002kxV3JjeHduHCvN3LgDUIRuL8N6rYIWW49wo00ewHbx1dWkncKS8dijY7md80ET3h3iarM1boQbHCFe9SycLCaZBH2+KuohSzdaH2Vr2q/reoQhWGJO8FeSROTLzgOqU0I38XRZ5KBTZVmPaoLxV8BnuykeLGydmwiQpoYYFEmSY6OKhsgl+TTlvKNDV4qn8WmI3ackgJonj3fWi9TuCqSHVdtilmDtmMowWU3R/hAEsXppZnoExYYVBFWPBaNZVPDrV51J+56phfCxPQANuK+Weo5/RsWlYM/iomZ9javmyzqWEXCqg/89MjatsH0mMefVBxgA0vy2wFi4+Ok1BW8WNZtNZ2iX3vxy5TQUMKoF1P+XKDcJ/n4Oak2crCm8qVZPPxQZ9rDTp2TwIMPzwccBHD3khf/u7I8G6lTy+J7c6R3cOFQeAJT2P9uIupkrk+ZBIICltJXNFuTfapiB9LS1R/gfIMpaX0/HBENWoY1UE1GWgt7z8TQhmftldBx9x8nXQjMoBbv4MukYk/0V7+p4Z5p1NvRLTp6oOKO0RvlA13PyFMDu0eeFAVbnP13YK8mvhV+Ex9kt2wib8zcawCFyaQoYNgukoD6LfvOvtm1p6RJRwIgNLjcyKnavpW6AuELXUJd4/+9BP1UmN3jN4tum/F/+VGnWQaYUGCRoSw/KHoksOtSUoU9X6btq3w0xN4WPec1ae1/ulUQKNHIj4SNZ1FUwirzGNGYXys81lblg9V/fcTvqxHv7sUnhMuSAz7oPC6psNBPmVCMS8kgWtH3IXNcz7wTOY9pD/1CQHbkF9e5E/ew1u+Q/7hA+yDCSD199nU+wdY0+mf9Vdhk10FMRd93V9xIuyxqGdBjazJLbPjyHQJZuaCt3rPtOrXZjVYLlpUUvzgIBKkp5KVIj6YkJQqqCF6BTEsxhiPJBZggskjhXcWlatscOgDWYhHCYm9v2yzD1X7W7I+bFfVQPtjMh3ExevQnpjqSh9+yuVcbJGCnXUdHThKGsyQaCwrJAUwU56Rgt/u4kOBQ84RGAuLEPQyvqeW2ft4pCMg5N6B0QLmCBm0d7VEOnLIIHnl8zH00SOcAPf7/WYSt6doexDLiOpENqWctuXczXFRQq4e4HaTUHVZFSKnRq+dNp6UbUvgTLRWMCiGGCp4N1ZRCqxnWYu9rZtq+1vi5sx8DcsGNOeX3jKbPOPM8UaiW+c+nEtTZAoLesBsQ0/mN8IOrvpgp7CUwJdkhP1hTfdDKib36JBPPN0jlgmbvVid+Kg1M27bd1GlKjOxtn+wxOmo+GcFXPRxWOCYdDskAeNQmlo4Ms7kODQQJFZq67pE4nW8W5Vj9f4TcmamIyWapwoUVWTT56lDZxzK7rFGwgXrUL+kjhaWh00tBxoGwhcbYSlDyjUhF/4+bfo2lsU2Deh2t67bc1aMhafutLQvhEql4ax5sm8u/pIAGUm246IMoxXyjtsX2+mLQYwrjvAUrkuOrCaBAu+WfK82gCKgQFmDMoY+fgqZ+nVAbxjlGba8G0k3mCz4FTlbKEuxF/C4zRJPu9V9spfoSXJR+OL+6i8Aw+pejSUAk/qmfLOugL5gEtl3z/JqIod5iPezisYMOz330QuGmLqYV+Rd8QgzPTOuRTgX+2MYOCrtLyLn/XSTjjYunIu94pFNixjbferH2IFHNs30zEtPE5d/g5zvrAqChxaDnvTYXJWAnjuMPKGbUEwcZpVbavI6tbCwvuXGbx4/wWByh9xyq2PduJJuGKKY/Xdhpj8khD1j9wMsO4kAk5IIbY8jC7jmI5VirWoHtSiTSAB8wroWQx4aREqwJVhBSoi/Ez6tB3R507/EtfNuBbRlYbJR3QSDp7qMiQUDdrJjohYo1JYJzm+Ph8h+6TM4odd8RZ1KWzvUIUvXqzZ8xSl/FIVRh/ISobvSLwRKL2eyF9gh7nVCkp6+hqS5HP/Q/mPidl0GSnzjFCLB8CZ7DcISdAHGDLgsoODNeZBp/rGrMeisJbeAcCsEzaD/PG6m9HI4zEVcKlLdgfYdD/I6k8xsq6ep9AFF+OQAN5repHcTpsAsyrydIbBfafQzrtihaZE5xzD2t2tBJ0l/gw8JSxjrlb7LJZh68zsiPlILH3lnAWozlxs8FXgueDyGxUe9EmN3GSaFah9V4yf174NVZFaCjvtNBB6YtmsCWoBa+xxpAJr1CQB08VveFIuzbqWFOaH5BxvRK4l0oGOiOorOhdQ16HnSmkuejQeg+9Ws5VaqCujPB2bJsMVSCi2e6kmQSYEqtox8qPhyvyaUVqRTSlstVzOfn5GID7lrnauvwl+JygdmNj4nHt33nNdFUKIWC0t2FX/6XMPUOicUczHd4D5jNFXNRNmqSCPh9tgkW2iQKQAeRpAA186xeNioV7kgF6sOJ4MNctWkOQG6KUhhr1yM7FaYvDxy7R7JBALVq5DWIHlD8ca7WAGO0bPxSFpsbgeqVlsFKmszyerfQuOHKQ27C/MQnbBxxvYwD1o5qLShSUMlyHdsl6Srcl1VHZvyqTInt37PwuJaeFHntXNTd9lelI9Oa3w/hpLPXHG0qaU6p8WpmvH1NNm5OjmJwVHuuTrCFS0Ee6TM3/7ITAa9HW7D2umuNYMoXmXKbckfznuidXbNszzWJRCe4Ynta/lY4FTY3qWwBKhpcyKuWvIIo9m+spl6cL5XhLsDu6yab6f43b16lNfJiJeJ48mNvDdWHSizaMRjzqttpgQsb5EwL5id98kN78gIZ4/8iuNR88R5XCGeSv04sLtiogtthlmSnILdarcnrh0VOMtUi/srrqQdP69VLNDue9CASzQS9YePo5D3IQt28ugjPy+GzvQrdKfwFMIMimGGPx5T4TDebOiLgwMDreMUxn1mF01LxBSjgA00Va7BhzRirlZtbO++Nw7sChiP+z+ncrRcpUgR3SqL7ZKQzWgUJsFAFlwYyb/RA7qXN3QETYUfD61lcNE5gBY7FHT3NuqKzdwXmh+hZOJgtzHYqe6jB6Ihh+tLkp6d6zaTormr1y/8rxRKaXV9Khu87i6WP8UMZAt4rvji94mK5wNGesuUe8IJ/0cvOqbsqV3GYfd9XhMkECA01aQh6uBARdwqAOLEEovJqLdE5cAflbI08Sl45GRwDgb/LV6GhOq0iJ+2Hmpl/kt7Sk0prbYqAI819jWQq/BiG9FW3xK517wQ+UuxMYGGE75Nq5RnlEu9nLgWe+T6NDJUqygRHS7GGNQBuoRjE+dMGIKJz0bZPDsq0pKPO5rgiPtx7SLYkoXQq8L4qBE0fXiJHKyrHLrBHshMuCOKW7gyBtmE12SwayTEH59wJQGHz5eWYXwn0VgRoZjB+Bz6OO8weG4/ydkVcs39q0bSUEKhg4BwO9bo/RvMtv9zsHNyetuS4YOTDwUoPlXYB+TlfEQsPFaaeQuk69wMiMeR120TDciSxE+IMQ/mJpmOI9As0tiE3SJicwTnX+zpxaBwi2vxQOl/DETB/cny7oJ2TDP9HurVl+SQnTAM5T55/SnqrvJ3LHMNaaSGIgVJz9TEQuRA5mdxAo7mHuX/QizQqBe2u4CSDR/ezsgR9/TqJH5+YkLKIiNsLPlZAQUK5kHYzO95DHTJ7HGs7F5GJWwaNWPbW1dR4CsvnXy80xVV29NR6v7BbGfnLE3DY7RoGDwoj00Sr+RgQslGdS2A+KA/22D5hnJPTSoKmTpbA3hSQIgWJkTJdaJf5MU+Gg0gJc0DhW4TqTBLa97uabbolOIb/60CaKLaVaNV8K/a2iG9ETS+BezGMBr1x0JUtchxMfNgyVj+PRHimkfu++4aktjxw8R43ICQ6EyKqvW2APpSViuaaTlyTWV1aVS/zuP1PDe5LtBNgJXEoJQ/ElGp1lqZFvcJYfbBTAGjKxLxdEbrpf8oWmAgj4l1I6U5Yu5RkJOwFiFkgtiwbfON6YgbiGxqNpJbbLnFHkL+8rdQX6kll6hKIGF1YeFvgHJGkT9CbawSqU7iq48OsSQjUbt47+0uOnwBOWWnCIMYUcMGUr0PNz/fFQtAOe9PQrQhJL9IZ5cvF6Rl/19LFMbYnwvFoP5pbeuK7IB9q3vitwbeuq5FQifS8ciB+06xAvoewvtZTFIKlDBlKo5FVZ3cEhFM9IaXXR+1PLSwnfikUkZosjinGDEEwW5+RMeUYW5ahti+VDOMDKE0ANQ/fMK8vp7s0V/5lA5E7wm176t+2q9u79m3GT4xZZ81oOrQ8uhtPk0j/6eKEd7DAbQ7t/MhkC8lEIDtYRMgjqjJK2i9v4A7pOvPsAardcN8JWhA/NRa6ZQB1pNpnx9drVeJwQTFe26Wb9ddFdKPUJRXuY/nnQRYAdHvBQXQYD20oGO5k/UCqdYNkWeURABKynOhLVfbI/hHK6SvKr2+UDfhCpRUQkKJOX23loH2/Hw0v+lU+JpcmgpIHOxznTysayO6yUDxLyBlQEvOrtlCPbX1ZmqhMX9zOE0v7u/hbXYxF+Fv4iaX2ba+jFE/w3xYmXq3CuAHVxbHtID2zfo/ShUX7GYntWM5l+KTuLuYj5IPReLaw4KmVi7xkihUCLO0nRokEu3p5aIQ+fn+vnW9XQ5yUvEz5r6DEZITeytNP69xeDOTCCnpWFzmovDoX5//j/xKOYgpnq4PLE+XTbdEpDpfVAL0jn6xFjP/FwkLaJj5VPBgt/ZkHaov1nlHCJFsLzJ9eLibxCzI+1KQu0qwr0lEOwrSoMR/leKJQYdRUZq3Ka+YqL4QRHgYo9E0YHKGw08QH5FokmeEyo5YaVRj86pAkq+32nYH/aUCQPJUf+5Jx+M2g3wP6IbBBOXc7b1xHMRKWelvGDk</div>
</div>
</ld-story></ld-topic>
</template>
</body>
</html>
