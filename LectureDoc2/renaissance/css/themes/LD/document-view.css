/* LAYER: theme.ld.document-view */

#ld-document-view {

    --unitless-current-base-font-size: var(--unitless-d-font-size);
    --current-base-font-size: var(--d-font-size);
    font-size: var(--current-base-font-size);
    line-height: var(--d-line-height);

    >ld-section {
        display: block;
        
        margin-bottom: calc(var(--current-base-font-size) * 0.5);
        padding: var(--current-base-font-size);
        border-radius: 0.25em;

        --current-background-color: var(--white);
        background-color: var(--current-background-color);

        &.exercises,
        &.new-section {
            >h2 {
                padding: 0.25em;

                font-family: var(--large-text-font-family);
                font-size: 2em;
                text-align: center;

                border-radius: 0.25em;
            }
        }

        &.exercises>h2 {
            background-color: var(--light-gray);
            text-shadow: 1px 1px 1px var(--white);
        }

        &.new-section>h2 {
            background-color: var(--dark-gray);
            color: var(--white);
            text-shadow: 1px 1px 1px var(--black);
        }
    
        >footer {
            border-bottom: 1px solid var(--light-gray);
            border-top: 1px solid var(--light-gray);

            >.ld-dv-section-number {
                text-align: right;
                color: var(--gray);
            }
        }

        &.repetition::before {
            display: block;
            content: var(--repetition);
            text-align: center;
            padding: 0.25em 2.5em;
            color: var(--dark-red);
            border-bottom: 1px solid var(--dark-red);
        }
    }

    /*  In the document view supplemental information is shown where it was 
        defined, but we add a little separator to make it more clear that this
        is supplemental information. */
    .supplemental {
        clear: both;
        margin-top: 1em;
        border-top: 1px dashed var(--dark-gray);
        padding: calc(var(--current-base-font-size) * 0.5) 0;
        --current-base-font-size: var(--d-supplemental-font-size);
        font-size: var(--current-base-font-size);
        line-height: var(--d-supplemental-line-height);

        &+.supplemental {
            margin-top: 0em;
        }
    }

    /*  When we extract an exercise, we will first show an input field for the
        password, which we will replace with the solution once the password 
        was entered. When we print the PDF we won't show the solution. */
    .ld-extracted-exercise {
        margin-bottom: 0.5em;

        +.ld-extracted-exercise {
            border-top: solid 1px var(--light-gray);
            padding-top: 0.5em;
            @media print {
                page-break-before: always;
            }
        }

        input {
            width: 100%;

            margin-bottom: 0.5em;
            border: 1px solid var(--light-gray);
            border-radius: 0.5em;
            padding: 0.5em;

            box-shadow: var(--br-shadow);
        }
    }
    .ld-exercise-solution[data-encrypted] {
        display: none;
    }
    .ld-exercise-solution-wrapper {
        @media print {
            display: none;
        }
    }

    /*  Numbering sections and exercises. */
    counter-reset: section;
    counter-reset: exercise;

    .new-section {
        h2:first-child::before {
            content: counter(section)". ";
        }

        counter-increment: section;
        counter-set: exercise 0;
    }

    .ld-exercise-title::before {
        counter-increment: exercise;
        content: counter(section)"." counter(exercise)". ";
        font-weight: bold;
    }
}
