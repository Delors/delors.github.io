/* LAYER: ui.element */

/*  ----------------------------------------------------------------------------

    The menu.

    The menu is a nav element with the id ld-menu. It is placed at the bottom center of the viewport
    and expands when the mouse hovers over it.
*/

@media print {
    /* This selector needs to be very specific ....*/
    #ld-menu-popover,
    #ld-menu-popover-button {
        display: none;
    }
}

#ld-menu-popover-button {
    position: fixed;
    z-index: 1000;
    top: -4px;
    left: 4px;
    font-size: 28px;
    background-color: transparent;
    color: rgb(255 255 255 / 20%);
    text-shadow: 1px 1px 1px rgb(0 0 0 / 20%);
    border-radius: 6px;
    transition: all 0.3s ease-in-out;

    &:hover {
        color: rgb(255 255 255 / 100%);
        text-shadow: 1px 1px 1px rgb(0 0 0 / 70%);
        transition: all 0.3s ease-in-out;
    }

    &:has(~ #ld-menu:popover-open) {
        display: none;
    }
}

#ld-menu {
    /* NAV BAR PARAMETERS */
    --nav-bar-buttons: 11;
    --nav-bar-full-spaces: 2;
    --nav-bar-half-spaces: 2;

    --nav-bar-button-width: 28px;
    --nav-bar-button-height: 28px;

    /* DERIVED VALUES USED IN PROPERTIES */
    /* => effective height: + (2*9px) = 54px */
    --nav-bar-height: calc(
        var(--nav-bar-button-height) + (var(--nav-bar-button-height) / 2)
    );
    --nav-bar-width: calc(
        (
                var(--nav-bar-buttons) + var(--nav-bar-full-spaces) + 0.5 +
                    var(--nav-bar-half-spaces) * 0.5
            ) *
            var(--nav-bar-button-width)
    );
    --nav-bar-distance-from-left: calc(50% - var(--nav-bar-width) / 2);

    --nav-bar-hover-distance: 8px;
    /* distance from the bottom of the viewport when hovered */

    position: fixed;
    z-index: 1001;
    left: 4px;
    top: 4px;

    &:not(:popover-open) {
        display: none;
    }

    display: flex;
    flex-direction: column;

    padding: calc(var(--nav-bar-button-width) / 4);
    background-color: rgb(255 255 255 / 50%);

    border-radius: 8px;
    box-shadow: 0 0 8px rgb(0 0 0 / 30%);
    backdrop-filter: blur(3px);

    font-size: 32px;
    /*just set to spot errors/

    /* animated properties */
    transition: all 0.3s ease-in-out;

    div {
        flex-shrink: 0;
        flex-grow: 0;

        &.full-space {
            height: calc(var(--nav-bar-button-height));
        }

        &.half-space {
            height: calc(var(--nav-bar-button-height) / 2);
        }
    }

    button {
        width: var(--nav-bar-button-width);
        height: var(--nav-bar-button-height);
        img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        padding: 0;
        border-radius: 4px;

        background-color: transparent;
        transition: all 0.3s ease-in-out;

        &[disabled] {
            opacity: 0.5;
        }

        &:hover:not([disabled]) {
            background-color: rgb(255 255 255 / 25%);
            box-shadow: 0 0 8px rgb(0 0 0 / 30%);
            transition: all 0.3s ease-in-out;
        }
    }
}

body[data-ld-mode="slide-view"] > #ld-menu {
    --nav-bar-buttons: 11;
    --nav-bar-full-spaces: 2;
    --nav-bar-half-spaces: 2;
}

body[data-ld-mode="document-view"] > #ld-menu {
    --nav-bar-buttons: 6;
    --nav-bar-full-spaces: 1;
    --nav-bar-half-spaces: 2;

    > [data-ld-mode="slide-view"] {
        display: none;
    }
}
